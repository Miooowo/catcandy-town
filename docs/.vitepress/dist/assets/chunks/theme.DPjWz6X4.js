var $t=Object.defineProperty;var kt=(a,e,t)=>e in a?$t(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var P=(a,e,t)=>kt(a,typeof e!="symbol"?e+"":e,t);import{d as L,c as d,r as $,n as O,o as r,a as he,t as b,b as N,w as x,T as Je,e as S,_ as B,u as _t,i as St,f as wt,g as ze,h as C,j as i,k as p,l as me,m as Fe,p as A,q as ee,s as Be,v as ie,x as xe,y as qe,z as xt,A as Mt,F as j,B as R,C as ve,D as at,E as Ve,G as D,H as ne,I as it,J as Ae,K as de,L as $e,M as Tt,N as X,O as Ct,P as Le,Q as ot,R as Ne,S as Pt,U as lt,V as Ie,W as Lt,X as It,Y as Dt,Z as ke,$ as Bt,a0 as Vt,a1 as At,a2 as Nt,a3 as rt}from"./framework.Dz8UOCBN.js";const Et=L({__name:"VPBadge",props:{text:{},type:{default:"tip"}},setup(a){return(e,t)=>(r(),d("span",{class:O(["VPBadge",a.type])},[$(e.$slots,"default",{},()=>[he(b(a.text),1)])],2))}}),jt={key:0,class:"VPBackdrop"},Ht=L({__name:"VPBackdrop",props:{show:{type:Boolean}},setup(a){return(e,t)=>(r(),N(Je,{name:"fade"},{default:x(()=>[a.show?(r(),d("div",jt)):S("",!0)]),_:1}))}}),Ot=B(Ht,[["__scopeId","data-v-c79a1216"]]),F=_t;function Rt(a,e){let t,s=!1;return()=>{t&&clearTimeout(t),s?t=setTimeout(a,e):(a(),(s=!0)&&setTimeout(()=>s=!1,e))}}function We(a){return a.startsWith("/")?a:`/${a}`}function Ke(a){const{pathname:e,search:t,hash:s,protocol:n}=new URL(a,"http://a.com");if(St(a)||a.startsWith("#")||!n.startsWith("http")||!wt(e))return a;const{site:o}=F(),l=e.endsWith("/")||e.endsWith(".html")?a:a.replace(/(?:(^\.+)\/)?.*$/,`$1${e.replace(/(\.md)?$/,o.value.cleanUrls?"":".html")}${t}${s}`);return ze(l)}function Me({correspondingLink:a=!1}={}){const{site:e,localeIndex:t,page:s,theme:n,hash:o}=F(),l=C(()=>{var u,g;return{label:(u=e.value.locales[t.value])==null?void 0:u.label,link:((g=e.value.locales[t.value])==null?void 0:g.link)||(t.value==="root"?"/":`/${t.value}/`)}});return{localeLinks:C(()=>Object.entries(e.value.locales).flatMap(([u,g])=>l.value.label===g.label?[]:{text:g.label,link:Ft(g.link||(u==="root"?"/":`/${u}/`),n.value.i18nRouting!==!1&&a,s.value.relativePath.slice(l.value.link.length-1),!e.value.cleanUrls)+o.value})),currentLang:l}}function Ft(a,e,t,s){return e?a.replace(/\/$/,"")+We(t.replace(/(^|\/)index\.md$/,"$1").replace(/\.md$/,s?".html":"")):a}const Wt={class:"NotFound"},Gt={class:"code"},Ut={class:"title"},Jt={class:"quote"},zt={class:"action"},qt=["href","aria-label"],Kt=L({__name:"NotFound",setup(a){const{theme:e}=F(),{currentLang:t}=Me();return(s,n)=>{var o,l,c,u,g;return r(),d("div",Wt,[i("p",Gt,b(((o=p(e).notFound)==null?void 0:o.code)??"404"),1),i("h1",Ut,b(((l=p(e).notFound)==null?void 0:l.title)??"PAGE NOT FOUND"),1),n[0]||(n[0]=i("div",{class:"divider"},null,-1)),i("blockquote",Jt,b(((c=p(e).notFound)==null?void 0:c.quote)??"But if you don't change your direction, and if you keep looking, you may end up where you are heading."),1),i("div",zt,[i("a",{class:"link",href:p(ze)(p(t).link),"aria-label":((u=p(e).notFound)==null?void 0:u.linkLabel)??"go to home"},b(((g=p(e).notFound)==null?void 0:g.linkText)??"Take me home"),9,qt)])])}}}),Yt=B(Kt,[["__scopeId","data-v-d6be1790"]]);function ct(a,e){if(Array.isArray(a))return Pe(a);if(a==null)return[];e=We(e);const t=Object.keys(a).sort((n,o)=>o.split("/").length-n.split("/").length).find(n=>e.startsWith(We(n))),s=t?a[t]:[];return Array.isArray(s)?Pe(s):Pe(s.items,s.base)}function Xt(a){const e=[];let t=0;for(const s in a){const n=a[s];if(n.items){t=e.push(n);continue}e[t]||e.push({items:[]}),e[t].items.push(n)}return e}function Qt(a){const e=[];function t(s){for(const n of s)n.text&&n.link&&e.push({text:n.text,link:n.link,docFooterText:n.docFooterText}),n.items&&t(n.items)}return t(a),e}function Ge(a,e){return Array.isArray(e)?e.some(t=>Ge(a,t)):me(a,e.link)?!0:e.items?Ge(a,e.items):!1}function Pe(a,e){return[...a].map(t=>{const s={...t},n=s.base||e;return n&&s.link&&(s.link=n+s.link),s.items&&(s.items=Pe(s.items,n)),s})}function re(){const{frontmatter:a,page:e,theme:t}=F(),s=Fe("(min-width: 960px)"),n=A(!1),o=C(()=>{const M=t.value.sidebar,k=e.value.relativePath;return M?ct(M,k):[]}),l=A(o.value);ee(o,(M,k)=>{JSON.stringify(M)!==JSON.stringify(k)&&(l.value=o.value)});const c=C(()=>a.value.sidebar!==!1&&l.value.length>0&&a.value.layout!=="home"),u=C(()=>g?a.value.aside==null?t.value.aside==="left":a.value.aside==="left":!1),g=C(()=>a.value.layout==="home"?!1:a.value.aside!=null?!!a.value.aside:t.value.aside!==!1),m=C(()=>c.value&&s.value),v=C(()=>c.value?Xt(l.value):[]);function h(){n.value=!0}function f(){n.value=!1}function T(){n.value?f():h()}return{isOpen:n,sidebar:l,sidebarGroups:v,hasSidebar:c,hasAside:g,leftAside:u,isSidebarEnabled:m,open:h,close:f,toggle:T}}function Zt(a,e){let t;Be(()=>{t=a.value?document.activeElement:void 0}),ie(()=>{window.addEventListener("keyup",s)}),xe(()=>{window.removeEventListener("keyup",s)});function s(n){n.key==="Escape"&&a.value&&(e(),t==null||t.focus())}}function es(a){const{page:e,hash:t}=F(),s=A(!1),n=C(()=>a.value.collapsed!=null),o=C(()=>!!a.value.link),l=A(!1),c=()=>{l.value=me(e.value.relativePath,a.value.link)};ee([e,a,t],c),ie(c);const u=C(()=>l.value?!0:a.value.items?Ge(e.value.relativePath,a.value.items):!1),g=C(()=>!!(a.value.items&&a.value.items.length));Be(()=>{s.value=!!(n.value&&a.value.collapsed)}),qe(()=>{(l.value||u.value)&&(s.value=!1)});function m(){n.value&&(s.value=!s.value)}return{collapsed:s,collapsible:n,isLink:o,isActiveLink:l,hasActiveLink:u,hasChildren:g,toggle:m}}function ts(){const{hasSidebar:a}=re(),e=Fe("(min-width: 960px)"),t=Fe("(min-width: 1280px)");return{isAsideEnabled:C(()=>!t.value&&!e.value?!1:a.value?t.value:e.value)}}const ss=/\b(?:VPBadge|header-anchor|footnote-ref|ignore-header)\b/,Ue=[];function ut(a){return typeof a.outline=="object"&&!Array.isArray(a.outline)&&a.outline.label||a.outlineTitle||"On this page"}function Ye(a){const e=[...document.querySelectorAll(".VPDoc :where(h1,h2,h3,h4,h5,h6)")].filter(t=>t.id&&t.hasChildNodes()).map(t=>{const s=Number(t.tagName[1]);return{element:t,title:ns(t),link:"#"+t.id,level:s}});return as(e,a)}function ns(a){let e="";for(const t of a.childNodes)if(t.nodeType===1){if(ss.test(t.className))continue;e+=t.textContent}else t.nodeType===3&&(e+=t.textContent);return e.trim()}function as(a,e){if(e===!1)return[];const t=(typeof e=="object"&&!Array.isArray(e)?e.level:e)||2,[s,n]=typeof t=="number"?[t,t]:t==="deep"?[2,6]:t;return ls(a,s,n)}function is(a,e){const{isAsideEnabled:t}=ts(),s=Rt(o,100);let n=null;ie(()=>{requestAnimationFrame(o),window.addEventListener("scroll",s)}),xt(()=>{l(location.hash)}),xe(()=>{window.removeEventListener("scroll",s)});function o(){if(!t.value)return;const c=window.scrollY,u=window.innerHeight,g=document.body.offsetHeight,m=Math.abs(c+u-g)<1,v=Ue.map(({element:f,link:T})=>({link:T,top:os(f)})).filter(({top:f})=>!Number.isNaN(f)).sort((f,T)=>f.top-T.top);if(!v.length){l(null);return}if(c<1){l(null);return}if(m){l(v[v.length-1].link);return}let h=null;for(const{link:f,top:T}of v){if(T>c+Mt()+4)break;h=f}l(h)}function l(c){n&&n.classList.remove("active"),c==null?n=null:n=a.value.querySelector(`a[href="${decodeURIComponent(c)}"]`);const u=n;u?(u.classList.add("active"),e.value.style.top=u.offsetTop+39+"px",e.value.style.opacity="1"):(e.value.style.top="33px",e.value.style.opacity="0")}}function os(a){let e=0;for(;a!==document.body;){if(a===null)return NaN;e+=a.offsetTop,a=a.offsetParent}return e}function ls(a,e,t){Ue.length=0;const s=[],n=[];return a.forEach(o=>{const l={...o,children:[]};let c=n[n.length-1];for(;c&&c.level>=l.level;)n.pop(),c=n[n.length-1];if(l.element.classList.contains("ignore-header")||c&&"shouldIgnore"in c){n.push({level:l.level,shouldIgnore:!0});return}l.level>t||l.level<e||(Ue.push({element:l.element,link:l.link}),c?c.children.push(l):s.push(l),n.push(l))}),s}const rs=["href","title"],cs=L({__name:"VPDocOutlineItem",props:{headers:{},root:{type:Boolean}},setup(a){function e({target:t}){const s=t.href.split("#")[1],n=document.getElementById(decodeURIComponent(s));n==null||n.focus({preventScroll:!0})}return(t,s)=>{const n=ve("VPDocOutlineItem",!0);return r(),d("ul",{class:O(["VPDocOutlineItem",a.root?"root":"nested"])},[(r(!0),d(j,null,R(a.headers,({children:o,link:l,title:c})=>(r(),d("li",null,[i("a",{class:"outline-link",href:l,onClick:e,title:c},b(c),9,rs),o!=null&&o.length?(r(),N(n,{key:0,headers:o},null,8,["headers"])):S("",!0)]))),256))],2)}}}),dt=B(cs,[["__scopeId","data-v-b933a997"]]),us={class:"content"},ds={"aria-level":"2",class:"outline-title",id:"doc-outline-aria-label",role:"heading"},hs=L({__name:"VPDocAsideOutline",setup(a){const{frontmatter:e,theme:t}=F(),s=at([]);Ve(()=>{s.value=Ye(e.value.outline??t.value.outline)});const n=A(),o=A();return is(n,o),(l,c)=>(r(),d("nav",{"aria-labelledby":"doc-outline-aria-label",class:O(["VPDocAsideOutline",{"has-outline":s.value.length>0}]),ref_key:"container",ref:n},[i("div",us,[i("div",{class:"outline-marker",ref_key:"marker",ref:o},null,512),i("div",ds,b(p(ut)(p(t))),1),D(dt,{headers:s.value,root:!0},null,8,["headers"])])],2))}}),fs=B(hs,[["__scopeId","data-v-a5bbad30"]]),ms={class:"VPDocAsideCarbonAds"},vs=L({__name:"VPDocAsideCarbonAds",props:{carbonAds:{}},setup(a){const e=()=>null;return(t,s)=>(r(),d("div",ms,[D(p(e),{"carbon-ads":a.carbonAds},null,8,["carbon-ads"])]))}}),ps={class:"VPDocAside"},gs=L({__name:"VPDocAside",setup(a){const{theme:e}=F();return(t,s)=>(r(),d("div",ps,[$(t.$slots,"aside-top",{},void 0,!0),$(t.$slots,"aside-outline-before",{},void 0,!0),D(fs),$(t.$slots,"aside-outline-after",{},void 0,!0),s[0]||(s[0]=i("div",{class:"spacer"},null,-1)),$(t.$slots,"aside-ads-before",{},void 0,!0),p(e).carbonAds?(r(),N(vs,{key:0,"carbon-ads":p(e).carbonAds},null,8,["carbon-ads"])):S("",!0),$(t.$slots,"aside-ads-after",{},void 0,!0),$(t.$slots,"aside-bottom",{},void 0,!0)]))}}),bs=B(gs,[["__scopeId","data-v-3f215769"]]);function ys(){const{theme:a,page:e}=F();return C(()=>{const{text:t="Edit this page",pattern:s=""}=a.value.editLink||{};let n;return typeof s=="function"?n=s(e.value):n=s.replace(/:path/g,e.value.filePath),{url:n,text:t}})}function $s(){const{page:a,theme:e,frontmatter:t}=F();return C(()=>{var g,m,v,h,f,T,M,k;const s=ct(e.value.sidebar,a.value.relativePath),n=Qt(s),o=ks(n,y=>y.link.replace(/[?#].*$/,"")),l=o.findIndex(y=>me(a.value.relativePath,y.link)),c=((g=e.value.docFooter)==null?void 0:g.prev)===!1&&!t.value.prev||t.value.prev===!1,u=((m=e.value.docFooter)==null?void 0:m.next)===!1&&!t.value.next||t.value.next===!1;return{prev:c?void 0:{text:(typeof t.value.prev=="string"?t.value.prev:typeof t.value.prev=="object"?t.value.prev.text:void 0)??((v=o[l-1])==null?void 0:v.docFooterText)??((h=o[l-1])==null?void 0:h.text),link:(typeof t.value.prev=="object"?t.value.prev.link:void 0)??((f=o[l-1])==null?void 0:f.link)},next:u?void 0:{text:(typeof t.value.next=="string"?t.value.next:typeof t.value.next=="object"?t.value.next.text:void 0)??((T=o[l+1])==null?void 0:T.docFooterText)??((M=o[l+1])==null?void 0:M.text),link:(typeof t.value.next=="object"?t.value.next.link:void 0)??((k=o[l+1])==null?void 0:k.link)}}})}function ks(a,e){const t=new Set;return a.filter(s=>{const n=e(s);return t.has(n)?!1:t.add(n)})}const ae=L({__name:"VPLink",props:{tag:{},href:{},noIcon:{type:Boolean},target:{},rel:{}},setup(a){const e=a,t=C(()=>e.tag??(e.href?"a":"span")),s=C(()=>e.href&&it.test(e.href)||e.target==="_blank");return(n,o)=>(r(),N(ne(t.value),{class:O(["VPLink",{link:a.href,"vp-external-link-icon":s.value,"no-icon":a.noIcon}]),href:a.href?p(Ke)(a.href):void 0,target:a.target??(s.value?"_blank":void 0),rel:a.rel??(s.value?"noreferrer":void 0)},{default:x(()=>[$(n.$slots,"default")]),_:3},8,["class","href","target","rel"]))}}),_s={class:"VPLastUpdated"},Ss=["datetime"],ws=L({__name:"VPDocFooterLastUpdated",setup(a){const{theme:e,page:t,lang:s}=F(),n=C(()=>new Date(t.value.lastUpdated)),o=C(()=>n.value.toISOString()),l=A("");return ie(()=>{Be(()=>{var c,u,g;l.value=new Intl.DateTimeFormat((u=(c=e.value.lastUpdated)==null?void 0:c.formatOptions)!=null&&u.forceLocale?s.value:void 0,((g=e.value.lastUpdated)==null?void 0:g.formatOptions)??{dateStyle:"short",timeStyle:"short"}).format(n.value)})}),(c,u)=>{var g;return r(),d("p",_s,[he(b(((g=p(e).lastUpdated)==null?void 0:g.text)||p(e).lastUpdatedText||"Last updated")+": ",1),i("time",{datetime:o.value},b(l.value),9,Ss)])}}}),xs=B(ws,[["__scopeId","data-v-e98dd255"]]),Ms={key:0,class:"VPDocFooter"},Ts={key:0,class:"edit-info"},Cs={key:0,class:"edit-link"},Ps={key:1,class:"last-updated"},Ls={key:1,class:"prev-next","aria-labelledby":"doc-footer-aria-label"},Is={class:"pager"},Ds=["innerHTML"],Bs=["innerHTML"],Vs={class:"pager"},As=["innerHTML"],Ns=["innerHTML"],Es=L({__name:"VPDocFooter",setup(a){const{theme:e,page:t,frontmatter:s}=F(),n=ys(),o=$s(),l=C(()=>e.value.editLink&&s.value.editLink!==!1),c=C(()=>t.value.lastUpdated),u=C(()=>l.value||c.value||o.value.prev||o.value.next);return(g,m)=>{var v,h,f,T;return u.value?(r(),d("footer",Ms,[$(g.$slots,"doc-footer-before",{},void 0,!0),l.value||c.value?(r(),d("div",Ts,[l.value?(r(),d("div",Cs,[D(ae,{class:"edit-link-button",href:p(n).url,"no-icon":!0},{default:x(()=>[m[0]||(m[0]=i("span",{class:"vpi-square-pen edit-link-icon"},null,-1)),he(" "+b(p(n).text),1)]),_:1},8,["href"])])):S("",!0),c.value?(r(),d("div",Ps,[D(xs)])):S("",!0)])):S("",!0),(v=p(o).prev)!=null&&v.link||(h=p(o).next)!=null&&h.link?(r(),d("nav",Ls,[m[1]||(m[1]=i("span",{class:"visually-hidden",id:"doc-footer-aria-label"},"Pager",-1)),i("div",Is,[(f=p(o).prev)!=null&&f.link?(r(),N(ae,{key:0,class:"pager-link prev",href:p(o).prev.link},{default:x(()=>{var M;return[i("span",{class:"desc",innerHTML:((M=p(e).docFooter)==null?void 0:M.prev)||"Previous page"},null,8,Ds),i("span",{class:"title",innerHTML:p(o).prev.text},null,8,Bs)]}),_:1},8,["href"])):S("",!0)]),i("div",Vs,[(T=p(o).next)!=null&&T.link?(r(),N(ae,{key:0,class:"pager-link next",href:p(o).next.link},{default:x(()=>{var M;return[i("span",{class:"desc",innerHTML:((M=p(e).docFooter)==null?void 0:M.next)||"Next page"},null,8,As),i("span",{class:"title",innerHTML:p(o).next.text},null,8,Ns)]}),_:1},8,["href"])):S("",!0)])])):S("",!0)])):S("",!0)}}}),js=B(Es,[["__scopeId","data-v-e257564d"]]),Hs={class:"container"},Os={class:"aside-container"},Rs={class:"aside-content"},Fs={class:"content"},Ws={class:"content-container"},Gs={class:"main"},Us=L({__name:"VPDoc",setup(a){const{theme:e}=F(),t=Ae(),{hasSidebar:s,hasAside:n,leftAside:o}=re(),l=C(()=>t.path.replace(/[./]+/g,"_").replace(/_html$/,""));return(c,u)=>{const g=ve("Content");return r(),d("div",{class:O(["VPDoc",{"has-sidebar":p(s),"has-aside":p(n)}])},[$(c.$slots,"doc-top",{},void 0,!0),i("div",Hs,[p(n)?(r(),d("div",{key:0,class:O(["aside",{"left-aside":p(o)}])},[u[0]||(u[0]=i("div",{class:"aside-curtain"},null,-1)),i("div",Os,[i("div",Rs,[D(bs,null,{"aside-top":x(()=>[$(c.$slots,"aside-top",{},void 0,!0)]),"aside-bottom":x(()=>[$(c.$slots,"aside-bottom",{},void 0,!0)]),"aside-outline-before":x(()=>[$(c.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":x(()=>[$(c.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":x(()=>[$(c.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":x(()=>[$(c.$slots,"aside-ads-after",{},void 0,!0)]),_:3})])])],2)):S("",!0),i("div",Fs,[i("div",Ws,[$(c.$slots,"doc-before",{},void 0,!0),i("main",Gs,[D(g,{class:O(["vp-doc",[l.value,p(e).externalLinkIcon&&"external-link-icon-enabled"]])},null,8,["class"])]),D(js,null,{"doc-footer-before":x(()=>[$(c.$slots,"doc-footer-before",{},void 0,!0)]),_:3}),$(c.$slots,"doc-after",{},void 0,!0)])])]),$(c.$slots,"doc-bottom",{},void 0,!0)],2)}}}),Js=B(Us,[["__scopeId","data-v-39a288b8"]]),zs=L({__name:"VPButton",props:{tag:{},size:{default:"medium"},theme:{default:"brand"},text:{},href:{},target:{},rel:{}},setup(a){const e=a,t=C(()=>e.href&&it.test(e.href)),s=C(()=>e.tag||(e.href?"a":"button"));return(n,o)=>(r(),N(ne(s.value),{class:O(["VPButton",[a.size,a.theme]]),href:a.href?p(Ke)(a.href):void 0,target:e.target??(t.value?"_blank":void 0),rel:e.rel??(t.value?"noreferrer":void 0)},{default:x(()=>[he(b(a.text),1)]),_:1},8,["class","href","target","rel"]))}}),qs=B(zs,[["__scopeId","data-v-fa7799d5"]]),Ks=["src","alt"],Ys=L({inheritAttrs:!1,__name:"VPImage",props:{image:{},alt:{}},setup(a){return(e,t)=>{const s=ve("VPImage",!0);return a.image?(r(),d(j,{key:0},[typeof a.image=="string"||"src"in a.image?(r(),d("img",de({key:0,class:"VPImage"},typeof a.image=="string"?e.$attrs:{...a.image,...e.$attrs},{src:p(ze)(typeof a.image=="string"?a.image:a.image.src),alt:a.alt??(typeof a.image=="string"?"":a.image.alt||"")}),null,16,Ks)):(r(),d(j,{key:1},[D(s,de({class:"dark",image:a.image.dark,alt:a.image.alt},e.$attrs),null,16,["image","alt"]),D(s,de({class:"light",image:a.image.light,alt:a.image.alt},e.$attrs),null,16,["image","alt"])],64))],64)):S("",!0)}}}),De=B(Ys,[["__scopeId","data-v-8426fc1a"]]),Xs={class:"container"},Qs={class:"main"},Zs={class:"heading"},en=["innerHTML"],tn=["innerHTML"],sn=["innerHTML"],nn={key:0,class:"actions"},an={key:0,class:"image"},on={class:"image-container"},ln=L({__name:"VPHero",props:{name:{},text:{},tagline:{},image:{},actions:{}},setup(a){const e=$e("hero-image-slot-exists");return(t,s)=>(r(),d("div",{class:O(["VPHero",{"has-image":a.image||p(e)}])},[i("div",Xs,[i("div",Qs,[$(t.$slots,"home-hero-info-before",{},void 0,!0),$(t.$slots,"home-hero-info",{},()=>[i("h1",Zs,[a.name?(r(),d("span",{key:0,innerHTML:a.name,class:"name clip"},null,8,en)):S("",!0),a.text?(r(),d("span",{key:1,innerHTML:a.text,class:"text"},null,8,tn)):S("",!0)]),a.tagline?(r(),d("p",{key:0,innerHTML:a.tagline,class:"tagline"},null,8,sn)):S("",!0)],!0),$(t.$slots,"home-hero-info-after",{},void 0,!0),a.actions?(r(),d("div",nn,[(r(!0),d(j,null,R(a.actions,n=>(r(),d("div",{key:n.link,class:"action"},[D(qs,{tag:"a",size:"medium",theme:n.theme,text:n.text,href:n.link,target:n.target,rel:n.rel},null,8,["theme","text","href","target","rel"])]))),128))])):S("",!0),$(t.$slots,"home-hero-actions-after",{},void 0,!0)]),a.image||p(e)?(r(),d("div",an,[i("div",on,[s[0]||(s[0]=i("div",{class:"image-bg"},null,-1)),$(t.$slots,"home-hero-image",{},()=>[a.image?(r(),N(De,{key:0,class:"image-src",image:a.image},null,8,["image"])):S("",!0)],!0)])])):S("",!0)])],2))}}),rn=B(ln,[["__scopeId","data-v-4f9c455b"]]),cn=L({__name:"VPHomeHero",setup(a){const{frontmatter:e}=F();return(t,s)=>p(e).hero?(r(),N(rn,{key:0,class:"VPHomeHero",name:p(e).hero.name,text:p(e).hero.text,tagline:p(e).hero.tagline,image:p(e).hero.image,actions:p(e).hero.actions},{"home-hero-info-before":x(()=>[$(t.$slots,"home-hero-info-before")]),"home-hero-info":x(()=>[$(t.$slots,"home-hero-info")]),"home-hero-info-after":x(()=>[$(t.$slots,"home-hero-info-after")]),"home-hero-actions-after":x(()=>[$(t.$slots,"home-hero-actions-after")]),"home-hero-image":x(()=>[$(t.$slots,"home-hero-image")]),_:3},8,["name","text","tagline","image","actions"])):S("",!0)}}),un={class:"box"},dn={key:0,class:"icon"},hn=["innerHTML"],fn=["innerHTML"],mn=["innerHTML"],vn={key:4,class:"link-text"},pn={class:"link-text-value"},gn=L({__name:"VPFeature",props:{icon:{},title:{},details:{},link:{},linkText:{},rel:{},target:{}},setup(a){return(e,t)=>(r(),N(ae,{class:"VPFeature",href:a.link,rel:a.rel,target:a.target,"no-icon":!0,tag:a.link?"a":"div"},{default:x(()=>[i("article",un,[typeof a.icon=="object"&&a.icon.wrap?(r(),d("div",dn,[D(De,{image:a.icon,alt:a.icon.alt,height:a.icon.height||48,width:a.icon.width||48},null,8,["image","alt","height","width"])])):typeof a.icon=="object"?(r(),N(De,{key:1,image:a.icon,alt:a.icon.alt,height:a.icon.height||48,width:a.icon.width||48},null,8,["image","alt","height","width"])):a.icon?(r(),d("div",{key:2,class:"icon",innerHTML:a.icon},null,8,hn)):S("",!0),i("h2",{class:"title",innerHTML:a.title},null,8,fn),a.details?(r(),d("p",{key:3,class:"details",innerHTML:a.details},null,8,mn)):S("",!0),a.linkText?(r(),d("div",vn,[i("p",pn,[he(b(a.linkText)+" ",1),t[0]||(t[0]=i("span",{class:"vpi-arrow-right link-text-icon"},null,-1))])])):S("",!0)])]),_:1},8,["href","rel","target","tag"]))}}),bn=B(gn,[["__scopeId","data-v-a3976bdc"]]),yn={key:0,class:"VPFeatures"},$n={class:"container"},kn={class:"items"},_n=L({__name:"VPFeatures",props:{features:{}},setup(a){const e=a,t=C(()=>{const s=e.features.length;if(s){if(s===2)return"grid-2";if(s===3)return"grid-3";if(s%3===0)return"grid-6";if(s>3)return"grid-4"}else return});return(s,n)=>a.features?(r(),d("div",yn,[i("div",$n,[i("div",kn,[(r(!0),d(j,null,R(a.features,o=>(r(),d("div",{key:o.title,class:O(["item",[t.value]])},[D(bn,{icon:o.icon,title:o.title,details:o.details,link:o.link,"link-text":o.linkText,rel:o.rel,target:o.target},null,8,["icon","title","details","link","link-text","rel","target"])],2))),128))])])])):S("",!0)}}),Sn=B(_n,[["__scopeId","data-v-a6181336"]]),wn=L({__name:"VPHomeFeatures",setup(a){const{frontmatter:e}=F();return(t,s)=>p(e).features?(r(),N(Sn,{key:0,class:"VPHomeFeatures",features:p(e).features},null,8,["features"])):S("",!0)}}),xn=L({__name:"VPHomeContent",setup(a){const{width:e}=Tt({initialWidth:0,includeScrollbar:!1});return(t,s)=>(r(),d("div",{class:"vp-doc container",style:X(p(e)?{"--vp-offset":`calc(50% - ${p(e)/2}px)`}:{})},[$(t.$slots,"default",{},void 0,!0)],4))}}),Mn=B(xn,[["__scopeId","data-v-8e2d4988"]]),Tn=L({__name:"VPHome",setup(a){const{frontmatter:e,theme:t}=F();return(s,n)=>{const o=ve("Content");return r(),d("div",{class:O(["VPHome",{"external-link-icon-enabled":p(t).externalLinkIcon}])},[$(s.$slots,"home-hero-before",{},void 0,!0),D(cn,null,{"home-hero-info-before":x(()=>[$(s.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":x(()=>[$(s.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":x(()=>[$(s.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":x(()=>[$(s.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":x(()=>[$(s.$slots,"home-hero-image",{},void 0,!0)]),_:3}),$(s.$slots,"home-hero-after",{},void 0,!0),$(s.$slots,"home-features-before",{},void 0,!0),D(wn),$(s.$slots,"home-features-after",{},void 0,!0),p(e).markdownStyles!==!1?(r(),N(Mn,{key:0},{default:x(()=>[D(o)]),_:1})):(r(),N(o,{key:1}))],2)}}}),Cn=B(Tn,[["__scopeId","data-v-8b561e3d"]]),Pn={},Ln={class:"VPPage"};function In(a,e){const t=ve("Content");return r(),d("div",Ln,[$(a.$slots,"page-top"),D(t),$(a.$slots,"page-bottom")])}const Dn=B(Pn,[["render",In]]),Bn=L({__name:"VPContent",setup(a){const{page:e,frontmatter:t}=F(),{hasSidebar:s}=re();return(n,o)=>(r(),d("div",{class:O(["VPContent",{"has-sidebar":p(s),"is-home":p(t).layout==="home"}]),id:"VPContent"},[p(e).isNotFound?$(n.$slots,"not-found",{key:0},()=>[D(Yt)],!0):p(t).layout==="page"?(r(),N(Dn,{key:1},{"page-top":x(()=>[$(n.$slots,"page-top",{},void 0,!0)]),"page-bottom":x(()=>[$(n.$slots,"page-bottom",{},void 0,!0)]),_:3})):p(t).layout==="home"?(r(),N(Cn,{key:2},{"home-hero-before":x(()=>[$(n.$slots,"home-hero-before",{},void 0,!0)]),"home-hero-info-before":x(()=>[$(n.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":x(()=>[$(n.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":x(()=>[$(n.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":x(()=>[$(n.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":x(()=>[$(n.$slots,"home-hero-image",{},void 0,!0)]),"home-hero-after":x(()=>[$(n.$slots,"home-hero-after",{},void 0,!0)]),"home-features-before":x(()=>[$(n.$slots,"home-features-before",{},void 0,!0)]),"home-features-after":x(()=>[$(n.$slots,"home-features-after",{},void 0,!0)]),_:3})):p(t).layout&&p(t).layout!=="doc"?(r(),N(ne(p(t).layout),{key:3})):(r(),N(Js,{key:4},{"doc-top":x(()=>[$(n.$slots,"doc-top",{},void 0,!0)]),"doc-bottom":x(()=>[$(n.$slots,"doc-bottom",{},void 0,!0)]),"doc-footer-before":x(()=>[$(n.$slots,"doc-footer-before",{},void 0,!0)]),"doc-before":x(()=>[$(n.$slots,"doc-before",{},void 0,!0)]),"doc-after":x(()=>[$(n.$slots,"doc-after",{},void 0,!0)]),"aside-top":x(()=>[$(n.$slots,"aside-top",{},void 0,!0)]),"aside-outline-before":x(()=>[$(n.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":x(()=>[$(n.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":x(()=>[$(n.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":x(()=>[$(n.$slots,"aside-ads-after",{},void 0,!0)]),"aside-bottom":x(()=>[$(n.$slots,"aside-bottom",{},void 0,!0)]),_:3}))],2))}}),Vn=B(Bn,[["__scopeId","data-v-1428d186"]]),An={class:"container"},Nn=["innerHTML"],En=["innerHTML"],jn=L({__name:"VPFooter",setup(a){const{theme:e,frontmatter:t}=F(),{hasSidebar:s}=re();return(n,o)=>p(e).footer&&p(t).footer!==!1?(r(),d("footer",{key:0,class:O(["VPFooter",{"has-sidebar":p(s)}])},[i("div",An,[p(e).footer.message?(r(),d("p",{key:0,class:"message",innerHTML:p(e).footer.message},null,8,Nn)):S("",!0),p(e).footer.copyright?(r(),d("p",{key:1,class:"copyright",innerHTML:p(e).footer.copyright},null,8,En)):S("",!0)])],2)):S("",!0)}}),Hn=B(jn,[["__scopeId","data-v-e315a0ad"]]);function On(){const{theme:a,frontmatter:e}=F(),t=at([]),s=C(()=>t.value.length>0);return Ve(()=>{t.value=Ye(e.value.outline??a.value.outline)}),{headers:t,hasLocalNav:s}}const Rn={class:"menu-text"},Fn={class:"header"},Wn={class:"outline"},Gn=L({__name:"VPLocalNavOutlineDropdown",props:{headers:{},navHeight:{}},setup(a){const e=a,{theme:t}=F(),s=A(!1),n=A(0),o=A(),l=A();function c(v){var h;(h=o.value)!=null&&h.contains(v.target)||(s.value=!1)}ee(s,v=>{if(v){document.addEventListener("click",c);return}document.removeEventListener("click",c)}),Ct("Escape",()=>{s.value=!1}),Ve(()=>{s.value=!1});function u(){s.value=!s.value,n.value=window.innerHeight+Math.min(window.scrollY-e.navHeight,0)}function g(v){v.target.classList.contains("outline-link")&&(l.value&&(l.value.style.transition="none"),Le(()=>{s.value=!1}))}function m(){s.value=!1,window.scrollTo({top:0,left:0,behavior:"smooth"})}return(v,h)=>(r(),d("div",{class:"VPLocalNavOutlineDropdown",style:X({"--vp-vh":n.value+"px"}),ref_key:"main",ref:o},[a.headers.length>0?(r(),d("button",{key:0,onClick:u,class:O({open:s.value})},[i("span",Rn,b(p(ut)(p(t))),1),h[0]||(h[0]=i("span",{class:"vpi-chevron-right icon"},null,-1))],2)):(r(),d("button",{key:1,onClick:m},b(p(t).returnToTopLabel||"Return to top"),1)),D(Je,{name:"flyout"},{default:x(()=>[s.value?(r(),d("div",{key:0,ref_key:"items",ref:l,class:"items",onClick:g},[i("div",Fn,[i("a",{class:"top-link",href:"#",onClick:m},b(p(t).returnToTopLabel||"Return to top"),1)]),i("div",Wn,[D(dt,{headers:a.headers},null,8,["headers"])])],512)):S("",!0)]),_:1})],4))}}),Un=B(Gn,[["__scopeId","data-v-8a42e2b4"]]),Jn={class:"container"},zn=["aria-expanded"],qn={class:"menu-text"},Kn=L({__name:"VPLocalNav",props:{open:{type:Boolean}},emits:["open-menu"],setup(a){const{theme:e,frontmatter:t}=F(),{hasSidebar:s}=re(),{headers:n}=On(),{y:o}=ot(),l=A(0);ie(()=>{l.value=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--vp-nav-height"))}),Ve(()=>{n.value=Ye(t.value.outline??e.value.outline)});const c=C(()=>n.value.length===0),u=C(()=>c.value&&!s.value),g=C(()=>({VPLocalNav:!0,"has-sidebar":s.value,empty:c.value,fixed:u.value}));return(m,v)=>p(t).layout!=="home"&&(!u.value||p(o)>=l.value)?(r(),d("div",{key:0,class:O(g.value)},[i("div",Jn,[p(s)?(r(),d("button",{key:0,class:"menu","aria-expanded":a.open,"aria-controls":"VPSidebarNav",onClick:v[0]||(v[0]=h=>m.$emit("open-menu"))},[v[1]||(v[1]=i("span",{class:"vpi-align-left menu-icon"},null,-1)),i("span",qn,b(p(e).sidebarMenuLabel||"Menu"),1)],8,zn)):S("",!0),D(Un,{headers:p(n),navHeight:l.value},null,8,["headers","navHeight"])])],2)):S("",!0)}}),Yn=B(Kn,[["__scopeId","data-v-a6f0e41e"]]);function Xn(){const a=A(!1);function e(){a.value=!0,window.addEventListener("resize",n)}function t(){a.value=!1,window.removeEventListener("resize",n)}function s(){a.value?t():e()}function n(){window.outerWidth>=768&&t()}const o=Ae();return ee(()=>o.path,t),{isScreenOpen:a,openScreen:e,closeScreen:t,toggleScreen:s}}const Qn={},Zn={class:"VPSwitch",type:"button",role:"switch"},ea={class:"check"},ta={key:0,class:"icon"};function sa(a,e){return r(),d("button",Zn,[i("span",ea,[a.$slots.default?(r(),d("span",ta,[$(a.$slots,"default",{},void 0,!0)])):S("",!0)])])}const na=B(Qn,[["render",sa],["__scopeId","data-v-1d5665e3"]]),aa=L({__name:"VPSwitchAppearance",setup(a){const{isDark:e,theme:t}=F(),s=$e("toggle-appearance",()=>{e.value=!e.value}),n=A("");return qe(()=>{n.value=e.value?t.value.lightModeSwitchTitle||"Switch to light theme":t.value.darkModeSwitchTitle||"Switch to dark theme"}),(o,l)=>(r(),N(na,{title:n.value,class:"VPSwitchAppearance","aria-checked":p(e),onClick:p(s)},{default:x(()=>[...l[0]||(l[0]=[i("span",{class:"vpi-sun sun"},null,-1),i("span",{class:"vpi-moon moon"},null,-1)])]),_:1},8,["title","aria-checked","onClick"]))}}),Xe=B(aa,[["__scopeId","data-v-5337faa4"]]),ia={key:0,class:"VPNavBarAppearance"},oa=L({__name:"VPNavBarAppearance",setup(a){const{site:e}=F();return(t,s)=>p(e).appearance&&p(e).appearance!=="force-dark"&&p(e).appearance!=="force-auto"?(r(),d("div",ia,[D(Xe)])):S("",!0)}}),la=B(oa,[["__scopeId","data-v-6c893767"]]),Qe=A();let ht=!1,Oe=0;function ra(a){const e=A(!1);if(Ne){!ht&&ca(),Oe++;const t=ee(Qe,s=>{var n,o,l;s===a.el.value||(n=a.el.value)!=null&&n.contains(s)?(e.value=!0,(o=a.onFocus)==null||o.call(a)):(e.value=!1,(l=a.onBlur)==null||l.call(a))});xe(()=>{t(),Oe--,Oe||ua()})}return Pt(e)}function ca(){document.addEventListener("focusin",ft),ht=!0,Qe.value=document.activeElement}function ua(){document.removeEventListener("focusin",ft)}function ft(){Qe.value=document.activeElement}const da={class:"VPMenuLink"},ha=["innerHTML"],fa=L({__name:"VPMenuLink",props:{item:{}},setup(a){const{page:e}=F();return(t,s)=>(r(),d("div",da,[D(ae,{class:O({active:p(me)(p(e).relativePath,a.item.activeMatch||a.item.link,!!a.item.activeMatch)}),href:a.item.link,target:a.item.target,rel:a.item.rel,"no-icon":a.item.noIcon},{default:x(()=>[i("span",{innerHTML:a.item.text},null,8,ha)]),_:1},8,["class","href","target","rel","no-icon"])]))}}),Ee=B(fa,[["__scopeId","data-v-35975db6"]]),ma={class:"VPMenuGroup"},va={key:0,class:"title"},pa=L({__name:"VPMenuGroup",props:{text:{},items:{}},setup(a){return(e,t)=>(r(),d("div",ma,[a.text?(r(),d("p",va,b(a.text),1)):S("",!0),(r(!0),d(j,null,R(a.items,s=>(r(),d(j,null,["link"in s?(r(),N(Ee,{key:0,item:s},null,8,["item"])):S("",!0)],64))),256))]))}}),ga=B(pa,[["__scopeId","data-v-69e747b5"]]),ba={class:"VPMenu"},ya={key:0,class:"items"},$a=L({__name:"VPMenu",props:{items:{}},setup(a){return(e,t)=>(r(),d("div",ba,[a.items?(r(),d("div",ya,[(r(!0),d(j,null,R(a.items,s=>(r(),d(j,{key:JSON.stringify(s)},["link"in s?(r(),N(Ee,{key:0,item:s},null,8,["item"])):"component"in s?(r(),N(ne(s.component),de({key:1,ref_for:!0},s.props),null,16)):(r(),N(ga,{key:2,text:s.text,items:s.items},null,8,["text","items"]))],64))),128))])):S("",!0),$(e.$slots,"default",{},void 0,!0)]))}}),ka=B($a,[["__scopeId","data-v-b98bc113"]]),_a=["aria-expanded","aria-label"],Sa={key:0,class:"text"},wa=["innerHTML"],xa={key:1,class:"vpi-more-horizontal icon"},Ma={class:"menu"},Ta=L({__name:"VPFlyout",props:{icon:{},button:{},label:{},items:{}},setup(a){const e=A(!1),t=A();ra({el:t,onBlur:s});function s(){e.value=!1}return(n,o)=>(r(),d("div",{class:"VPFlyout",ref_key:"el",ref:t,onMouseenter:o[1]||(o[1]=l=>e.value=!0),onMouseleave:o[2]||(o[2]=l=>e.value=!1)},[i("button",{type:"button",class:"button","aria-haspopup":"true","aria-expanded":e.value,"aria-label":a.label,onClick:o[0]||(o[0]=l=>e.value=!e.value)},[a.button||a.icon?(r(),d("span",Sa,[a.icon?(r(),d("span",{key:0,class:O([a.icon,"option-icon"])},null,2)):S("",!0),a.button?(r(),d("span",{key:1,innerHTML:a.button},null,8,wa)):S("",!0),o[3]||(o[3]=i("span",{class:"vpi-chevron-down text-icon"},null,-1))])):(r(),d("span",xa))],8,_a),i("div",Ma,[D(ka,{items:a.items},{default:x(()=>[$(n.$slots,"default",{},void 0,!0)]),_:3},8,["items"])])],544))}}),Ze=B(Ta,[["__scopeId","data-v-cf11d7a2"]]),Ca=["href","aria-label","innerHTML"],Pa=L({__name:"VPSocialLink",props:{icon:{},link:{},ariaLabel:{}},setup(a){const e=a,t=A();ie(async()=>{var o;await Le();const n=(o=t.value)==null?void 0:o.children[0];n instanceof HTMLElement&&n.className.startsWith("vpi-social-")&&(getComputedStyle(n).maskImage||getComputedStyle(n).webkitMaskImage)==="none"&&n.style.setProperty("--icon",`url('https://api.iconify.design/simple-icons/${e.icon}.svg')`)});const s=C(()=>typeof e.icon=="object"?e.icon.svg:`<span class="vpi-social-${e.icon}"></span>`);return(n,o)=>(r(),d("a",{ref_key:"el",ref:t,class:"VPSocialLink no-icon",href:a.link,"aria-label":a.ariaLabel??(typeof a.icon=="string"?a.icon:""),target:"_blank",rel:"noopener",innerHTML:s.value},null,8,Ca))}}),La=B(Pa,[["__scopeId","data-v-bd121fe5"]]),Ia={class:"VPSocialLinks"},Da=L({__name:"VPSocialLinks",props:{links:{}},setup(a){return(e,t)=>(r(),d("div",Ia,[(r(!0),d(j,null,R(a.links,({link:s,icon:n,ariaLabel:o})=>(r(),N(La,{key:s,icon:n,link:s,ariaLabel:o},null,8,["icon","link","ariaLabel"]))),128))]))}}),et=B(Da,[["__scopeId","data-v-7bc22406"]]),Ba={key:0,class:"group translations"},Va={class:"trans-title"},Aa={key:1,class:"group"},Na={class:"item appearance"},Ea={class:"label"},ja={class:"appearance-action"},Ha={key:2,class:"group"},Oa={class:"item social-links"},Ra=L({__name:"VPNavBarExtra",setup(a){const{site:e,theme:t}=F(),{localeLinks:s,currentLang:n}=Me({correspondingLink:!0}),o=C(()=>s.value.length&&n.value.label||e.value.appearance||t.value.socialLinks);return(l,c)=>o.value?(r(),N(Ze,{key:0,class:"VPNavBarExtra",label:"extra navigation"},{default:x(()=>[p(s).length&&p(n).label?(r(),d("div",Ba,[i("p",Va,b(p(n).label),1),(r(!0),d(j,null,R(p(s),u=>(r(),N(Ee,{key:u.link,item:u},null,8,["item"]))),128))])):S("",!0),p(e).appearance&&p(e).appearance!=="force-dark"&&p(e).appearance!=="force-auto"?(r(),d("div",Aa,[i("div",Na,[i("p",Ea,b(p(t).darkModeSwitchLabel||"Appearance"),1),i("div",ja,[D(Xe)])])])):S("",!0),p(t).socialLinks?(r(),d("div",Ha,[i("div",Oa,[D(et,{class:"social-links-list",links:p(t).socialLinks},null,8,["links"])])])):S("",!0)]),_:1})):S("",!0)}}),Fa=B(Ra,[["__scopeId","data-v-bb2aa2f0"]]),Wa=["aria-expanded"],Ga=L({__name:"VPNavBarHamburger",props:{active:{type:Boolean}},emits:["click"],setup(a){return(e,t)=>(r(),d("button",{type:"button",class:O(["VPNavBarHamburger",{active:a.active}]),"aria-label":"mobile navigation","aria-expanded":a.active,"aria-controls":"VPNavScreen",onClick:t[0]||(t[0]=s=>e.$emit("click"))},[...t[1]||(t[1]=[i("span",{class:"container"},[i("span",{class:"top"}),i("span",{class:"middle"}),i("span",{class:"bottom"})],-1)])],10,Wa))}}),Ua=B(Ga,[["__scopeId","data-v-e5dd9c1c"]]),Ja=["innerHTML"],za=L({__name:"VPNavBarMenuLink",props:{item:{}},setup(a){const{page:e}=F();return(t,s)=>(r(),N(ae,{class:O({VPNavBarMenuLink:!0,active:p(me)(p(e).relativePath,a.item.activeMatch||a.item.link,!!a.item.activeMatch)}),href:a.item.link,target:a.item.target,rel:a.item.rel,"no-icon":a.item.noIcon,tabindex:"0"},{default:x(()=>[i("span",{innerHTML:a.item.text},null,8,Ja)]),_:1},8,["class","href","target","rel","no-icon"]))}}),qa=B(za,[["__scopeId","data-v-e56f3d57"]]),Ka=L({__name:"VPNavBarMenuGroup",props:{item:{}},setup(a){const e=a,{page:t}=F(),s=o=>"component"in o?!1:"link"in o?me(t.value.relativePath,o.link,!!e.item.activeMatch):o.items.some(s),n=C(()=>s(e.item));return(o,l)=>(r(),N(Ze,{class:O({VPNavBarMenuGroup:!0,active:p(me)(p(t).relativePath,a.item.activeMatch,!!a.item.activeMatch)||n.value}),button:a.item.text,items:a.item.items},null,8,["class","button","items"]))}}),Ya={key:0,"aria-labelledby":"main-nav-aria-label",class:"VPNavBarMenu"},Xa=L({__name:"VPNavBarMenu",setup(a){const{theme:e}=F();return(t,s)=>p(e).nav?(r(),d("nav",Ya,[s[0]||(s[0]=i("span",{id:"main-nav-aria-label",class:"visually-hidden"}," Main Navigation ",-1)),(r(!0),d(j,null,R(p(e).nav,n=>(r(),d(j,{key:JSON.stringify(n)},["link"in n?(r(),N(qa,{key:0,item:n},null,8,["item"])):"component"in n?(r(),N(ne(n.component),de({key:1,ref_for:!0},n.props),null,16)):(r(),N(Ka,{key:2,item:n},null,8,["item"]))],64))),128))])):S("",!0)}}),Qa=B(Xa,[["__scopeId","data-v-dc692963"]]);function Za(a){const{localeIndex:e,theme:t}=F();function s(n){var T,M,k;const o=n.split("."),l=(T=t.value.search)==null?void 0:T.options,c=l&&typeof l=="object",u=c&&((k=(M=l.locales)==null?void 0:M[e.value])==null?void 0:k.translations)||null,g=c&&l.translations||null;let m=u,v=g,h=a;const f=o.pop();for(const y of o){let _=null;const V=h==null?void 0:h[y];V&&(_=h=V);const H=v==null?void 0:v[y];H&&(_=v=H);const q=m==null?void 0:m[y];q&&(_=m=q),V||(h=_),H||(v=_),q||(m=_)}return(m==null?void 0:m[f])??(v==null?void 0:v[f])??(h==null?void 0:h[f])??""}return s}const ei=["aria-label"],ti={class:"DocSearch-Button-Container"},si={class:"DocSearch-Button-Placeholder"},nt=L({__name:"VPNavBarSearchButton",setup(a){const t=Za({button:{buttonText:"Search",buttonAriaLabel:"Search"}});return(s,n)=>(r(),d("button",{type:"button",class:"DocSearch DocSearch-Button","aria-label":p(t)("button.buttonAriaLabel")},[i("span",ti,[n[0]||(n[0]=i("span",{class:"vp-icon DocSearch-Search-Icon"},null,-1)),i("span",si,b(p(t)("button.buttonText")),1)]),n[1]||(n[1]=i("span",{class:"DocSearch-Button-Keys"},[i("kbd",{class:"DocSearch-Button-Key"}),i("kbd",{class:"DocSearch-Button-Key"},"K")],-1))],8,ei))}}),ni={class:"VPNavBarSearch"},ai={id:"local-search"},ii={key:1,id:"docsearch"},oi=L({__name:"VPNavBarSearch",setup(a){const e=()=>null,t=()=>null,{theme:s}=F(),n=A(!1),o=A(!1);ie(()=>{});function l(){n.value||(n.value=!0,setTimeout(c,16))}function c(){const m=new Event("keydown");m.key="k",m.metaKey=!0,window.dispatchEvent(m),setTimeout(()=>{document.querySelector(".DocSearch-Modal")||c()},16)}const u=A(!1),g="";return(m,v)=>{var h;return r(),d("div",ni,[p(g)==="local"?(r(),d(j,{key:0},[u.value?(r(),N(p(e),{key:0,onClose:v[0]||(v[0]=f=>u.value=!1)})):S("",!0),i("div",ai,[D(nt,{onClick:v[1]||(v[1]=f=>u.value=!0)})])],64)):p(g)==="algolia"?(r(),d(j,{key:1},[n.value?(r(),N(p(t),{key:0,algolia:((h=p(s).search)==null?void 0:h.options)??p(s).algolia,onVnodeBeforeMount:v[2]||(v[2]=f=>o.value=!0)},null,8,["algolia"])):S("",!0),o.value?S("",!0):(r(),d("div",ii,[D(nt,{onClick:l})]))],64)):S("",!0)])}}}),li=L({__name:"VPNavBarSocialLinks",setup(a){const{theme:e}=F();return(t,s)=>p(e).socialLinks?(r(),N(et,{key:0,class:"VPNavBarSocialLinks",links:p(e).socialLinks},null,8,["links"])):S("",!0)}}),ri=B(li,[["__scopeId","data-v-0394ad82"]]),ci=["href","rel","target"],ui=["innerHTML"],di={key:2},hi=L({__name:"VPNavBarTitle",setup(a){const{site:e,theme:t}=F(),{hasSidebar:s}=re(),{currentLang:n}=Me(),o=C(()=>{var u;return typeof t.value.logoLink=="string"?t.value.logoLink:(u=t.value.logoLink)==null?void 0:u.link}),l=C(()=>{var u;return typeof t.value.logoLink=="string"||(u=t.value.logoLink)==null?void 0:u.rel}),c=C(()=>{var u;return typeof t.value.logoLink=="string"||(u=t.value.logoLink)==null?void 0:u.target});return(u,g)=>(r(),d("div",{class:O(["VPNavBarTitle",{"has-sidebar":p(s)}])},[i("a",{class:"title",href:o.value??p(Ke)(p(n).link),rel:l.value,target:c.value},[$(u.$slots,"nav-bar-title-before",{},void 0,!0),p(t).logo?(r(),N(De,{key:0,class:"logo",image:p(t).logo},null,8,["image"])):S("",!0),p(t).siteTitle?(r(),d("span",{key:1,innerHTML:p(t).siteTitle},null,8,ui)):p(t).siteTitle===void 0?(r(),d("span",di,b(p(e).title),1)):S("",!0),$(u.$slots,"nav-bar-title-after",{},void 0,!0)],8,ci)],2))}}),fi=B(hi,[["__scopeId","data-v-1168a8e4"]]),mi={class:"items"},vi={class:"title"},pi=L({__name:"VPNavBarTranslations",setup(a){const{theme:e}=F(),{localeLinks:t,currentLang:s}=Me({correspondingLink:!0});return(n,o)=>p(t).length&&p(s).label?(r(),N(Ze,{key:0,class:"VPNavBarTranslations",icon:"vpi-languages",label:p(e).langMenuLabel||"Change language"},{default:x(()=>[i("div",mi,[i("p",vi,b(p(s).label),1),(r(!0),d(j,null,R(p(t),l=>(r(),N(Ee,{key:l.link,item:l},null,8,["item"]))),128))])]),_:1},8,["label"])):S("",!0)}}),gi=B(pi,[["__scopeId","data-v-88af2de4"]]),bi={class:"wrapper"},yi={class:"container"},$i={class:"title"},ki={class:"content"},_i={class:"content-body"},Si=L({__name:"VPNavBar",props:{isScreenOpen:{type:Boolean}},emits:["toggle-screen"],setup(a){const e=a,{y:t}=ot(),{hasSidebar:s}=re(),{frontmatter:n}=F(),o=A({});return qe(()=>{o.value={"has-sidebar":s.value,home:n.value.layout==="home",top:t.value===0,"screen-open":e.isScreenOpen}}),(l,c)=>(r(),d("div",{class:O(["VPNavBar",o.value])},[i("div",bi,[i("div",yi,[i("div",$i,[D(fi,null,{"nav-bar-title-before":x(()=>[$(l.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":x(()=>[$(l.$slots,"nav-bar-title-after",{},void 0,!0)]),_:3})]),i("div",ki,[i("div",_i,[$(l.$slots,"nav-bar-content-before",{},void 0,!0),D(oi,{class:"search"}),D(Qa,{class:"menu"}),D(gi,{class:"translations"}),D(la,{class:"appearance"}),D(ri,{class:"social-links"}),D(Fa,{class:"extra"}),$(l.$slots,"nav-bar-content-after",{},void 0,!0),D(Ua,{class:"hamburger",active:a.isScreenOpen,onClick:c[0]||(c[0]=u=>l.$emit("toggle-screen"))},null,8,["active"])])])])]),c[1]||(c[1]=i("div",{class:"divider"},[i("div",{class:"divider-line"})],-1))],2))}}),wi=B(Si,[["__scopeId","data-v-6aa21345"]]),xi={key:0,class:"VPNavScreenAppearance"},Mi={class:"text"},Ti=L({__name:"VPNavScreenAppearance",setup(a){const{site:e,theme:t}=F();return(s,n)=>p(e).appearance&&p(e).appearance!=="force-dark"&&p(e).appearance!=="force-auto"?(r(),d("div",xi,[i("p",Mi,b(p(t).darkModeSwitchLabel||"Appearance"),1),D(Xe)])):S("",!0)}}),Ci=B(Ti,[["__scopeId","data-v-b44890b2"]]),Pi=["innerHTML"],Li=L({__name:"VPNavScreenMenuLink",props:{item:{}},setup(a){const e=$e("close-screen");return(t,s)=>(r(),N(ae,{class:"VPNavScreenMenuLink",href:a.item.link,target:a.item.target,rel:a.item.rel,"no-icon":a.item.noIcon,onClick:p(e)},{default:x(()=>[i("span",{innerHTML:a.item.text},null,8,Pi)]),_:1},8,["href","target","rel","no-icon","onClick"]))}}),Ii=B(Li,[["__scopeId","data-v-df37e6dd"]]),Di=["innerHTML"],Bi=L({__name:"VPNavScreenMenuGroupLink",props:{item:{}},setup(a){const e=$e("close-screen");return(t,s)=>(r(),N(ae,{class:"VPNavScreenMenuGroupLink",href:a.item.link,target:a.item.target,rel:a.item.rel,"no-icon":a.item.noIcon,onClick:p(e)},{default:x(()=>[i("span",{innerHTML:a.item.text},null,8,Di)]),_:1},8,["href","target","rel","no-icon","onClick"]))}}),mt=B(Bi,[["__scopeId","data-v-3e9c20e4"]]),Vi={class:"VPNavScreenMenuGroupSection"},Ai={key:0,class:"title"},Ni=L({__name:"VPNavScreenMenuGroupSection",props:{text:{},items:{}},setup(a){return(e,t)=>(r(),d("div",Vi,[a.text?(r(),d("p",Ai,b(a.text),1)):S("",!0),(r(!0),d(j,null,R(a.items,s=>(r(),N(mt,{key:s.text,item:s},null,8,["item"]))),128))]))}}),Ei=B(Ni,[["__scopeId","data-v-8133b170"]]),ji=["aria-controls","aria-expanded"],Hi=["innerHTML"],Oi=["id"],Ri={key:0,class:"item"},Fi={key:1,class:"item"},Wi={key:2,class:"group"},Gi=L({__name:"VPNavScreenMenuGroup",props:{text:{},items:{}},setup(a){const e=a,t=A(!1),s=C(()=>`NavScreenGroup-${e.text.replace(" ","-").toLowerCase()}`);function n(){t.value=!t.value}return(o,l)=>(r(),d("div",{class:O(["VPNavScreenMenuGroup",{open:t.value}])},[i("button",{class:"button","aria-controls":s.value,"aria-expanded":t.value,onClick:n},[i("span",{class:"button-text",innerHTML:a.text},null,8,Hi),l[0]||(l[0]=i("span",{class:"vpi-plus button-icon"},null,-1))],8,ji),i("div",{id:s.value,class:"items"},[(r(!0),d(j,null,R(a.items,c=>(r(),d(j,{key:JSON.stringify(c)},["link"in c?(r(),d("div",Ri,[D(mt,{item:c},null,8,["item"])])):"component"in c?(r(),d("div",Fi,[(r(),N(ne(c.component),de({ref_for:!0},c.props,{"screen-menu":""}),null,16))])):(r(),d("div",Wi,[D(Ei,{text:c.text,items:c.items},null,8,["text","items"])]))],64))),128))],8,Oi)],2))}}),Ui=B(Gi,[["__scopeId","data-v-b9ab8c58"]]),Ji={key:0,class:"VPNavScreenMenu"},zi=L({__name:"VPNavScreenMenu",setup(a){const{theme:e}=F();return(t,s)=>p(e).nav?(r(),d("nav",Ji,[(r(!0),d(j,null,R(p(e).nav,n=>(r(),d(j,{key:JSON.stringify(n)},["link"in n?(r(),N(Ii,{key:0,item:n},null,8,["item"])):"component"in n?(r(),N(ne(n.component),de({key:1,ref_for:!0},n.props,{"screen-menu":""}),null,16)):(r(),N(Ui,{key:2,text:n.text||"",items:n.items},null,8,["text","items"]))],64))),128))])):S("",!0)}}),qi=L({__name:"VPNavScreenSocialLinks",setup(a){const{theme:e}=F();return(t,s)=>p(e).socialLinks?(r(),N(et,{key:0,class:"VPNavScreenSocialLinks",links:p(e).socialLinks},null,8,["links"])):S("",!0)}}),Ki={class:"list"},Yi=L({__name:"VPNavScreenTranslations",setup(a){const{localeLinks:e,currentLang:t}=Me({correspondingLink:!0}),s=A(!1);function n(){s.value=!s.value}return(o,l)=>p(e).length&&p(t).label?(r(),d("div",{key:0,class:O(["VPNavScreenTranslations",{open:s.value}])},[i("button",{class:"title",onClick:n},[l[0]||(l[0]=i("span",{class:"vpi-languages icon lang"},null,-1)),he(" "+b(p(t).label)+" ",1),l[1]||(l[1]=i("span",{class:"vpi-chevron-down icon chevron"},null,-1))]),i("ul",Ki,[(r(!0),d(j,null,R(p(e),c=>(r(),d("li",{key:c.link,class:"item"},[D(ae,{class:"link",href:c.link},{default:x(()=>[he(b(c.text),1)]),_:2},1032,["href"])]))),128))])],2)):S("",!0)}}),Xi=B(Yi,[["__scopeId","data-v-858fe1a4"]]),Qi={class:"container"},Zi=L({__name:"VPNavScreen",props:{open:{type:Boolean}},setup(a){const e=A(null),t=lt(Ne?document.body:null);return(s,n)=>(r(),N(Je,{name:"fade",onEnter:n[0]||(n[0]=o=>t.value=!0),onAfterLeave:n[1]||(n[1]=o=>t.value=!1)},{default:x(()=>[a.open?(r(),d("div",{key:0,class:"VPNavScreen",ref_key:"screen",ref:e,id:"VPNavScreen"},[i("div",Qi,[$(s.$slots,"nav-screen-content-before",{},void 0,!0),D(zi,{class:"menu"}),D(Xi,{class:"translations"}),D(Ci,{class:"appearance"}),D(qi,{class:"social-links"}),$(s.$slots,"nav-screen-content-after",{},void 0,!0)])],512)):S("",!0)]),_:3}))}}),eo=B(Zi,[["__scopeId","data-v-f2779853"]]),to={key:0,class:"VPNav"},so=L({__name:"VPNav",setup(a){const{isScreenOpen:e,closeScreen:t,toggleScreen:s}=Xn(),{frontmatter:n}=F(),o=C(()=>n.value.navbar!==!1);return Ie("close-screen",t),Be(()=>{Ne&&document.documentElement.classList.toggle("hide-nav",!o.value)}),(l,c)=>o.value?(r(),d("header",to,[D(wi,{"is-screen-open":p(e),onToggleScreen:p(s)},{"nav-bar-title-before":x(()=>[$(l.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":x(()=>[$(l.$slots,"nav-bar-title-after",{},void 0,!0)]),"nav-bar-content-before":x(()=>[$(l.$slots,"nav-bar-content-before",{},void 0,!0)]),"nav-bar-content-after":x(()=>[$(l.$slots,"nav-bar-content-after",{},void 0,!0)]),_:3},8,["is-screen-open","onToggleScreen"]),D(eo,{open:p(e)},{"nav-screen-content-before":x(()=>[$(l.$slots,"nav-screen-content-before",{},void 0,!0)]),"nav-screen-content-after":x(()=>[$(l.$slots,"nav-screen-content-after",{},void 0,!0)]),_:3},8,["open"])])):S("",!0)}}),no=B(so,[["__scopeId","data-v-ae24b3ad"]]),ao=["role","tabindex"],io={key:1,class:"items"},oo=L({__name:"VPSidebarItem",props:{item:{},depth:{}},setup(a){const e=a,{collapsed:t,collapsible:s,isLink:n,isActiveLink:o,hasActiveLink:l,hasChildren:c,toggle:u}=es(C(()=>e.item)),g=C(()=>c.value?"section":"div"),m=C(()=>n.value?"a":"div"),v=C(()=>c.value?e.depth+2===7?"p":`h${e.depth+2}`:"p"),h=C(()=>n.value?void 0:"button"),f=C(()=>[[`level-${e.depth}`],{collapsible:s.value},{collapsed:t.value},{"is-link":n.value},{"is-active":o.value},{"has-active":l.value}]);function T(k){"key"in k&&k.key!=="Enter"||!e.item.link&&u()}function M(){e.item.link&&u()}return(k,y)=>{const _=ve("VPSidebarItem",!0);return r(),N(ne(g.value),{class:O(["VPSidebarItem",f.value])},{default:x(()=>[a.item.text?(r(),d("div",de({key:0,class:"item",role:h.value},Lt(a.item.items?{click:T,keydown:T}:{},!0),{tabindex:a.item.items&&0}),[y[1]||(y[1]=i("div",{class:"indicator"},null,-1)),a.item.link?(r(),N(ae,{key:0,tag:m.value,class:"link",href:a.item.link,rel:a.item.rel,target:a.item.target},{default:x(()=>[(r(),N(ne(v.value),{class:"text",innerHTML:a.item.text},null,8,["innerHTML"]))]),_:1},8,["tag","href","rel","target"])):(r(),N(ne(v.value),{key:1,class:"text",innerHTML:a.item.text},null,8,["innerHTML"])),a.item.collapsed!=null&&a.item.items&&a.item.items.length?(r(),d("div",{key:2,class:"caret",role:"button","aria-label":"toggle section",onClick:M,onKeydown:It(M,["enter"]),tabindex:"0"},[...y[0]||(y[0]=[i("span",{class:"vpi-chevron-right caret-icon"},null,-1)])],32)):S("",!0)],16,ao)):S("",!0),a.item.items&&a.item.items.length?(r(),d("div",io,[a.depth<5?(r(!0),d(j,{key:0},R(a.item.items,V=>(r(),N(_,{key:V.text,item:V,depth:a.depth+1},null,8,["item","depth"]))),128)):S("",!0)])):S("",!0)]),_:1},8,["class"])}}}),lo=B(oo,[["__scopeId","data-v-b3fd67f8"]]),ro=L({__name:"VPSidebarGroup",props:{items:{}},setup(a){const e=A(!0);let t=null;return ie(()=>{t=setTimeout(()=>{t=null,e.value=!1},300)}),Dt(()=>{t!=null&&(clearTimeout(t),t=null)}),(s,n)=>(r(!0),d(j,null,R(a.items,o=>(r(),d("div",{key:o.text,class:O(["group",{"no-transition":e.value}])},[D(lo,{item:o,depth:0},null,8,["item"])],2))),128))}}),co=B(ro,[["__scopeId","data-v-c40bc020"]]),uo={class:"nav",id:"VPSidebarNav","aria-labelledby":"sidebar-aria-label",tabindex:"-1"},ho=L({__name:"VPSidebar",props:{open:{type:Boolean}},setup(a){const{sidebarGroups:e,hasSidebar:t}=re(),s=a,n=A(null),o=lt(Ne?document.body:null);ee([s,n],()=>{var c;s.open?(o.value=!0,(c=n.value)==null||c.focus()):o.value=!1},{immediate:!0,flush:"post"});const l=A(0);return ee(e,()=>{l.value+=1},{deep:!0}),(c,u)=>p(t)?(r(),d("aside",{key:0,class:O(["VPSidebar",{open:a.open}]),ref_key:"navEl",ref:n,onClick:u[0]||(u[0]=ke(()=>{},["stop"]))},[u[2]||(u[2]=i("div",{class:"curtain"},null,-1)),i("nav",uo,[u[1]||(u[1]=i("span",{class:"visually-hidden",id:"sidebar-aria-label"}," Sidebar Navigation ",-1)),$(c.$slots,"sidebar-nav-before",{},void 0,!0),(r(),N(co,{items:p(e),key:l.value},null,8,["items"])),$(c.$slots,"sidebar-nav-after",{},void 0,!0)])],2)):S("",!0)}}),fo=B(ho,[["__scopeId","data-v-319d5ca6"]]),mo=L({__name:"VPSkipLink",setup(a){const{theme:e}=F(),t=Ae(),s=A();ee(()=>t.path,()=>s.value.focus());function n({target:o}){const l=document.getElementById(decodeURIComponent(o.hash).slice(1));if(l){const c=()=>{l.removeAttribute("tabindex"),l.removeEventListener("blur",c)};l.setAttribute("tabindex","-1"),l.addEventListener("blur",c),l.focus(),window.scrollTo(0,0)}}return(o,l)=>(r(),d(j,null,[i("span",{ref_key:"backToTop",ref:s,tabindex:"-1"},null,512),i("a",{href:"#VPContent",class:"VPSkipLink visually-hidden",onClick:n},b(p(e).skipToContentLabel||"Skip to content"),1)],64))}}),vo=B(mo,[["__scopeId","data-v-0b0ada53"]]),po=L({__name:"Layout",setup(a){const{isOpen:e,open:t,close:s}=re(),n=Ae();ee(()=>n.path,s),Zt(e,s);const{frontmatter:o}=F(),l=Bt(),c=C(()=>!!l["home-hero-image"]);return Ie("hero-image-slot-exists",c),(u,g)=>{const m=ve("Content");return p(o).layout!==!1?(r(),d("div",{key:0,class:O(["Layout",p(o).pageClass])},[$(u.$slots,"layout-top",{},void 0,!0),D(vo),D(Ot,{class:"backdrop",show:p(e),onClick:p(s)},null,8,["show","onClick"]),D(no,null,{"nav-bar-title-before":x(()=>[$(u.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":x(()=>[$(u.$slots,"nav-bar-title-after",{},void 0,!0)]),"nav-bar-content-before":x(()=>[$(u.$slots,"nav-bar-content-before",{},void 0,!0)]),"nav-bar-content-after":x(()=>[$(u.$slots,"nav-bar-content-after",{},void 0,!0)]),"nav-screen-content-before":x(()=>[$(u.$slots,"nav-screen-content-before",{},void 0,!0)]),"nav-screen-content-after":x(()=>[$(u.$slots,"nav-screen-content-after",{},void 0,!0)]),_:3}),D(Yn,{open:p(e),onOpenMenu:p(t)},null,8,["open","onOpenMenu"]),D(fo,{open:p(e)},{"sidebar-nav-before":x(()=>[$(u.$slots,"sidebar-nav-before",{},void 0,!0)]),"sidebar-nav-after":x(()=>[$(u.$slots,"sidebar-nav-after",{},void 0,!0)]),_:3},8,["open"]),D(Vn,null,{"page-top":x(()=>[$(u.$slots,"page-top",{},void 0,!0)]),"page-bottom":x(()=>[$(u.$slots,"page-bottom",{},void 0,!0)]),"not-found":x(()=>[$(u.$slots,"not-found",{},void 0,!0)]),"home-hero-before":x(()=>[$(u.$slots,"home-hero-before",{},void 0,!0)]),"home-hero-info-before":x(()=>[$(u.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":x(()=>[$(u.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":x(()=>[$(u.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":x(()=>[$(u.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":x(()=>[$(u.$slots,"home-hero-image",{},void 0,!0)]),"home-hero-after":x(()=>[$(u.$slots,"home-hero-after",{},void 0,!0)]),"home-features-before":x(()=>[$(u.$slots,"home-features-before",{},void 0,!0)]),"home-features-after":x(()=>[$(u.$slots,"home-features-after",{},void 0,!0)]),"doc-footer-before":x(()=>[$(u.$slots,"doc-footer-before",{},void 0,!0)]),"doc-before":x(()=>[$(u.$slots,"doc-before",{},void 0,!0)]),"doc-after":x(()=>[$(u.$slots,"doc-after",{},void 0,!0)]),"doc-top":x(()=>[$(u.$slots,"doc-top",{},void 0,!0)]),"doc-bottom":x(()=>[$(u.$slots,"doc-bottom",{},void 0,!0)]),"aside-top":x(()=>[$(u.$slots,"aside-top",{},void 0,!0)]),"aside-bottom":x(()=>[$(u.$slots,"aside-bottom",{},void 0,!0)]),"aside-outline-before":x(()=>[$(u.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":x(()=>[$(u.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":x(()=>[$(u.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":x(()=>[$(u.$slots,"aside-ads-after",{},void 0,!0)]),_:3}),D(Hn),$(u.$slots,"layout-bottom",{},void 0,!0)],2)):(r(),N(m,{key:1}))}}}),go=B(po,[["__scopeId","data-v-5d98c3a5"]]),bo={Layout:go,enhanceApp:({app:a})=>{a.component("Badge",Et)}},yo=["","","","","","",""],Te=["","","","","","","sans","","","1654e","",""],Se=[{id:"sleepy",name:"",desc:""},{id:"promiscuous",name:"",desc:""},{id:"money-loving",name:"",desc:""},{id:"hardworking",name:"",desc:""},{id:"lazy",name:"",desc:""},{id:"social",name:"",desc:""},{id:"loner",name:"",desc:""},{id:"romantic",name:"",desc:""},{id:"conservative",name:"",desc:""},{id:"impulsive",name:"",desc:""},{id:"rational",name:"",desc:""},{id:"generous",name:"",desc:""},{id:"stingy",name:"",desc:""},{id:"ambitious",name:"",desc:""},{id:"content",name:"",desc:""}],$o={hardworking:["lazy"],lazy:["hardworking"],social:["loner"],loner:["social"],romantic:["conservative"],conservative:["romantic"],impulsive:["rational"],rational:["impulsive"],generous:["stingy"],stingy:["generous"],ambitious:["content"],content:["ambitious"]};function we(a,e){return($o[e]||[]).some(s=>a.includes(s))}const ko=[{name:"",chaosBonus:.3,loveGain:-.5,childDesire:-.3,desc:""},{name:"",chaosBonus:-.2,loveGain:.3,childDesire:.2,desc:""},{name:"",chaosBonus:-.1,loveGain:.5,childDesire:.4,desc:""},{name:"",chaosBonus:.1,loveGain:-.2,childDesire:-.1,desc:""},{name:"",chaosBonus:-.15,loveGain:.4,childDesire:.5,desc:""},{name:"",chaosBonus:.25,loveGain:-.3,childDesire:-.2,desc:""},{name:"",chaosBonus:-.1,loveGain:.3,childDesire:.3,desc:""},{name:"",chaosBonus:.05,loveGain:0,childDesire:.1,desc:""},{name:"",chaosBonus:-.1,loveGain:.6,childDesire:.3,desc:""},{name:"",chaosBonus:.15,loveGain:-.4,childDesire:-.2,desc:""},{name:"",chaosBonus:-.15,loveGain:.4,childDesire:.2,desc:""},{name:"",chaosBonus:.2,loveGain:-.3,childDesire:-.1,desc:""},{name:"",chaosBonus:.1,loveGain:.2,childDesire:.2,desc:""},{name:"",chaosBonus:-.1,loveGain:-.1,childDesire:-.2,desc:""},{name:"",chaosBonus:-.05,loveGain:.3,childDesire:.1,desc:""},{name:"",chaosBonus:.1,loveGain:-.2,childDesire:-.1,desc:""},{name:"",chaosBonus:-.1,loveGain:.2,childDesire:.1,desc:""},{name:"",chaosBonus:.2,loveGain:-.1,childDesire:-.1,desc:""},{name:"",chaosBonus:-.1,loveGain:.5,childDesire:.4,desc:""},{name:"",chaosBonus:.05,loveGain:0,childDesire:.2,desc:""}],E=(a,e)=>Math.floor(Math.random()*(e-a+1))+a,K=a=>a[Math.floor(Math.random()*a.length)];class _e{constructor(e){P(this,"name");P(this,"happiness");P(this,"money");P(this,"job");P(this,"currentAction");P(this,"relationships");P(this,"partner");P(this,"interactingWith");P(this,"personality");P(this,"traits");P(this,"constructionContribution");P(this,"prostitute");P(this,"credibility");P(this,"electionFailures");P(this,"electionCooldown");P(this,"incomeStats");P(this,"buildingIncome");P(this,"slackingOffCount");P(this,"jobSatisfaction");P(this,"fightCount");P(this,"totalSleepTime");P(this,"masturbationCount");P(this,"sexCount");P(this,"alcoholTolerance");P(this,"isDrunk");P(this,"drunkEndTime");P(this,"pregnant");P(this,"contraceptives");P(this,"children");P(this,"parents");P(this,"birthTime");P(this,"sexualDesire");P(this,"isRelieving");P(this,"relievingWith");P(this,"relievingEndTime");P(this,"fwbList");P(this,"resignationCooldown");P(this,"lastResignedBuilding");P(this,"lastResignedTime");P(this,"bribedBy");P(this,"rejectedBribeFrom");P(this,"wasReported");this.name=e,this.happiness=60,this.money=0,this.job=null,this.currentAction="",this.relationships={},this.partner=null,this.interactingWith=null,this.personality=K(ko),this.traits=[];const t=[];if(Math.random()<.7){const s=Se.filter(n=>!t.includes(n.id)&&!we(t,n.id));if(s.length>0){const n=K(s);this.traits.push(n),t.push(n.id)}}if(Math.random()<.8&&t.length>0){const s=Se.filter(n=>!t.includes(n.id)&&!we(t,n.id));if(s.length>0){const n=K(s);this.traits.push(n),t.push(n.id)}}if(Math.random()<.2&&t.length>0){const s=Se.filter(n=>!t.includes(n.id)&&!we(t,n.id));if(s.length>0){const n=K(s);this.traits.push(n),t.push(n.id)}}if(Math.random()<.05&&t.length>0){const s=Se.filter(n=>!t.includes(n.id)&&!we(t,n.id));if(s.length>0){const n=K(s);this.traits.push(n),t.push(n.id)}}this.constructionContribution={},this.prostitute=null,this.credibility=50,this.electionFailures={},this.electionCooldown={},this.slackingOffCount={},this.jobSatisfaction=70,this.fightCount=0,this.totalSleepTime=0,this.masturbationCount=0,this.sexCount=0,this.alcoholTolerance=E(30,90),this.isDrunk=!1,this.sexualDesire=E(20,60),this.isRelieving=!1,this.relievingWith=void 0,this.fwbList=[],this.incomeStats={work:0,oddJob:0,streetwalking:0,prostitution:0,construction:0,total:0},this.buildingIncome={},this.pregnant=null,this.contraceptives=0,this.children=[],this.parents=null,this.birthTime=null}hasTrait(e){return this.traits.some(t=>t.id===e)}getSleepSchedule(){let e,t;return this.job&&this.job.buildingId==="bar"?(e=3,t=11):(e=23,t=7),this.hasTrait("sleepy")&&(e>t?(e=(e-1+24)%24,t=(t+1)%24):(e=Math.max(0,e-1),t=Math.min(24,t+1))),{start:e,end:t}}decideProposal(e,t){const s=this.relationships[e];if(!s)return!1;let n=0,o=0;return n=s.love,n+=(this.happiness-50)/2,t==="date"&&(o=30),t==="confess"&&(o=75),t==="propose"&&(o=90),n+=E(-10,10),n>=o}}class Re{constructor(e){P(this,"id");P(this,"blueprint");P(this,"name");P(this,"totalCost");P(this,"currentProgress");P(this,"isBuilt");P(this,"effect");P(this,"desc");P(this,"price");P(this,"open");P(this,"close");P(this,"jobs");P(this,"staff");P(this,"closedDays");P(this,"prostitutes");P(this,"totalRevenue");P(this,"revenueHistory");P(this,"staffIncomeHistory");P(this,"lastRevenueDay");P(this,"dailyStaffIncome");P(this,"companyFunds");P(this,"level");P(this,"baseSalary");P(this,"products");this.id=e.id,this.blueprint=e,this.name=e.name,this.totalCost=e.cost,this.currentProgress=0,this.isBuilt=!1,this.effect=e.effect,this.desc=e.desc,this.price=0,this.open=e.open,this.close=e.close,this.jobs=e.jobs||[],this.staff=[],this.closedDays=e.closedDays||[],this.prostitutes=[],this.totalRevenue=0,this.revenueHistory=[],this.staffIncomeHistory=[],this.lastRevenueDay=-1,this.dailyStaffIncome=0,this.companyFunds=0,this.level=1,this.baseSalary=10,this.products=e.products||[]}isOpen(e,t){return!this.isBuilt||this.closedDays.includes(t)||this.jobs.length>0&&this.staff.length===0?!1:this.open===0&&this.close===24?!0:this.close<this.open?e>=this.open||e<this.close:e>=this.open&&e<this.close}}const Ce=[{id:"park",name:" ",cost:200,desc:"",effect:"romance",price:0,open:0,close:24,jobs:[],products:[]},{id:"bar",name:" ",cost:500,desc:"",effect:"chaos",price:0,open:18,close:2,jobs:["","",""],closedDays:[0],products:[{id:"star_beer",name:"",price:15},{id:"starglow_beer",name:"",price:15},{id:"battle_beer",name:"",price:18},{id:"turia_beer",name:"",price:18},{id:"gin_tonic",name:"",price:56},{id:"cuba_libre",name:"",price:56}]},{id:"hotel",name:" ",cost:800,desc:"",effect:"ntr",price:0,open:0,close:24,jobs:["",""],products:[{id:"single_room",name:"",price:50},{id:"double_room",name:"",price:120},{id:"king_bed",name:"",price:210},{id:"executive_room",name:"",price:350},{id:"suite",name:"",price:670}]},{id:"church",name:" ",cost:1200,desc:"",effect:"marriage",price:0,open:8,close:20,jobs:[""],products:[]},{id:"cinema",name:" ",cost:400,desc:"",effect:"fun",price:0,open:10,close:24,jobs:[""],products:[{id:"japan_action",name:"",price:50},{id:"hero_save",name:"",price:40},{id:"green_kids",name:"",price:20},{id:"premium_anime",name:"",price:35}]},{id:"footshop",name:" ",cost:600,desc:"",effect:"ntr",price:0,open:0,close:24,jobs:[""],products:[]},{id:"hospital",name:" ",cost:1500,desc:"",effect:"medical",price:0,open:0,close:24,jobs:["",""],products:[]},{id:"pharmacy",name:" ",cost:800,desc:"",effect:"contraceptive",price:0,open:8,close:22,jobs:[""],products:[]}],ye="0.7.2",_o="0.7.0";class So{constructor(){P(this,"state");P(this,"tickIntervalId",null);P(this,"autoSaveTimer",0);P(this,"lastSaveTime",Date.now());P(this,"autoSaveInterval",15);P(this,"beforeUnloadHandler",null);P(this,"lastNewCharDay",0);P(this,"newCharInterval",5);this.state=Vt({chars:[],buildings:[],townMoney:0,gameTime:480,gameDay:1,totalDaysPassed:0,logs:[],isPlaying:!1,timeSpeed:1}),typeof window<"u"?(this.loadOrInit(),this.setupAutoSaveOnUnload()):this.initNewGame()}setupAutoSaveOnUnload(){typeof window>"u"||(this.beforeUnloadHandler=()=>{this.autoSave()},window.addEventListener("beforeunload",this.beforeUnloadHandler))}cleanup(){typeof window>"u"||this.beforeUnloadHandler&&(window.removeEventListener("beforeunload",this.beforeUnloadHandler),this.beforeUnloadHandler=null)}getAbsoluteTime(){return this.state.totalDaysPassed*1440+this.state.gameTime}loadOrInit(){if(typeof window>"u"||typeof localStorage>"u"){this.initNewGame();return}const e=localStorage.getItem("happyTownV2_Save");if(e){const t=this.loadFromJSON(e);t.success?(this.checkAndAddNewChars(),this.log(" ")):(this.log(` ${t.message}`,"error"),this.initNewGame())}else this.initNewGame()}checkAndAddNewChars(){let e=!1;Te.forEach(t=>{this.state.chars.find(s=>s.name===t)||(this.state.chars.push(new _e(t)),this.log(`[]  **${t}** `),e=!0)}),e&&this.state.chars.forEach(t=>{this.state.chars.forEach(s=>{t.name!==s.name&&!t.relationships[s.name]&&(t.relationships[s.name]={love:0,status:"stranger"})})})}generateRandomName(){const e=["","","","","","","","","","","","","","","","","","","",""],t=["","","","","","","","","","","","","","","","","","","","","","","",""];return Math.random()<.5?e[E(0,e.length-1)]+t[E(0,t.length-1)]:e[E(0,e.length-1)]+t[E(0,t.length-1)]+t[E(0,t.length-1)]}tryAddNewResident(){if(this.state.totalDaysPassed-this.lastNewCharDay>=this.newCharInterval){const t=Te.filter(o=>!this.state.chars.find(l=>l.name===o));let s;if(t.length>0)s=K(t);else{let o=0;do s=this.generateRandomName(),o++,o>100&&(s=this.generateRandomName()+E(1,999));while(this.state.chars.find(l=>l.name===s)&&o<=100)}const n=new _e(s);this.state.chars.forEach(o=>{n.relationships[o.name]={love:0,status:"stranger"},o.relationships[s]={love:0,status:"stranger"}}),this.state.chars.push(n),this.lastNewCharDay=this.state.totalDaysPassed,this.log(`[]  **${s}**  ${this.state.chars.length} `,"event"),this.autoSave()}}initNewGame(){this.state.townMoney=0,this.state.gameTime=480,this.state.gameDay=1,this.state.totalDaysPassed=0,this.state.logs=[],this.state.isPlaying=!1,this.state.timeSpeed=1,this.state.chars=Te.map(t=>{const s=new _e(t);return Te.forEach(n=>{n!==t&&(s.relationships[n]={love:0,status:"stranger"})}),s}),this.state.buildings=Ce.map(t=>new Re(t));const e=this.state.buildings.find(t=>t.id==="park");e&&(e.isBuilt=!0,e.currentProgress=e.totalCost),this.state.buildings.length===0&&console.error(""),this.lastNewCharDay=0}start(){this.state.isPlaying||(this.state.isPlaying=!0,this.tickIntervalId=setInterval(()=>this.tick(),1500),this.log("","info"))}stop(){this.state.isPlaying=!1,this.tickIntervalId&&(clearInterval(this.tickIntervalId),this.tickIntervalId=null),this.log("","info")}tick(){if(!this.state.isPlaying)return;const e=Math.floor(10*this.state.timeSpeed);this.state.gameTime+=e,this.state.gameTime>=1440&&(this.state.buildings.forEach(s=>{if(s.isBuilt&&s.lastRevenueDay<this.state.totalDaysPassed){const n=s.revenueHistory.reduce((l,c)=>l+c,0),o=s.totalRevenue-n;o>=0&&(s.revenueHistory.push(o),s.revenueHistory.length>30&&s.revenueHistory.shift()),s.dailyStaffIncome>0?(s.staffIncomeHistory.push(s.dailyStaffIncome),s.staffIncomeHistory.length>30&&s.staffIncomeHistory.shift(),s.dailyStaffIncome=0):(s.staffIncomeHistory.push(0),s.staffIncomeHistory.length>30&&s.staffIncomeHistory.shift()),s.lastRevenueDay=this.state.totalDaysPassed}}),this.state.gameTime=0,this.state.gameDay=(this.state.gameDay+1)%7,this.state.totalDaysPassed++,this.log(`${yo[this.state.gameDay]}`,"system"),this.tryAddNewResident()),this.state.gameTime%60===0&&(this.runElectionsAndHiring(),this.state.chars.forEach(s=>{s.credibility<50&&(s.credibility=Math.min(50,s.credibility+1))}),this.checkAutoUpgrade());const t=Math.max(1,Math.floor(this.state.timeSpeed));for(let s=0;s<t;s++)if(this.state.chars.length>0){const n=K(this.state.chars);this.decideAction(n)}this.autoSaveTimer+=1.5,this.autoSaveTimer>=this.autoSaveInterval&&(this.autoSave(),this.autoSaveTimer=0)}runElectionsAndHiring(){this.state.buildings.forEach(e=>{if(!(!e.isBuilt||e.jobs.length===0)){if(e.staff.length===0){const t=this.state.chars.filter(s=>{if(s.job||s.resignationCooldown&&this.getAbsoluteTime()<s.resignationCooldown||s.lastResignedBuilding===e.id&&s.lastResignedTime&&this.getAbsoluteTime()<s.lastResignedTime+43200)return!1;if(s.electionCooldown&&s.electionCooldown[e.id]){if(this.getAbsoluteTime()<s.electionCooldown[e.id])return!1;delete s.electionCooldown[e.id],delete s.electionFailures[e.id]}return!0});if(t.length>0){t.forEach(c=>{c.electionCooldown&&c.electionCooldown[e.id]&&this.getAbsoluteTime()<c.electionCooldown[e.id]||c.money>=30&&Math.random()<.1&&this.attemptBribery(c,e)});const s={},n={};t.forEach(c=>{s[c.name]=0,n[c.name]=0}),this.state.chars.forEach(c=>{t.forEach(u=>{if(u.name===c.name)s[u.name]++;else{const g=c.relationships[u.name],m=g?g.love:0,v=c.bribedBy===u.name,h=c.rejectedBribeFrom===u.name;let f=m;v&&(f+=20),h&&(f-=20);const T=(u.credibility-50)/3;f+=T,u.wasReported&&(f-=30),f+=E(-10,10),f>=15?s[u.name]++:f<=5&&n[u.name]++}})});let o=null,l=-1;for(const c in s){const u=s[c],g=n[c]||0;u>g&&u>=1&&u>l&&(l=u,o=t.find(m=>m.name===c)||null)}if(o){const c=e.jobs[0];o.job={buildingId:e.id,role:c},e.staff.push(o.name);const u=n[o.name]||0;o.credibility=Math.min(100,o.credibility+15),o.jobSatisfaction=70,o.slackingOffCount[e.id]||(o.slackingOffCount[e.id]=0),o.electionFailures&&o.electionFailures[e.id]&&delete o.electionFailures[e.id],o.electionCooldown&&o.electionCooldown[e.id]&&delete o.electionCooldown[e.id],this.log(`[] **${o.name}** (${l}/${u})  **${e.name}** ${c}`,"build")}else{const c=t.reduce((u,g)=>{const m=s[g.name]||0,v=s[u.name]||0;return m>v?g:u},t[0]);if(c){const u=s[c.name]||0,g=n[c.name]||0;c.electionFailures||(c.electionFailures={}),c.electionFailures[e.id]=(c.electionFailures[e.id]||0)+1;const m=c.electionFailures[e.id];this.log(`[] **${e.name}** **${c.name}**  ${u}/${g} `,"reject"),m>=7&&(c.electionCooldown||(c.electionCooldown={}),c.electionCooldown[e.id]=this.getAbsoluteTime()+2880,this.log(`[] **${c.name}**  **${e.name}** 72`,"reject"))}}this.state.chars.forEach(c=>{delete c.bribedBy,delete c.rejectedBribeFrom}),t.forEach(c=>{delete c.wasReported})}}else if(e.staff.length<e.jobs.length){const t=e.staff[0],s=this.state.chars.find(n=>n.name===t);if(s){const n=e.jobs[e.staff.length],o=this.state.chars.filter(u=>!u.job);let l=null,c=-999;if(o.forEach(u=>{const g=s.relationships[u.name],m=g?g.love:0;m>c&&(c=m,l=u)}),l!==null){const u=l;u.job={buildingId:e.id,role:n},e.staff.push(u.name),u.jobSatisfaction=70,u.slackingOffCount[e.id]||(u.slackingOffCount[e.id]=0),this.log(`[] ${e.name} **${s.name}**  **${u.name}**  ${n}`,"info")}}}if(e.id==="footshop"&&e.isBuilt&&e.staff.length>0){const t=e.staff[0],s=this.state.chars.find(n=>n.name===t);if(s&&e.prostitutes.length<3){const n=this.state.chars.filter(o=>!o.job&&!o.prostitute&&o.hasTrait("promiscuous"));if(n.length>0&&Math.random()<.1){const o=K(n);o.prostitute={buildingId:e.id},e.prostitutes.push(o.name),this.log(`[] **${s.name}**  **${o.name}** ...`,"drama")}}}}})}attemptBribery(e,t){if(e.electionCooldown&&e.electionCooldown[t.id]&&this.getAbsoluteTime()<e.electionCooldown[t.id])return;const s=this.state.chars.filter(m=>m.name!==e.name).sort((m,v)=>m.money-v.money);if(s.length===0)return;const n=K(s),o=E(15,30);if(e.money<o)return;this.state.chars.filter(m=>m.name!==e.name&&m.name!==n.name&&Math.random()<.3).forEach(m=>{const v=m.relationships[e.name],f=(v?v.love:0)<30?.4:.1;if(Math.random()<f){if(m.hasTrait("money-loving")&&e.money>=20){const T=E(10,20);if(e.money>=T){e.money-=T,m.money+=T,this.log(`[] **${e.name}**  ${T}  **${m.name}**`,"drama");return}}e.wasReported=!0,this.log(`[] **${m.name}**  **${e.name}** `,"drama")}});const c=n.relationships[e.name];let g=.3+(c?c.love:0)/100*.3;n.hasTrait("money-loving")?g*=1.8:g*=.6,e.wasReported&&(g*=.5),Math.random()<g?(e.money-=o,n.money+=o,n.bribedBy=e.name,this.log(`[] **${e.name}**  ${o}  **${n.name}** `,"drama")):(n.rejectedBribeFrom=e.name,e.credibility=Math.max(0,e.credibility-5),this.log(`[] **${n.name}**  **${e.name}** **${e.name}** `,"reject"))}log(e,t=""){const s=this.formatTime(this.state.gameTime);this.state.logs.unshift({id:Date.now()+Math.random(),time:s,message:e,type:t}),this.state.logs.length>60&&this.state.logs.pop()}formatTime(e){const t=Math.floor(e/60),s=e%60;return`${t.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}autoSave(){if(!(typeof window>"u"||typeof localStorage>"u"))try{this.lastSaveTime=Date.now();const e=this.toJSON();localStorage.setItem("happyTownV2_Save",e)}catch(e){console.error("",e)}}manualSave(){this.autoSave(),this.log(" ","info")}toJSON(){return JSON.stringify({version:ye,saveTime:new Date().toISOString(),chars:this.state.chars,buildings:this.state.buildings,townMoney:this.state.townMoney,gameTime:this.state.gameTime,gameDay:this.state.gameDay,totalDaysPassed:this.state.totalDaysPassed,timeSpeed:this.state.timeSpeed,lastNewCharDay:this.lastNewCharDay})}loadFromJSON(e){try{const t=JSON.parse(e),s=t.version||"0.0.0";if(!this.isVersionCompatible(s))return{success:!1,message:` (${s})  (${ye}) `};const n=this.migrateSaveData(t,s);if(this.state.chars=(n.chars||[]).map(o=>{const l=new _e(o.name);return Object.assign(l,o),l}),n.buildings&&Array.isArray(n.buildings)&&n.buildings.length>0)this.state.buildings=n.buildings.map(o=>{var u;const l=Ce.find(g=>{var m;return g.id===(((m=o.blueprint)==null?void 0:m.id)||o.id)});if(!l)return console.warn(`: ${((u=o.blueprint)==null?void 0:u.id)||o.id}`),null;const c=new Re(l);return Object.assign(c,{...o,blueprint:l,companyFunds:o.companyFunds??0,level:o.level??1,baseSalary:o.baseSalary??10}),c}).filter(o=>o!==null);else{console.warn(""),this.state.buildings=Ce.map(l=>new Re(l));const o=this.state.buildings.find(l=>l.id==="park");o&&(o.isBuilt=!0,o.currentProgress=o.totalCost)}return this.state.townMoney=n.townMoney||0,this.state.gameTime=n.gameTime||480,this.state.gameDay=n.gameDay||1,this.state.totalDaysPassed=n.totalDaysPassed||0,this.state.timeSpeed=n.timeSpeed||1,this.lastNewCharDay=n.lastNewCharDay||this.state.totalDaysPassed,{success:!0}}catch(t){return console.error("",t),{success:!1,message:`${t instanceof Error?t.message:""}`}}}isVersionCompatible(e){if(!e||e==="0.0.0")return!0;const t=e.split("."),s=ye.split("."),n=_o.split(".");if(t[0]!==s[0])return!1;const o=parseInt(t[1]||"0"),l=parseInt(n[1]||"0");return!(o<l)}migrateSaveData(e,t){let s={...e};return(!t||t.startsWith("0.7.0")||t==="0.0.0")&&(s.buildings&&(s.buildings=s.buildings.map(n=>{if(!n.blueprint&&n.id){const o=Ce.find(l=>l.id===n.id);o&&(n.blueprint=o)}return n.companyFunds===void 0&&(n.companyFunds=0),n.level===void 0&&(n.level=1),n.baseSalary===void 0&&(n.baseSalary=10),n.staffIncomeHistory||(n.staffIncomeHistory=[]),n.dailyStaffIncome===void 0&&(n.dailyStaffIncome=0),n})),s.chars&&(s.chars=s.chars.map(n=>(n.relationships||(n.relationships={}),n.incomeStats||(n.incomeStats={work:0,oddJob:0,streetwalking:0,prostitution:0,construction:0,total:0}),n.slackingOffCount||(n.slackingOffCount={}),n.jobSatisfaction===void 0&&(n.jobSatisfaction=70),n.fightCount===void 0&&(n.fightCount=0),n.totalSleepTime===void 0&&(n.totalSleepTime=0),n.sexualDesire===void 0&&(n.sexualDesire=E(20,60)),n.isRelieving===void 0&&(n.isRelieving=!1),n.relievingWith===void 0&&(n.relievingWith=void 0),n.relievingEndTime===void 0&&(n.relievingEndTime=void 0),n.fwbList===void 0&&(n.fwbList=[]),n.resignationCooldown===void 0&&(n.resignationCooldown=void 0),n.lastResignedBuilding===void 0&&(n.lastResignedBuilding=void 0),n.lastResignedTime===void 0&&(n.lastResignedTime=void 0),n.masturbationCount===void 0&&(n.masturbationCount=0),n.sexCount===void 0&&(n.sexCount=0),n.alcoholTolerance===void 0&&(n.alcoholTolerance=E(30,90)),n.isDrunk===void 0&&(n.isDrunk=!1),n.drunkEndTime===void 0&&(n.drunkEndTime=void 0),n.buildingIncome||(n.buildingIncome={}),n)))),s}breakInteraction(e){if(e.interactingWith){const t=this.state.chars.find(s=>s.name===e.interactingWith);t&&(t.interactingWith=null,t.currentAction="",t.isRelieving&&this.handleSexualRelief(t)),e.interactingWith=null,e.isRelieving&&this.handleSexualRelief(e)}}decideAction(e){this.breakInteraction(e);const t=Math.floor(this.state.gameTime/60),s=e.getSleepSchedule();let n=!1;if(s.start>s.end?n=t>=s.start||t<s.end:n=t>=s.start&&t<s.end,n){e.currentAction=" ";let m=2;e.hasTrait("sleepy")&&(m+=2),e.happiness=Math.min(100,e.happiness+m),e.totalSleepTime=(e.totalSleepTime||0)+10/60;return}if(e.resignationCooldown&&this.getAbsoluteTime()>=e.resignationCooldown&&(e.resignationCooldown=void 0,e.job||(e.currentAction="",this.log(`[] **${e.name}** `,"info"))),e.job){if(e.resignationCooldown&&this.getAbsoluteTime()<e.resignationCooldown){e.job=null,e.currentAction="";return}const m=this.state.buildings.find(v=>v.id===e.job.buildingId);if(m&&m.isOpen(t,this.state.gameDay)&&(m.open===0&&m.close===24?Math.random()<.7:!0)){this.doWork(e,m);return}}if(!e.job&&e.money<20){if(e.resignationCooldown&&this.getAbsoluteTime()<e.resignationCooldown){e.currentAction="",this.doRest(e,{name:"",effect:"none",price:0});return}e.hasTrait("promiscuous")&&Math.random()<.6?this.doStreetwalking(e):this.doOddJob(e);return}if(e.happiness<20){this.doRest(e,{name:"",effect:"none",price:0});return}if(e.isRelieving){this.handleSexualRelief(e);return}if(e.sexualDesire<100&&(e.sexualDesire=Math.min(100,e.sexualDesire+E(0,2))),e.sexualDesire>70&&this.trySexualRelief(e))return;const o=Math.random(),l=this.state.buildings.filter(m=>m.isBuilt&&m.isOpen(t,this.state.gameDay));let c;if(l.length>0){const m=K(l);c={id:m.id,name:m.name,effect:m.effect||"none",price:0,products:m.products||[]}}else c={id:"",name:"",effect:"none",price:0,products:[]};let u;if(e.hasTrait("promiscuous")){const m=this.state.buildings.find(v=>v.id==="footshop"&&!v.isBuilt);m?u=m:u=this.state.buildings.find(v=>!v.isBuilt)}else if(e.hasTrait("sleepy")){const m=this.state.buildings.find(v=>v.id==="hotel"&&!v.isBuilt);m?u=m:u=this.state.buildings.find(v=>!v.isBuilt)}else u=this.state.buildings.find(m=>!m.isBuilt);const g=e.hasTrait("money-loving")&&u?.5:.3;if(o<g)u?this.doBuild(e,u):e.job?this.doSocial(e,c):e.hasTrait("promiscuous")&&Math.random()<.6?this.doStreetwalking(e):this.doOddJob(e);else if(o<.85){let m=1;e.hasTrait("social")?m=1.2:e.hasTrait("loner")&&(m=.7),Math.random()<m?this.doSocial(e,c):this.doRest(e,c)}else this.doRest(e,c)}distributeRevenue(e,t){if(e.staff.length===0){this.state.townMoney+=t;return}const s=Math.floor(t),n=Math.floor(s*.1);e.companyFunds+=n;const o=s-n;e.dailyStaffIncome+=o;const l=Math.floor(s*.5),c=e.staff[0],u=this.state.chars.find(v=>v.name===c);u&&(u.money+=l,u.incomeStats.work+=l,u.incomeStats.total+=l,u.buildingIncome||(u.buildingIncome={}),u.buildingIncome[e.id]=(u.buildingIncome[e.id]||0)+l);const g=Math.floor(s*.4),m=e.staff.slice(1);if(m.length>0){const v=Math.floor(g/m.length);m.forEach(h=>{const f=this.state.chars.find(T=>T.name===h);f&&(f.money+=v,f.incomeStats.work+=v,f.incomeStats.total+=v,f.buildingIncome||(f.buildingIncome={}),f.buildingIncome[e.id]=(f.buildingIncome[e.id]||0)+v)})}else u&&(u.money+=g,u.incomeStats.work+=g,u.incomeStats.total+=g,u.buildingIncome||(u.buildingIncome={}),u.buildingIncome[e.id]=(u.buildingIncome[e.id]||0)+g)}doWork(e,t){e.happiness-=1,this.tryLearnTrait(e,"work",t),this.updateJobSatisfaction(e,t);let s=!1,n=!1;if(e.hasTrait("hardworking")?Math.random()<.05&&(s=!0):e.hasTrait("lazy")?Math.random()<.8&&(s=!0):e.hasTrait("sleepy")&&Math.random()<.7&&(s=!0),s){const c=t.staff[0];if(c&&c!==e.name&&this.state.chars.find(g=>g.name===c)&&Math.random()<.3&&(n=!0,e.happiness-=2,e.slackingOffCount[t.id]||(e.slackingOffCount[t.id]=0),e.slackingOffCount[t.id]++,this.log(`[] **${e.name}**  **${t.name}**  **${c}** `,"drama"),e.slackingOffCount[t.id]>=3)){this.fireEmployee(e,t,c);return}}if(!s||n){let c=-1;e.hasTrait("ambitious")?c=-2:e.hasTrait("content")||e.hasTrait("hardworking")?c=0:e.hasTrait("lazy")&&(c=-2),e.jobSatisfaction=Math.max(0,Math.min(100,e.jobSatisfaction+c))}let o=30,l=.05;if(e.hasTrait("ambitious")?(o=50,l=.08):e.hasTrait("content")&&(o=20,l=.02),e.job&&e.job.buildingId===t.id&&e.jobSatisfaction<o&&Math.random()<l){this.resign(e,t);return}s&&!n?e.currentAction=`[]  ${t.name} ${e.job.role}`:e.currentAction=`[]  ${t.name} ${e.job.role}`}updateJobSatisfaction(e,t){var u;if(!e.job||e.job.buildingId!==t.id)return;let s=e.jobSatisfaction;e.happiness>70?s+=.5:e.happiness<40&&(s-=1);const n=((u=e.incomeStats)==null?void 0:u.work)||0,o=this.state.totalDaysPassed||1,l=o>0?n/o:0;l<t.baseSalary?s-=.5:l>t.baseSalary*1.5&&(s+=.3);const c=e.slackingOffCount[t.id]||0;c>0&&(s-=c*2),e.jobSatisfaction=Math.max(0,Math.min(100,s))}fireEmployee(e,t,s){if(!e.job||e.job.buildingId!==t.id)return;const n=t.staff.indexOf(e.name);n!==-1&&t.staff.splice(n,1),e.job=null,e.currentAction="",delete e.slackingOffCount[t.id],this.log(`[] **${s}**  **${e.name}** **${t.name}** `,"drama"),this.hireNewEmployee(t),this.autoSave()}resign(e,t){if(!e.job||e.job.buildingId!==t.id)return;const s=e.job.role,n=t.staff.indexOf(e.name);n!==-1&&t.staff.splice(n,1);const o=this.getAbsoluteTime();e.lastResignedBuilding=t.id,e.lastResignedTime=o,e.resignationCooldown=o+5*1440,e.job=null,e.currentAction="",e.jobSatisfaction=70,delete e.slackingOffCount[t.id],this.log(`[] **${e.name}**  **${t.name}**  **${s}** 5`,"event"),this.hireNewEmployee(t),this.autoSave()}hireNewEmployee(e){if(!e.isBuilt||e.jobs.length===0||e.jobs.length-e.staff.length<=0)return;const s=e.staff[0];if(!s||!this.state.chars.find(g=>g.name===s))return;const o=this.state.chars.filter(g=>!(g.job||g.prostitute||g.resignationCooldown&&this.getAbsoluteTime()<g.resignationCooldown||g.lastResignedBuilding===e.id&&g.lastResignedTime&&this.getAbsoluteTime()<g.lastResignedTime+43200));if(o.length===0){this.log(`[] **${e.name}** `,"info");return}const l=K(o),c=e.staff.length;if(c>=e.jobs.length)return;const u=e.jobs[c];l.job={buildingId:e.id,role:u},e.staff.push(l.name),l.jobSatisfaction=70,l.slackingOffCount[e.id]||(l.slackingOffCount[e.id]=0),this.log(`[] **${s}**  **${e.name}**  **${l.name}**  **${u}**`,"event"),this.autoSave()}doOddJob(e){e.money+=4,e.happiness-=3;const n=K(["","","","",""]);e.currentAction=`[] ${n}...`,e.incomeStats.oddJob+=4,e.incomeStats.total+=4}doStreetwalking(e){const t=E(8,15);e.money+=t,e.happiness-=4,e.currentAction="[] ...",e.incomeStats.streetwalking+=t,e.incomeStats.total+=t}doBuild(e,t){this.tryLearnTrait(e,"build",t);let s=E(5,15);e.hasTrait("hardworking")?s=Math.floor(s*1.3):e.hasTrait("lazy")?s=Math.floor(s*.6):e.hasTrait("sleepy")&&(s=Math.floor(s*.7));const n=this.isFavoriteBuilding(e,t);n&&(s=Math.floor(s*1.5)),e.hasTrait("hardworking")&&(s=Math.floor(s*1.2)),t.currentProgress+=s;const o=5;e.money+=o;const l=this.getConstructionHappinessChange(e);e.happiness=Math.max(0,e.happiness+l),e.currentAction=`: ${t.name}`,e.constructionContribution[t.id]||(e.constructionContribution[t.id]=0);const c=n?Math.floor(s*.3):0;e.constructionContribution[t.id]+=s+c,e.incomeStats.construction+=o,e.incomeStats.total+=o,t.currentProgress>=t.totalCost&&!t.isBuilt&&(t.isBuilt=!0,this.log(`[] **${t.name}** `,"build"),this.distributeConstructionReward(t))}isFavoriteBuilding(e,t){return!!(e.hasTrait("promiscuous")&&t.id==="footshop"||e.hasTrait("sleepy")&&t.id==="hotel")}getConstructionHappinessChange(e){const s=e.personality.chaosBonus||0;return s>.1?-E(3,4):s>0?-E(2,3):s<-.1?-E(0,1):-2}distributeConstructionReward(e){let t=0;if(this.state.chars.forEach(n=>{n.constructionContribution[e.id]&&(t+=n.constructionContribution[e.id])}),t===0)return;const s=Math.floor(e.totalCost*.3);this.state.chars.forEach(n=>{const o=n.constructionContribution[e.id]||0;if(o>0){const l=o/t,c=Math.floor(s*l);n.money+=c,c>0&&this.log(`[] **${n.name}**  **${e.name}**  ${c}`,"build")}})}checkAutoUpgrade(){this.state.buildings.forEach(e=>{if(!e.isBuilt||e.staff.length===0)return;const t=Math.floor(e.totalCost*.5*e.level);e.companyFunds>=t&&this.upgradeBuilding(e,!0)})}upgradeBuilding(e,t=!1){if(!e.isBuilt)return t||this.log(" ","error"),!1;const s=Math.floor(e.totalCost*.5*e.level);return e.companyFunds<s?(t||this.log(` **${e.name}**  ${s} ${e.companyFunds}`,"error"),!1):(e.companyFunds-=s,e.level+=1,e.baseSalary=Math.floor(10*(1+(e.level-1)*.2)),t?this.log(`[] **${e.name}**  ${e.level}  ${e.baseSalary}/`,"build"):this.log(`[] **${e.name}**  ${e.level}  ${e.baseSalary}/`,"build"),this.autoSave(),!0)}doRest(e,t){this.tryLearnTrait(e,"rest",t),(e.currentAction.includes("")||t.name.includes(""))&&(e.totalSleepTime=(e.totalSleepTime||0)+10/60);let s=E(5,10);t.effect==="fun"&&(s+=10);const n=t.products||[];if(n.length>0){let o=this.chooseProduct(e,n);if(o){let l=1;e.hasTrait("money-loving")||e.hasTrait("stingy")?l=1.5:e.hasTrait("generous")&&(l=.7);const c=Math.floor(o.price),u=Math.floor(c*l);if(e.money>=u){if(e.money-=c,t.id){const g=this.state.buildings.find(m=>m.id===t.id);g&&g.isBuilt&&g.staff.length>0?(this.distributeRevenue(g,c),g.totalRevenue+=c):(this.state.townMoney+=c,g&&(g.totalRevenue+=c))}else this.state.townMoney+=c;e.currentAction=` ${t.name} ${o.name}`}else{e.currentAction=` ${t.name} `;return}}else e.currentAction=` ${t.name} `}else e.currentAction=` ${t.name} `;e.happiness=Math.min(100,e.happiness+s)}chooseProduct(e,t){if(t.length===0)return null;const s=t.filter(n=>e.money>=n.price);return s.length===0?null:e.hasTrait("money-loving")||e.hasTrait("stingy")?s.reduce((o,l)=>l.price<o.price?l:o):e.hasTrait("generous")?s.reduce((o,l)=>l.price>o.price?l:o):K(s)}doSocial(e,t){if(this.tryLearnTrait(e,"social",t),e.isDrunk&&e.drunkEndTime&&this.getAbsoluteTime()<e.drunkEndTime){this.handleDrunkEvent(e);return}else e.isDrunk&&(e.isDrunk=!1,e.drunkEndTime=void 0);const s=t.products||[];if(s.length>0){let f=this.chooseProduct(e,s);if(f){let T=1;e.hasTrait("money-loving")||e.hasTrait("stingy")?T=1.5:e.hasTrait("generous")&&(T=.7);const M=Math.floor(f.price),k=Math.floor(M*T);if(e.money<k){this.doRest(e,{id:"",name:"",effect:"none",price:0,products:[]});return}if(e.money-=M,t.id){const y=this.state.buildings.find(_=>_.id===t.id);y&&y.isBuilt?(y.staff.length>0?this.distributeRevenue(y,M):this.state.townMoney+=M,y.totalRevenue+=M):this.state.townMoney+=M}else this.state.townMoney+=M;t.id==="bar"&&(f.id.includes("beer")||f.id.includes("gin_tonic")||f.id.includes("cuba_libre"))&&this.checkDrunk(e,f)}else{this.doRest(e,{id:"",name:"",effect:"none",price:0,products:[]});return}}const n=this.state.chars.filter(f=>f.name!==e.name);if(n.length===0){e.currentAction=` ${t.name} `;return}const o=K(n);e.relationships[o.name]||(e.relationships[o.name]={love:0,status:"stranger"}),o.relationships[e.name]||(o.relationships[e.name]={love:0,status:"stranger"});const l=e.relationships[o.name],c=o.relationships[e.name];e.currentAction=` ${o.name}  ${t.name}`,o.currentAction=` ${e.name}  ${t.name}`,e.interactingWith=o.name,o.interactingWith=e.name;const u=e.personality,g=o.personality,m=(u.chaosBonus||0)+(g.chaosBonus||0);if(this.checkRomanceEvent(e,o,l,c,t))return;const h=Math.max(0,Math.min(1,.03+m*.3));if(Math.random()<h){l.love=Math.max(0,l.love-5),c.love=Math.max(0,c.love-5),u.chaosBonus>g.chaosBonus?e.fightCount=(e.fightCount||0)+1:o.fightCount=(o.fightCount||0)+1;const f=u.name===""||g.name===""?`${u.name===""?e.name:o.name}`:"";this.log(`[] ${e.name}  ${o.name}  ${t.name} ${f}`,"reject")}else{let f=E(2,5);t.effect==="romance"&&(f+=3),(t.effect==="chaos"||t.effect==="ntr")&&(f+=2),(e.hasTrait("social")||o.hasTrait("social"))&&(f+=3),(e.hasTrait("loner")||o.hasTrait("loner"))&&(f=Math.floor(f*.8)),t.effect==="romance"&&(e.hasTrait("romantic")||o.hasTrait("romantic"))&&(f+=4),f+=(u.loveGain||0)*2+(g.loveGain||0)*2,f=Math.max(0,Math.round(f)),l.status!=="stranger"&&(f=Math.floor(f*1.3)),l.status==="stranger"&&l.love===0&&(l.love=1,c.love=1),l.love=Math.min(100,l.love+f),c.love=Math.min(100,c.love+f),this.updateRelationshipStatus(e,o,l,c)}}checkDrunk(e,t){let s=(100-e.alcoholTolerance)/100;if((t.id==="gin_tonic"||t.id==="cuba_libre")&&(s*=1.5),e.personality.name===""&&(s*=1.3),e.personality.name===""&&(s*=.7),e.hasTrait("conservative")&&(s*=.8),s+=(Math.random()-.5)*.2,s=Math.max(0,Math.min(1,s)),Math.random()<s){e.isDrunk=!0;const n=E(60,180);e.drunkEndTime=this.getAbsoluteTime()+n,e.currentAction=" ",this.log(`[] **${e.name}** ...`,"drama"),this.handleDrunkEvent(e)}}handleDrunkEvent(e){if(e.isDrunk){if(e.drunkEndTime&&this.getAbsoluteTime()>=e.drunkEndTime){e.isDrunk=!1,e.drunkEndTime=void 0,e.currentAction="",this.log(`[] **${e.name}** `,"event");return}if(Math.random()<.7){const t=this.state.chars.filter(s=>s.name!==e.name&&!s.isDrunk&&!s.interactingWith);if(t.length>0){const s=K(t);e.relationships[s.name]||(e.relationships[s.name]={love:0,status:"stranger"}),s.relationships[e.name]||(s.relationships[e.name]={love:0,status:"stranger"});const n=e.relationships[s.name],o=s.relationships[e.name];n.love=Math.min(100,n.love+E(5,15)),o.love=Math.min(100,o.love+E(3,10)),n.status==="stranger"&&n.love>10&&(n.status="friend",o.status="friend");const l=this.state.buildings.find(c=>c.id==="hotel"&&c.isBuilt);if(l&&l.isOpen(Math.floor(this.state.gameTime/60),this.state.gameDay)){const c=l.products||[];if(c.length>0){const u=c.filter(g=>s.money>=g.price);if(u.length>0){const g=K(u),m=Math.floor(g.price);s.money-=m,l.staff.length>0&&(this.distributeRevenue(l,m),l.totalRevenue+=m);let v=.3;if((e.hasTrait("promiscuous")||s.hasTrait("promiscuous"))&&(v=.6),n.love>50&&(v+=.2),Math.random()<v){if(e.sexCount=(e.sexCount||0)+1,s.sexCount=(s.sexCount||0)+1,e.happiness=Math.min(100,e.happiness+E(10,20)),s.happiness=Math.min(100,s.happiness+E(8,15)),n.love=Math.min(100,n.love+E(5,10)),o.love=Math.min(100,o.love+E(5,10)),Math.random()<.3&&!e.pregnant&&!s.pregnant){const h=Math.random()<.5?e:s,f=h===e?s:e;h.contraceptives<=0&&(h.pregnant={father:f.name,dueDate:this.getAbsoluteTime()+403200},this.log(`[] **${h.name}**  **${f.name}** `,"drama"))}this.log(`[] **${s.name}**  **${e.name}** ${g.name}...`,"drama")}else this.log(`[] **${s.name}**  **${e.name}** ${g.name}`,"event");e.currentAction=`  ${s.name} `,s.currentAction=`  ${e.name} `,e.interactingWith=s.name,s.interactingWith=e.name}else this.handleSleepOnStreet(e)}else this.handleSleepOnStreet(e)}else this.handleSleepOnStreet(e)}else this.handleSleepOnStreet(e)}else this.handleSleepOnStreet(e)}}handleSleepOnStreet(e){if(e.currentAction=" ",e.happiness=Math.max(0,e.happiness-E(5,15)),Math.random()<.3){const t=K(this.state.chars.filter(s=>s.name!==e.name));if(t){e.relationships[t.name]||(e.relationships[t.name]={love:0,status:"stranger"}),t.relationships[e.name]||(t.relationships[e.name]={love:0,status:"stranger"});const s=e.relationships[t.name],n=t.relationships[e.name];Math.random()<.5?(s.love=Math.min(100,s.love+E(3,8)),n.love=Math.min(100,n.love+E(2,5)),e.happiness=Math.min(100,e.happiness+E(3,8)),this.log(`[] **${t.name}**  **${e.name}**`,"event")):(s.love=Math.max(0,s.love-E(2,5)),n.love=Math.max(0,n.love-E(1,3)),this.log(`[] **${t.name}**  **${e.name}**`,"drama"))}}else this.log(`[] **${e.name}** ...`,"drama")}updateRelationshipStatus(e,t,s,n){s.status==="stranger"&&s.love>10?(s.status="friend",n.status="friend"):s.status==="friend"&&s.love>60&&s.status==="friend"&&n.status==="friend"&&(s.status="bestfriend",n.status="bestfriend")}checkRomanceEvent(e,t,s,n,o){if(!e.partner&&!t.partner&&s.love>65&&s.status!=="spouse"&&s.status!=="lover"){let l=.25;if(o.effect==="romance"&&(l=.4),e.hasTrait("romantic")&&(l*=1.8),e.hasTrait("impulsive")&&(l*=1.5),e.hasTrait("conservative")&&(l*=.5),e.hasTrait("rational")&&(l*=.7),l=Math.min(.9,l),Math.random()<l){let c=0;t.hasTrait("romantic")&&(c+=15),t.hasTrait("impulsive")&&(c+=10),t.hasTrait("conservative")&&(c-=15),t.hasTrait("rational")&&(c-=10);const u=n.love;n.love=Math.min(100,Math.max(0,n.love+c));const g=t.decideProposal(e.name,"confess");return n.love=u,g?(e.partner=t.name,t.partner=e.name,s.status="lover",n.status="lover",e.happiness=Math.min(100,e.happiness+20),t.happiness=Math.min(100,t.happiness+20),this.log(`[]  ${o.name}${e.name}  ${t.name} ... ****`,"love")):(e.happiness=Math.max(0,e.happiness-20),s.love=Math.max(0,s.love-10),this.log(`[] ${e.name}  ${t.name} ...`,"reject")),!0}}if((e.partner||t.partner)&&s.love>60&&s.status!=="lover"&&s.status!=="spouse"&&s.status!=="mistress"){let l=.05;if((e.hasTrait("promiscuous")||t.hasTrait("promiscuous"))&&(l*=3),(o.effect==="chaos"||o.effect==="ntr")&&Math.random()<l&&t.decideProposal(e.name,"confess")){s.status="mistress",n.status="mistress",e.happiness=Math.min(100,e.happiness+15),t.happiness=Math.min(100,t.happiness+15);const c=e.partner?`${e.name}${e.partner}`:"",u=t.partner?`${t.name}${t.partner}`:"";return this.log(`[]  ${o.name}${e.name}  ${t.name} ${c}${u}`,"drama"),!0}}if(e.partner===t.name&&s.love>90&&s.status!=="spouse"){let l=.1;if(o.effect==="marriage"&&(l=.5),Math.random()<l)return t.decideProposal(e.name,"propose")?(s.status="spouse",n.status="spouse",e.happiness=100,t.happiness=100,this.state.townMoney+=1e3,this.log(`[] ${e.name}  ${t.name} `,"drama")):(e.happiness=Math.max(0,e.happiness-30),this.log(`[] ${e.name} ${t.name} `,"reject")),!0}if(o.effect==="ntr"&&s.love>50){let l=.02;if((s.status==="lover"||s.status==="spouse"||s.status==="mistress")&&(l=.05),l+=(s.love-50)/2e3,(e.hasTrait("promiscuous")||t.hasTrait("promiscuous"))&&(l*=2.5),Math.random()<l){s.intimacyCount=(s.intimacyCount||0)+1,n.intimacyCount=(n.intimacyCount||0)+1,e.sexCount=(e.sexCount||0)+1,t.sexCount=(t.sexCount||0)+1,s.love=Math.min(100,s.love+3),n.love=Math.min(100,n.love+3),e.happiness=Math.min(100,e.happiness+10),t.happiness=Math.min(100,t.happiness+10);const c=s.status==="spouse"?"":s.status==="lover"?"":s.status==="mistress"?"":"";this.log(`[] ${e.name}  ${t.name} ... (${c}${s.intimacyCount})`,"drama");const u=Math.random()<.5?e:t,g=u===e?t:e;let m=!1;if(u.contraceptives>0&&(!(u.partner===g.name||s.status==="lover"||s.status==="spouse")||Math.random()<.3)&&(u.contraceptives--,m=!0),!m&&!u.pregnant&&Math.random()<.15){const h=E(7,14);u.pregnant={father:g.name,dueDate:this.getAbsoluteTime()+h*1440},this.log(`[] ${u.name}  ${g.name}...`,"drama")}if(e.partner&&e.partner!==t.name&&Math.random()<.3){const v=this.state.chars.find(h=>h.name===e.partner);v&&(v.happiness=0,e.partner=null,v.partner=null,e.relationships[v.name].status="ex",v.relationships[e.name].status="ex",v.relationships[e.name].love=0,this.log(`[] ${v.name} `,"reject"))}return!0}}if(e.partner&&e.partner!==t.name&&s.love>60&&(o.effect==="chaos"||o.effect==="ntr")&&Math.random()<.05){if(this.log(`[] ${e.name}  ${e.partner} ${o.name}  ${t.name} `,"drama"),Math.random()<.4){const l=this.state.chars.find(c=>c.name===e.partner);l&&(l.happiness=0,e.partner=null,l.partner=null,e.relationships[l.name].status="ex",l.relationships[e.name].status="ex",l.relationships[e.name].love=0,this.log(`[] ${l.name} `,"reject"))}return!0}return!1}updateTimeSpeed(e){if(e<.1){this.log(" 0.1","error");return}if(e>1e3){this.log(" 1000","error");return}this.state.timeSpeed=e,this.log(`  ${e}x`,"info")}exportSave(){if(typeof window>"u"||typeof localStorage>"u"||typeof document>"u"){this.log(" ","error");return}try{this.manualSave();const e=localStorage.getItem("happyTownV2_Save");if(!e){this.log(" ","error");return}const s={...JSON.parse(e),exportTime:new Date().toISOString(),version:ye,gameName:"",exportVersion:ye},n=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),o=URL.createObjectURL(n),l=document.createElement("a"),c=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5);l.href=o,l.download=`catcandy-town-save-${c}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o),this.log(` : catcandy-town-save-${c}.json ( ${ye})`,"info")}catch(e){console.error("",e),this.log(` ${e.message}`,"error")}}importSave(e){if(typeof window>"u"||typeof FileReader>"u"){this.log(" ","error");return}if(!e.name.endsWith(".json")){this.log(" JSON","error");return}const t=new FileReader;t.onload=s=>{var n;try{const o=(n=s.target)==null?void 0:n.result,l=this.loadFromJSON(o);l.success?(this.stop(),this.checkAndAddNewChars(),this.autoSave(),this.log(" ","info"),this.start()):this.log(` ${l.message}`,"error")}catch(o){console.error("",o),this.log(` ${o.message}
`,"error")}},t.onerror=()=>{this.log(" ","error")},t.readAsText(e)}resetData(){if(typeof window>"u"||typeof localStorage>"u"){this.log(" ","error");return}typeof confirm<"u"&&confirm("")&&(localStorage.removeItem("happyTownV2_Save"),this.stop(),this.initNewGame(),this.log(" ","info"),typeof setTimeout<"u"&&setTimeout(()=>{this.start()},100))}trySexualRelief(e){if(!e.hasTrait("promiscuous"))return!1;const t=e.personality.name===""||e.hasTrait("loner"),s=e.personality.name===""||e.personality.name==="";if((t||s)&&Math.random()<.7)return this.doMasturbation(e),!0;if(Math.random()<.6){const n=this.findFWB(e);if(n)return this.startFWBRelief(e,n),!0}return Math.random()<.4?(this.doMasturbation(e),!0):!1}doMasturbation(e){e.isRelieving=!0;const t=Math.random()<.5?"":"";e.currentAction=` ${t}`,e.sexualDesire=Math.max(0,e.sexualDesire-50),e.masturbationCount=(e.masturbationCount||0)+1;const s=E(30,60);e.relievingEndTime=this.getAbsoluteTime()+s,e.masturbationMethod=t,this.log(`[${t}] **${e.name}** ${t}...`,"drama")}findFWB(e){if(e.fwbList.length>0){const s=e.fwbList.map(n=>this.state.chars.find(o=>o.name===n)).filter(n=>n!==void 0&&!n.isRelieving&&n.name!==e.name);if(s.length>0)return K(s)}const t=this.state.chars.filter(s=>{var n;return s.name!==e.name&&s.hasTrait("promiscuous")&&!s.isRelieving&&!e.fwbList.includes(s.name)&&(((n=e.relationships[s.name])==null?void 0:n.love)||0)>40});if(t.length>0){const s=K(t);e.fwbList.includes(s.name)||e.fwbList.push(s.name),s.fwbList.includes(e.name)||s.fwbList.push(e.name),e.relationships[s.name]||(e.relationships[s.name]={love:0,status:"stranger"}),s.relationships[e.name]||(s.relationships[e.name]={love:0,status:"stranger"});const n=e.relationships[s.name],o=s.relationships[e.name];return n.status!=="fwb"&&n.status!=="mistress"&&n.status!=="lover"&&n.status!=="spouse"&&(n.status="fwb",o.status="fwb"),this.log(`[] **${e.name}**  **${s.name}** `,"drama"),s}if(Math.random()<.3){const s=this.state.chars.filter(n=>{var o;return n.name!==e.name&&!n.hasTrait("promiscuous")&&!n.isRelieving&&!e.fwbList.includes(n.name)&&(((o=e.relationships[n.name])==null?void 0:o.love)||0)>30});if(s.length>0){const n=K(s);if(this.persuadeToFWB(e,n))return n}}return null}persuadeToFWB(e,t){var m;let s=0;const n=((m=e.relationships[t.name])==null?void 0:m.love)||0;s+=n*.3;const o=e.personality;let l=0;switch(o.name){case"":l=20;break;case"":l=15;break;case"":l=15;break;case"":l=10;break;case"":l=25;break;case"":l=-10;break;case"":l=-15;break;case"":l=-10;break;default:l=0}s+=l;const c=t.personality;let u=0;switch(c.name){case"":u=20;break;case"":u=15;break;case"":u=10;break;case"":u=10;break;case"":u=-25;break;case"":u=-20;break;case"":u=-15;break;case"":u=-10;break;case"":u=-5;break;default:u=0}if(s+=u,e.hasTrait("social")&&(s+=10),e.hasTrait("impulsive")&&(s+=5),t.hasTrait("impulsive")&&(s+=15),t.hasTrait("romantic")&&(s+=10),t.hasTrait("conservative")&&(s-=20),t.hasTrait("rational")&&(s-=15),t.hasTrait("loner")&&(s-=10),s+=(t.happiness-50)*.2,t.sexualDesire>50&&(s+=(t.sexualDesire-50)*.3),s+=E(-10,10),s>=50){e.fwbList.includes(t.name)||e.fwbList.push(t.name),t.fwbList.includes(e.name)||t.fwbList.push(e.name),e.relationships[t.name]||(e.relationships[t.name]={love:0,status:"stranger"}),t.relationships[e.name]||(t.relationships[e.name]={love:0,status:"stranger"});const v=e.relationships[t.name],h=t.relationships[e.name];return v.status!=="fwb"&&v.status!=="mistress"&&v.status!=="lover"&&v.status!=="spouse"&&(v.status="fwb",h.status="fwb"),v.love=Math.min(100,v.love+E(3,8)),h.love=Math.min(100,h.love+E(3,8)),t.happiness=Math.max(0,t.happiness-E(3,8)),this.log(`[] **${e.name}**  **${t.name}** `,"drama"),!0}else return e.relationships[t.name]&&(e.relationships[t.name].love=Math.max(0,e.relationships[t.name].love-E(5,10))),t.relationships[e.name]&&(t.relationships[e.name].love=Math.max(0,t.relationships[e.name].love-E(3,8))),e.happiness=Math.max(0,e.happiness-E(3,5)),this.log(`[] **${e.name}**  **${t.name}** ...`,"reject"),!1}startFWBRelief(e,t){e.isRelieving=!0,e.relievingWith=t.name,t.isRelieving=!0,t.relievingWith=e.name,e.currentAction=`  ${t.name} `,t.currentAction=`  ${e.name} `,e.sexualDesire=Math.max(0,e.sexualDesire-60),t.sexualDesire=Math.max(0,t.sexualDesire-60),e.sexCount=(e.sexCount||0)+1,t.sexCount=(t.sexCount||0)+1;const s=E(40,80),n=this.getAbsoluteTime()+s;e.relievingEndTime=n,t.relievingEndTime=n,e.relationships[t.name]||(e.relationships[t.name]={love:0,status:"fwb"}),t.relationships[e.name]||(t.relationships[e.name]={love:0,status:"fwb"});const o=e.relationships[t.name],l=t.relationships[e.name];o.love=Math.min(100,o.love+E(2,5)),l.love=Math.min(100,l.love+E(2,5)),this.log(`[] **${e.name}**  **${t.name}** ...`,"drama")}handleSexualRelief(e){if(e.relievingEndTime&&this.getAbsoluteTime()>=e.relievingEndTime){if(e.isRelieving=!1,e.relievingWith){const t=this.state.chars.find(s=>s.name===e.relievingWith);t&&t.isRelieving&&t.relievingWith===e.name&&(t.isRelieving=!1,t.relievingWith=void 0,t.relievingEndTime=void 0,t.happiness=Math.min(100,t.happiness+E(8,15)),t.currentAction=""),e.happiness=Math.min(100,e.happiness+E(8,15)),this.log(`[] **${e.name}**  **${e.relievingWith}** `,"event")}else{const t=e.masturbationMethod||(Math.random()<.5?"":"");e.happiness=Math.min(100,e.happiness+E(5,10)),this.log(`[] **${e.name}** ${t}`,"event"),delete e.masturbationMethod}e.relievingWith=void 0,e.relievingEndTime=void 0,e.currentAction="";return}if(e.interactingWith&&e.interactingWith!==e.relievingWith){if(e.isRelieving=!1,e.relievingWith){const t=this.state.chars.find(s=>s.name===e.relievingWith);t&&t.isRelieving&&t.relievingWith===e.name&&(t.isRelieving=!1,t.relievingWith=void 0,t.relievingEndTime=void 0,t.happiness=Math.max(0,t.happiness-E(5,10)),t.currentAction="")}e.relievingWith=void 0,e.relievingEndTime=void 0,e.happiness=Math.max(0,e.happiness-E(5,10)),e.currentAction="",this.log(`[] **${e.name}** `,"drama")}}tryLearnTrait(e,t,s){if(e.traits.length>0)return;let n=0,o=[];switch(t){case"work":n=.05,o=["hardworking","lazy","ambitious","content"];break;case"social":n=.08,o=["social","loner","romantic","conservative","impulsive","rational"];break;case"build":n=.06,o=["hardworking","money-loving","ambitious"];break;case"rest":n=.04,o=["sleepy","content","generous","stingy"];break}if(Math.random()<n){const l=Se.filter(m=>!we([],m.id));if(l.length===0)return;let c;const u=l.filter(m=>o.includes(m.id));u.length>0&&Math.random()<.7?c=K(u):c=K(l),e.traits.push(c);const g={work:"",social:"",build:"",rest:""};this.log(`[] **${e.name}** ${g[t]}**${c.name}**`,"event")}}createNewCharacter(){if(typeof window>"u"||typeof prompt>"u"){this.log(" ","error");return}const e=prompt("");if(!e||e.trim()==="")return;const t=e.trim();if(this.state.chars.find(n=>n.name===t)){this.log(" ","error");return}const s=new _e(t);this.state.chars.forEach(n=>{s.relationships[n.name]={love:0,status:"stranger"},n.relationships[t]={love:0,status:"stranger"}}),this.state.chars.push(s),this.log(`[]  **${t}** `,"event"),this.autoSave()}}const W=new So,wo={class:"char-header"},xo={class:"char-name-section"},Mo={class:"char-name"},To={class:"personality-badge"},Co={class:"char-money"},Po={key:0,class:"traits-section"},Lo=["title"],Io={key:1,class:"job-info"},Do={class:"job-text"},Bo={class:"job-building"},Vo={key:2,class:"job-info no-job"},Ao={class:"job-text"},No={class:"hp-bar-container"},Eo={key:3,class:"sexual-desire-bar-container"},jo={class:"sexual-desire-label"},Ho={class:"char-action"},Oo=L({__name:"CharacterCard",props:{char:{}},emits:["click"],setup(a,{emit:e}){const t=a,s=e,n=C(()=>t.char.currentAction.includes("")?"border-l-yellow":t.char.currentAction.includes("")?"border-l-gray":"border-l-red"),o=C(()=>`${t.char.happiness}%`),l=C(()=>`${t.char.sexualDesire||0}%`),c=C(()=>{if(t.char.prostitute){const g=W.state.buildings.find(m=>m.id===t.char.prostitute.buildingId);return{text:" ",building:(g==null?void 0:g.name)||"",hasJob:!0}}if(t.char.job){const g=W.state.buildings.find(m=>m.id===t.char.job.buildingId);return{text:t.char.job.role,building:(g==null?void 0:g.name)||"",hasJob:!0}}return{text:"",building:"",hasJob:!1}}),u=()=>{s("click")};return(g,m)=>(r(),d("div",{class:O(["char-card",n.value]),onClick:u},[i("div",wo,[i("div",xo,[i("strong",Mo,b(a.char.name),1),i("span",To,b(a.char.personality.name),1)]),i("div",Co,""+b(a.char.money),1)]),a.char.traits&&a.char.traits.length>0?(r(),d("div",Po,[(r(!0),d(j,null,R(a.char.traits,v=>(r(),d("span",{key:v.id,class:"trait-badge",title:v.desc},b(v.name),9,Lo))),128))])):S("",!0),c.value.hasJob?(r(),d("div",Io,[i("span",Do," "+b(c.value.text),1),i("span",Bo,b(c.value.building),1)])):(r(),d("div",Vo,[i("span",Ao," "+b(c.value.text),1)])),i("div",No,[i("div",{class:"hp-bar-fill",style:X({width:o.value})},null,4)]),a.char.hasTrait("promiscuous")?(r(),d("div",Eo,[i("div",{class:"sexual-desire-bar-fill",style:X({width:l.value})},null,4),i("span",jo," "+b(a.char.sexualDesire||0),1)])):S("",!0),i("div",Ho,b(a.char.currentAction),1)],2))}}),Ro=B(Oo,[["__scopeId","data-v-bd3ae4e8"]]),Fo={class:"building-icon"},Wo={class:"building-info"},Go={class:"building-name"},Uo={class:"building-desc"},Jo={key:0,class:"building-hours"},zo={key:1,class:"build-progress"},qo={class:"progress-bar"},Ko={class:"progress-text"},Yo={key:3,class:"building-level-info"},Xo={class:"level-header"},Qo={class:"level-badge"},Zo={key:0,class:"company-funds"},el={key:0,class:"upgrade-progress"},tl={class:"upgrade-progress-bar"},sl={class:"upgrade-progress-text"},nl={key:4,class:"building-jobs"},al=L({__name:"BuildingCard",props:{build:{}},emits:["click"],setup(a,{emit:e}){const t=a,s=e,n=()=>{s("click")},o=C(()=>t.build.isBuilt?100:Math.floor(t.build.currentProgress/t.build.totalCost*100)),l=C(()=>t.build.isBuilt?"built":t.build.currentProgress>0?"building":""),c=C(()=>t.build.isBuilt?Math.floor((t.build.totalCost||0)*.5*(t.build.level||1)):0),u=C(()=>{if(!t.build.isBuilt||c.value===0)return 0;const h=t.build.companyFunds||0;return Math.min(100,Math.floor(h/c.value*100))}),g=C(()=>{if(!t.build)return"";const h=t.build.open||0,f=t.build.close||24;if(h===0&&f===24)return"24";const T=M=>`${M.toString().padStart(2,"0")}:00`;return f<h?`${T(h)} - ${T(f)} ()`:`${T(h)} - ${T(f)}`}),m=C(()=>{if(!t.build.isBuilt)return!1;const h=Math.floor(W.state.gameTime/60),f=W.state.gameDay;return t.build.isOpen(h,f)}),v=C(()=>t.build.isBuilt?m.value?" ":" ":"");return(h,f)=>(r(),d("div",{class:O(["building-card",l.value]),onClick:n},[i("div",Fo,b(a.build.name.split(" ")[0]),1),i("div",Wo,[i("div",Go,b(a.build.name),1),i("div",Uo,b(a.build.desc),1),a.build.isBuilt?(r(),d("div",Jo,"  "+b(g.value),1)):S("",!0),a.build.isBuilt?(r(),d("div",{key:2,class:O(["building-status",{"status-open":m.value,"status-closed":!m.value}])},b(v.value),3)):(r(),d("div",zo,[i("div",qo,[i("div",{class:"progress-fill",style:X({width:o.value+"%"})},null,4)]),i("div",Ko,b(o.value)+"% ("+b(a.build.currentProgress)+"/"+b(a.build.totalCost)+")",1)])),a.build.isBuilt?(r(),d("div",Yo,[i("div",Xo,[i("span",Qo," "+b(a.build.level||1)+" ",1),a.build.staff.length>0?(r(),d("span",Zo,""+b(a.build.companyFunds||0),1)):S("",!0)]),a.build.staff.length>0?(r(),d("div",el,[i("div",tl,[i("div",{class:"upgrade-progress-fill",style:X({width:u.value+"%"})},null,4)]),i("div",sl,b(u.value)+"% ("+b(a.build.companyFunds||0)+"/"+b(c.value)+") ",1)])):S("",!0)])):S("",!0),a.build.jobs.length>0?(r(),d("div",nl," : "+b(a.build.jobs.join(", "))+" ("+b(a.build.staff.length)+"/"+b(a.build.jobs.length)+") ",1)):S("",!0)])],2))}}),il=B(al,[["__scopeId","data-v-e4b9502e"]]),ol={class:"log-panel"},ll={class:"log-list"},rl={class:"time"},cl={class:"msg"},ul=L({__name:"LogPanel",props:{logs:{}},setup(a){const e=t=>t?`log-${t}`:"log-default";return(t,s)=>(r(),d("div",ol,[s[0]||(s[0]=i("h3",{class:"log-title"}," ",-1)),i("div",ll,[(r(!0),d(j,null,R(a.logs,n=>(r(),d("div",{key:n.id,class:O(["log-item",e(n.type)])},[i("span",rl,"["+b(n.time)+"]",1),i("span",cl,b(n.message),1)],2))),128))])]))}}),dl=B(ul,[["__scopeId","data-v-28690e6b"]]),hl={class:"control-panel"},fl={class:"resources"},ml={class:"res-item"},vl={class:"res-value"},pl={class:"res-item"},gl={class:"res-value"},bl={class:"res-item"},yl={class:"res-value"},$l={class:"actions"},kl={class:"time-speed-control"},_l=["value"],Sl={class:"speed-display"},wl={class:"button-group"},xl=["title"],Ml=L({__name:"ControlPanel",emits:["show-relationship-tree"],setup(a,{emit:e}){const t=C(()=>W.state.townMoney),s=C(()=>W.state.timeSpeed),n=C(()=>`${s.value}x`),o=A(s.value.toString()),l=_=>{W.updateTimeSpeed(_),o.value=_.toString()},c=()=>{const _=parseFloat(o.value);isNaN(_)||l(_)},u=A(null),g=()=>{W.exportSave()},m=()=>{var _;(_=u.value)==null||_.click()},v=_=>{var q;const V=_.target,H=(q=V.files)==null?void 0:q[0];H&&(W.importSave(H),V.value="")},h=()=>{W.resetData()},f=()=>{W.createNewCharacter()},T=e,M=()=>{T("show-relationship-tree")},k=$e("isDarkMode",A({value:!1})),y=$e("toggleDarkMode",()=>{});return(_,V)=>(r(),d("div",hl,[i("div",fl,[i("div",ml,[V[6]||(V[6]=i("span",{class:"res-name"}," :",-1)),i("span",vl,b(t.value),1)]),i("div",pl,[V[7]||(V[7]=i("span",{class:"res-name"}," :",-1)),i("span",gl,b(p(W).state.totalDaysPassed),1)]),i("div",bl,[V[8]||(V[8]=i("span",{class:"res-name"}," :",-1)),i("span",yl,b(p(W).formatTime(p(W).state.gameTime)),1)])]),i("div",$l,[i("div",kl,[V[9]||(V[9]=i("label",{class:"speed-label"}," :",-1)),i("input",{type:"range",min:.5,max:20,step:.5,value:s.value,onInput:V[0]||(V[0]=H=>l(parseFloat(H.target.value))),class:"speed-slider"},null,40,_l),i("span",Sl,b(n.value),1),At(i("input",{type:"number",min:.1,max:1e3,step:.1,"onUpdate:modelValue":V[1]||(V[1]=H=>o.value=H),onChange:c,onBlur:c,class:"speed-custom",placeholder:""},null,544),[[Nt,o.value]])]),i("div",wl,[i("button",{onClick:V[2]||(V[2]=(...H)=>p(y)&&p(y)(...H)),class:"theme-toggle",title:p(k).value?"":""},b(p(k).value?"":""),9,xl),p(W).state.isPlaying?(r(),d("button",{key:1,onClick:V[4]||(V[4]=H=>p(W).stop()),class:"btn-pause"}," ")):(r(),d("button",{key:0,onClick:V[3]||(V[3]=H=>p(W).start()),class:"btn-start"}," ")),i("button",{onClick:V[5]||(V[5]=H=>p(W).manualSave()),class:"btn-save"}," "),i("button",{onClick:g,class:"btn-export"}," "),i("button",{onClick:m,class:"btn-import"}," "),i("button",{onClick:f,class:"btn-add-char",title:""}," "),i("button",{onClick:M,class:"btn-relationship",title:""}," "),i("button",{onClick:h,class:"btn-reset",title:""}," "),i("input",{ref_key:"importFileInput",ref:u,type:"file",accept:".json",onChange:v,style:{display:"none"}},null,544)])])]))}}),Tl=B(Ml,[["__scopeId","data-v-86b68db8"]]),Cl={class:"profile-modal-content"},Pl={class:"profile-header"},Ll={key:0,class:"profile-content"},Il={class:"profile-section"},Dl={class:"profile-stats-grid"},Bl={class:"profile-stat-item"},Vl={class:"profile-stat-value"},Al={class:"profile-stat-item"},Nl={class:"profile-stat-value"},El={class:"profile-stat-item"},jl={class:"profile-stat-value"},Hl={class:"profile-stat-item"},Ol={class:"profile-stat-value"},Rl={key:0,class:"profile-stat-item"},Fl={class:"profile-stat-value"},Wl={key:0,class:"sexual-desire-display",style:{"margin-top":"12px"}},Gl={class:"sexual-desire-bar-wrapper"},Ul={class:"sexual-desire-bar-bg"},Jl={class:"sexual-desire-text"},zl={key:0,class:"sexual-desire-status",style:{"margin-top":"6px","font-size":"12px",color:"#ec4899"}},ql={key:1,class:"fwb-list",style:{"margin-top":"8px"}},Kl={style:{display:"flex","flex-wrap":"wrap",gap:"4px"}},Yl={class:"profile-section"},Xl={class:"profile-row"},Ql={class:"profile-row"},Zl={class:"profile-value"},er={class:"profile-row"},tr={class:"profile-section"},sr={class:"profile-row"},nr={class:"profile-section"},ar={class:"profile-row"},ir={key:0,style:{"margin-top":"10px"}},or={class:"profile-relations"},lr={style:{color:"#666"}},rr={class:"profile-section"},cr={class:"profile-row"},ur={class:"profile-row"},dr={class:"profile-value"},hr={key:0,style:{"margin-top":"10px"}},fr={class:"profile-label"},mr={class:"profile-value",style:{color:"#666"}},vr={key:1,class:"profile-row"},pr={key:2,class:"profile-row",style:{"margin-top":"10px","border-top":"1px solid #eee","padding-top":"8px"}},gr={class:"profile-value"},br={class:"profile-section"},yr={class:"profile-row"},$r={class:"profile-value"},kr={class:"profile-row"},_r={class:"profile-value"},Sr={class:"profile-row"},wr={class:"profile-value"},xr={class:"profile-row"},Mr={class:"profile-value"},Tr={class:"profile-row"},Cr={class:"profile-value"},Pr={class:"profile-row",style:{"border-top":"1px solid #eee","padding-top":"8px","margin-top":"8px"}},Lr={class:"profile-value",style:{"font-weight":"bold",color:"#27ae60"}},Ir=L({__name:"CharacterProfile",props:{character:{},visible:{type:Boolean}},emits:["close"],setup(a,{emit:e}){const t=a,s=e,n=()=>{s("close")},o=C(()=>{if(!t.character)return"#999";const v=t.character.personality.name;return v===""||v===""?"#e74c3c":v===""||v===""||v===""?"#27ae60":v===""?"#3498db":"#999"}),l=C(()=>{if(!t.character)return null;if(t.character.prostitute){const v=W.state.buildings.find(h=>h.id===t.character.prostitute.buildingId);return{type:"prostitute",text:`  (${v?v.name:""})`,color:"#e74c3c"}}if(t.character.job){const v=W.state.buildings.find(h=>h.id===t.character.job.buildingId);return{type:"job",text:`${t.character.job.role} (${v?v.name:""})`,color:"#333"}}return{type:"none",text:"",color:"#999"}}),c=C(()=>t.character?Object.entries(t.character.relationships).map(([v,h])=>({name:v,...h})).filter(v=>v.love>30||v.status!=="stranger").sort((v,h)=>h.love-v.love).slice(0,5):[]),u=v=>({spouse:{text:"",color:"#e84393"},lover:{text:"",color:"#ff7675"},mistress:{text:"",color:"#ff8c00"},fwb:{text:"",color:"#ec4899"},bestfriend:{text:"",color:"#3498db"},ex:{text:"",color:"#636e72"},friend:{text:"",color:"#74b9ff"}})[v]||{text:"",color:"#999"},g=C(()=>{var h;return(h=t.character)!=null&&h.pregnant?Math.max(0,Math.ceil((t.character.pregnant.dueDate-W.getAbsoluteTime())/1440)):0}),m=v=>{const h=W.state.chars.find(T=>T.name===v);if(!h)return"";if(!h.birthTime)return"";const f=Math.floor((W.state.gameTime-h.birthTime)/1440);return f>0?`${f}`:""};return(v,h)=>{var f,T,M;return a.visible?(r(),d("div",{key:0,class:"modal-overlay",onClick:ke(n,["self"])},[i("div",Cl,[i("div",Pl,[i("h3",null," "+b((f=a.character)==null?void 0:f.name)+" ",1),i("button",{class:"modal-close",onClick:n},"")]),a.character?(r(),d("div",Ll,[i("div",Il,[h[7]||(h[7]=i("h4",null," ",-1)),i("div",Dl,[i("div",Bl,[i("div",Vl,b(a.character.happiness),1),h[0]||(h[0]=i("div",{class:"profile-stat-label"},"",-1))]),i("div",Al,[i("div",Nl,""+b(a.character.money),1),h[1]||(h[1]=i("div",{class:"profile-stat-label"},"",-1))]),i("div",El,[i("div",jl,b(a.character.credibility),1),h[2]||(h[2]=i("div",{class:"profile-stat-label"},"",-1))]),i("div",Hl,[i("div",Ol,b(a.character.currentAction||""),1),h[3]||(h[3]=i("div",{class:"profile-stat-label"},"",-1))]),a.character.hasTrait("promiscuous")?(r(),d("div",Rl,[i("div",Fl," "+b(a.character.sexualDesire||0),1),h[4]||(h[4]=i("div",{class:"profile-stat-label"},"",-1))])):S("",!0)]),a.character.hasTrait("promiscuous")?(r(),d("div",Wl,[h[6]||(h[6]=i("div",{class:"profile-label",style:{"margin-bottom":"6px"}},"",-1)),i("div",Gl,[i("div",Ul,[i("div",{class:"sexual-desire-bar-fill",style:X({width:`${a.character.sexualDesire||0}%`})},null,4)]),i("span",Jl,b(a.character.sexualDesire||0)+"/100",1)]),a.character.isRelieving?(r(),d("div",zl,"  "+b(a.character.relievingWith?` ${a.character.relievingWith} `:""),1)):S("",!0),a.character.fwbList&&a.character.fwbList.length>0?(r(),d("div",ql,[h[5]||(h[5]=i("div",{class:"profile-label",style:{"margin-bottom":"4px","font-size":"12px"}},"",-1)),i("div",Kl,[(r(!0),d(j,null,R(a.character.fwbList,k=>(r(),d("span",{key:k,class:"fwb-badge"},"  "+b(k),1))),128))])])):S("",!0)])):S("",!0)]),i("div",Yl,[h[11]||(h[11]=i("h4",null," ",-1)),i("div",Xl,[h[8]||(h[8]=i("span",{class:"profile-label"},"",-1)),i("span",{class:"profile-value",style:X({color:o.value})},b(a.character.personality.name),5)]),i("div",Ql,[h[9]||(h[9]=i("span",{class:"profile-label"},"",-1)),i("span",Zl,b(a.character.personality.desc),1)]),i("div",er,[h[10]||(h[10]=i("span",{class:"profile-label"},"",-1)),i("span",{class:"profile-value",style:X({color:a.character.traits.length>0?"#333":"#999"})},b(a.character.traits.length>0?a.character.traits.map(k=>k.name).join(""):""),5)])]),i("div",tr,[h[13]||(h[13]=i("h4",null," ",-1)),i("div",sr,[h[12]||(h[12]=i("span",{class:"profile-label"},"",-1)),i("span",{class:"profile-value",style:X({color:(T=l.value)==null?void 0:T.color})},b((M=l.value)==null?void 0:M.text),5)])]),i("div",nr,[h[16]||(h[16]=i("h4",null," ",-1)),i("div",ar,[h[14]||(h[14]=i("span",{class:"profile-label"},"",-1)),i("span",{class:"profile-value",style:X({color:a.character.partner?"#ff6b6b":"#999"})},b(a.character.partner?` ${a.character.partner}`:""),5)]),c.value.length>0?(r(),d("div",ir,[h[15]||(h[15]=i("div",{class:"profile-label",style:{"margin-bottom":"8px"}},"",-1)),i("div",or,[(r(!0),d(j,null,R(c.value,k=>(r(),d("div",{key:k.name,class:"profile-relation-item"},[i("span",null,[i("span",{style:X({color:u(k.status).color,fontWeight:"bold"})},b(u(k.status).text),5),he(" "+b(k.name),1)]),i("span",lr,""+b(k.love),1)]))),128))])])):S("",!0)]),i("div",rr,[h[22]||(h[22]=i("h4",null," ",-1)),i("div",cr,[h[17]||(h[17]=i("span",{class:"profile-label"},"",-1)),i("span",{class:"profile-value",style:X({color:a.character.pregnant?"#e74c3c":"#999"})},b(a.character.pregnant?` ${a.character.pregnant.father}${g.value}`:""),5)]),i("div",ur,[h[18]||(h[18]=i("span",{class:"profile-label"},"",-1)),i("span",dr," "+b(a.character.contraceptives||0)+" ",1)]),a.character.children&&a.character.children.length>0?(r(),d("div",hr,[h[19]||(h[19]=i("div",{class:"profile-label",style:{"margin-bottom":"8px"}},"",-1)),(r(!0),d(j,null,R(a.character.children,k=>(r(),d("div",{key:k,class:"profile-row"},[i("span",fr," "+b(k),1),i("span",mr,b(m(k)),1)]))),128))])):(r(),d("div",vr,[...h[20]||(h[20]=[i("span",{class:"profile-label"},"",-1),i("span",{class:"profile-value",style:{color:"#999"}},"",-1)])])),a.character.parents?(r(),d("div",pr,[h[21]||(h[21]=i("span",{class:"profile-label"},"",-1)),i("span",gr," "+b(a.character.parents.father)+" &  "+b(a.character.parents.mother),1)])):S("",!0)]),i("div",br,[h[29]||(h[29]=i("h4",null," ",-1)),i("div",yr,[h[23]||(h[23]=i("span",{class:"profile-label"},"",-1)),i("span",$r,""+b(a.character.incomeStats.work),1)]),i("div",kr,[h[24]||(h[24]=i("span",{class:"profile-label"},"",-1)),i("span",_r,""+b(a.character.incomeStats.oddJob),1)]),i("div",Sr,[h[25]||(h[25]=i("span",{class:"profile-label"},"",-1)),i("span",wr,""+b(a.character.incomeStats.streetwalking),1)]),i("div",xr,[h[26]||(h[26]=i("span",{class:"profile-label"},"",-1)),i("span",Mr,""+b(a.character.incomeStats.prostitution),1)]),i("div",Tr,[h[27]||(h[27]=i("span",{class:"profile-label"},"",-1)),i("span",Cr,""+b(a.character.incomeStats.construction),1)]),i("div",Pr,[h[28]||(h[28]=i("span",{class:"profile-label",style:{"font-weight":"bold"}},"",-1)),i("span",Lr,""+b(a.character.incomeStats.total),1)])])])):S("",!0)])])):S("",!0)}}}),Dr=B(Ir,[["__scopeId","data-v-07371934"]]),Br={class:"profile-modal-content"},Vr={class:"profile-header"},Ar={class:"profile-title"},Nr={key:0,class:"profile-content"},Er={class:"profile-section"},jr={class:"profile-row"},Hr={key:0,class:"profile-value",style:{color:"#27ae60"}},Or={key:1,class:"profile-value",style:{color:"#e67e22"}},Rr={class:"profile-row"},Fr={class:"profile-value"},Wr={class:"profile-row"},Gr={class:"profile-value",style:{color:"#3498db","font-weight":"bold"}},Ur={class:"profile-row"},Jr={class:"profile-value"},zr={key:0,class:"profile-row"},qr={class:"profile-value",style:{color:"#27ae60","font-weight":"bold"}},Kr={class:"profile-row"},Yr={class:"profile-value"},Xr={class:"profile-row"},Qr={class:"profile-value"},Zr={key:0,class:"profile-section"},ec={class:"profile-row"},tc={class:"profile-value"},sc={class:"profile-row"},nc={class:"profile-value",style:{color:"#27ae60","font-weight":"bold"}},ac={class:"profile-value",style:{color:"#999","font-size":"12px","margin-left":"8px"}},ic={key:1,class:"profile-section"},oc={key:0,class:"staff-list"},lc={class:"staff-header"},rc={class:"staff-role"},cc={class:"staff-name"},uc={class:"staff-details"},dc={class:"staff-salary"},hc={class:"staff-total"},fc={key:1,class:"profile-row"},mc={key:2,class:"profile-row",style:{"margin-top":"12px","padding-top":"12px","border-top":"1px solid var(--vp-c-divider)"}},vc={class:"profile-value",style:{color:"#27ae60","font-weight":"bold"}},pc={class:"profile-value",style:{color:"#999","font-size":"12px","margin-left":"8px"}},gc={key:2,class:"profile-section"},bc={key:0},yc={key:1},$c={key:2},kc={key:3},_c={class:"products-list"},Sc={class:"product-info"},wc={class:"product-name"},xc={class:"product-price"},Mc={key:3,class:"profile-section"},Tc={class:"profile-row"},Cc={class:"profile-value"},Pc=L({__name:"BuildingProfile",props:{building:{},visible:{type:Boolean}},emits:["close"],setup(a,{emit:e}){const t=a,s=e,n=()=>{s("close")},o=C(()=>{if(!t.building||!t.building.isBuilt||!t.building.revenueHistory||t.building.revenueHistory.length===0)return 0;const h=t.building.revenueHistory.reduce((f,T)=>f+T,0);return Math.floor(h/t.building.revenueHistory.length)}),l=C(()=>{if(!t.building||!t.building.isBuilt||!t.building.staffIncomeHistory||t.building.staffIncomeHistory.length===0)return 0;const h=t.building.staffIncomeHistory.reduce((f,T)=>f+T,0);return Math.floor(h/t.building.staffIncomeHistory.length)}),c=C(()=>{if(!t.building||!t.building.staff||t.building.staff.length===0)return[];const h=l.value;return t.building.staff.map((f,T)=>{var V;const M=W.state.chars.find(H=>H.name===f);if(!M)return null;const k=t.building.jobs[T]||"",y=((V=M.buildingIncome)==null?void 0:V[t.building.id])||0;let _=0;if(h>0&&t.building.staffIncomeHistory.length>0){const H=t.building.staffIncomeHistory.reduce((q,Q)=>q+Q,0);if(H>0){const q=y/H;_=Math.floor(h*q)}}else{const H=W.state.totalDaysPassed||1;_=H>0?Math.floor(y/H):0}return{name:f,role:k,avgDailyIncome:_,totalWorkIncome:y,character:M}}).filter(f=>f!==null)}),u=C(()=>{if(!t.building||!t.building.staff||t.building.staff.length===0)return 0;const h=l.value;return h>0?Math.floor(h/t.building.staff.length):0}),g=C(()=>t.building?t.building.open===0&&t.building.close===24?"24":`${t.building.open}:00 - ${t.building.close}:00`:""),m=C(()=>{if(!t.building||!t.building.closedDays||t.building.closedDays.length===0)return"";const h=["","","","","","",""];return t.building.closedDays.map(f=>h[f]).join("")}),v=C(()=>!t.building||!t.building.isBuilt?0:Math.floor((t.building.totalCost||0)*.5*(t.building.level||1)));return C(()=>!t.building||!t.building.isBuilt?!1:(t.building.companyFunds||0)>=v.value),(h,f)=>{var T,M;return a.visible?(r(),d("div",{key:0,class:"modal-overlay",onClick:ke(n,["self"])},[i("div",Br,[i("div",Vr,[i("h3",Ar," "+b((T=a.building)==null?void 0:T.name)+" ",1),i("button",{class:"modal-close",onClick:n},"")]),a.building?(r(),d("div",Nr,[i("div",Er,[f[7]||(f[7]=i("h4",null," ",-1)),i("div",jr,[f[0]||(f[0]=i("span",{class:"profile-label"},"",-1)),a.building.isBuilt?(r(),d("span",Hr," ")):(r(),d("span",Or,"  ("+b(Math.floor(a.building.currentProgress/a.building.totalCost*100))+"%)",1))]),i("div",Rr,[f[1]||(f[1]=i("span",{class:"profile-label"},"",-1)),i("span",Fr,b(a.building.desc),1)]),i("div",Wr,[f[2]||(f[2]=i("span",{class:"profile-label"},"",-1)),i("span",Gr," "+b(a.building.level||1)+" ",1)]),i("div",Ur,[f[3]||(f[3]=i("span",{class:"profile-label"},"",-1)),i("span",Jr,""+b(a.building.baseSalary||10)+"/",1)]),a.building.isBuilt&&a.building.staff.length>0?(r(),d("div",zr,[f[4]||(f[4]=i("span",{class:"profile-label"},"",-1)),i("span",qr,""+b(a.building.companyFunds||0),1)])):S("",!0),i("div",Kr,[f[5]||(f[5]=i("span",{class:"profile-label"},"",-1)),i("span",Yr,b(g.value),1)]),i("div",Xr,[f[6]||(f[6]=i("span",{class:"profile-label"},"",-1)),i("span",Qr,b(m.value),1)])]),a.building.isBuilt?(r(),d("div",Zr,[f[10]||(f[10]=i("h4",null," ",-1)),i("div",ec,[f[8]||(f[8]=i("span",{class:"profile-label"},"",-1)),i("span",tc,""+b(a.building.totalRevenue||0),1)]),i("div",sc,[f[9]||(f[9]=i("span",{class:"profile-label"},"",-1)),i("span",nc,""+b(o.value),1),i("span",ac," ("+b(((M=a.building.revenueHistory)==null?void 0:M.length)||0)+") ",1)])])):S("",!0),a.building.jobs&&a.building.jobs.length>0?(r(),d("div",ic,[i("h4",null,"  ("+b(a.building.staff.length)+"/"+b(a.building.jobs.length)+")",1),c.value.length>0?(r(),d("div",oc,[(r(!0),d(j,null,R(c.value,(k,y)=>(r(),d("div",{key:y,class:"staff-item"},[i("div",lc,[i("span",rc,b(k==null?void 0:k.role),1),i("span",cc,b(k==null?void 0:k.name),1)]),i("div",uc,[i("span",dc,": "+b((k==null?void 0:k.avgDailyIncome)||0),1),i("span",hc,": "+b((k==null?void 0:k.totalWorkIncome)||0),1)])]))),128))])):(r(),d("div",fc,[...f[11]||(f[11]=[i("span",{class:"profile-value no-info"},"",-1)])])),c.value.length>0?(r(),d("div",mc,[f[12]||(f[12]=i("span",{class:"profile-label"},"",-1)),i("span",vc,""+b(u.value)+"/",1),i("span",pc," (: "+b(l.value)+") ",1)])):S("",!0)])):S("",!0),a.building.products&&a.building.products.length>0?(r(),d("div",gc,[a.building.id==="bar"?(r(),d("h4",bc," ")):a.building.id==="hotel"?(r(),d("h4",yc," ")):a.building.id==="cinema"?(r(),d("h4",$c," ")):(r(),d("h4",kc," /")),i("div",_c,[(r(!0),d(j,null,R(a.building.products,(k,y)=>(r(),d("div",{key:y,class:"product-item"},[i("div",Sc,[i("span",wc,b(k.name),1),i("span",xc,""+b(k.price)+"",1)])]))),128))])])):S("",!0),a.building.id==="footshop"&&a.building.prostitutes&&a.building.prostitutes.length>0?(r(),d("div",Mc,[f[14]||(f[14]=i("h4",null," ",-1)),i("div",Tc,[f[13]||(f[13]=i("span",{class:"profile-label"},"",-1)),i("span",Cc,b(a.building.prostitutes.join("")),1)])])):S("",!0)])):S("",!0)])])):S("",!0)}}}),Lc=B(Pc,[["__scopeId","data-v-c6dc05d3"]]),Ic={class:"tree-modal-content"},Dc={class:"tree-content"},Bc={key:0,class:"relationship-section"},Vc={class:"character-relationship-list"},Ac=["onClick"],Nc={class:"character-name"},Ec={class:"relationship-count"},jc={key:0,class:"relationship-details"},Hc={class:"rel-name"},Oc={class:"rel-love-value"},Rc={key:1,class:"relationship-section"},Fc={class:"character-relationship-list"},Wc=["onClick"],Gc={class:"character-name"},Uc={class:"relationship-count"},Jc={key:0,class:"relationship-details"},zc={class:"rel-name"},qc={class:"rel-love-value"},Kc={key:2,class:"relationship-section"},Yc={class:"character-relationship-list"},Xc=["onClick"],Qc={class:"character-name"},Zc={class:"relationship-count"},eu={key:0,class:"relationship-details"},tu={class:"rel-name"},su={class:"rel-love-value"},nu={key:3,class:"relationship-section"},au={class:"character-relationship-list"},iu=["onClick"],ou={class:"character-name"},lu={class:"relationship-count"},ru={key:0,class:"relationship-details"},cu={class:"rel-name"},uu={class:"rel-love-value"},du={key:4,class:"relationship-section"},hu={class:"character-relationship-list"},fu=["onClick"],mu={class:"character-name"},vu={class:"relationship-count"},pu={key:0,class:"relationship-details"},gu={class:"rel-name"},bu={class:"rel-love-value"},yu={key:5,class:"relationship-section"},$u={class:"character-relationship-list"},ku=["onClick"],_u={class:"character-name"},Su={class:"relationship-count"},wu={key:0,class:"relationship-details"},xu={class:"rel-name"},Mu={class:"rel-love-value"},Tu={key:6,class:"no-relationships"},Cu=L({__name:"RelationshipTree",props:{visible:{type:Boolean}},emits:["close","open-network","open-love-matrix"],setup(a,{emit:e}){const t=e,s=()=>{t("close")};A(!1),A(!1);const n=()=>{t("open-love-matrix")},o=()=>{t("open-network")},l=C(()=>{const M=[],k=new Set;return W.state.chars.forEach(y=>{var _;if(y.partner){const V=[y.name,y.partner].sort().join("-");k.has(V)||(k.add(V),M.push({from:y.name,to:y.partner,love:((_=y.relationships[y.partner])==null?void 0:_.love)||0,status:"spouse",type:"marriage"}))}y.children&&y.children.length>0&&y.children.forEach(V=>{M.push({from:y.name,to:V,love:100,status:"parent",type:"family"})}),y.fwbList&&y.fwbList.length>0&&y.fwbList.forEach(V=>{const H=[y.name,V].sort().join("-");if(!k.has(H)){k.add(H);const q=y.relationships[V];M.push({from:y.name,to:V,love:(q==null?void 0:q.love)||0,status:"fwb",type:"special"})}}),Object.entries(y.relationships).forEach(([V,H])=>{if(V!==y.partner&&!(y.children&&y.children.includes(V))&&(H.love>0||H.status!=="stranger")){const q=[y.name,V].sort().join("-");k.has(q)||(k.add(q),M.push({from:y.name,to:V,love:H.love,status:H.status,type:c(H.status)}))}})}),M}),c=M=>M==="spouse"?"marriage":M==="lover"||M==="mistress"?"romance":M==="friend"||M==="bestfriend"?"friendship":M==="parent"||M==="child"?"family":M==="fwb"?"special":"other",u=(M,k)=>({...{spouse:{text:" ",color:"#e84393"},lover:{text:" ",color:"#ff7675"},mistress:{text:" ",color:"#ff8c00"},fwb:{text:" ",color:"#ec4899"},bestfriend:{text:" ",color:"#3498db"},friend:{text:" ",color:"#74b9ff"},stranger:{text:" ",color:"#95a5a6"},parent:{text:" ",color:"#9b59b6"},child:{text:" ",color:"#9b59b6"},ex:{text:" ",color:"#636e72"}}[M]||{text:" ",color:"#999"},love:k}),g=C(()=>{const M={marriage:[],romance:[],friendship:[],family:[],special:[],other:[]};return l.value.forEach(k=>{M[k.type].push(k)}),M}),m=M=>W.state.chars.map(k=>{const y=l.value.filter(_=>_.type===M&&(_.from===k.name||_.to===k.name)).map(_=>({name:_.from===k.name?_.to:_.from,love:_.love,status:_.status})).sort((_,V)=>V.love-_.love);return{character:k,relationships:y}}).filter(k=>k.relationships.length>0);C(()=>W.state.chars);const v=C(()=>W.state.chars.map(M=>{const k=Object.entries(M.relationships).map(([y,_])=>({name:y,..._})).filter(y=>M.partner===y.name||y.status==="lover"||y.status==="mistress"||y.status==="ex"||y.status==="fwb"?!1:y.love>0||y.status!=="stranger").sort((y,_)=>{const V={bestfriend:3,friend:2,stranger:1},H=V[y.status]||0,q=V[_.status]||0;return H!==q?q-H:_.love-y.love});return{character:M,relationships:k}}).filter(M=>M.relationships.length>0)),h=A(new Map),f=(M,k)=>{h.value.has(M)||h.value.set(M,new Set);const y=h.value.get(M);y.has(k)?y.delete(k):y.add(k)},T=(M,k)=>{var y;return((y=h.value.get(M))==null?void 0:y.has(k))||!1};return(M,k)=>a.visible?(r(),d("div",{key:0,class:"modal-overlay",onClick:ke(s,["self"])},[i("div",Ic,[i("div",{class:"tree-header"},[k[0]||(k[0]=i("h3",{class:"tree-title"}," ",-1)),i("div",{class:"header-actions"},[i("button",{onClick:n,class:"action-btn",title:""}," "),i("button",{onClick:o,class:"action-btn",title:""}," "),i("button",{class:"modal-close",onClick:s},"")])]),i("div",Dc,[g.value.marriage.length>0?(r(),d("div",Bc,[k[1]||(k[1]=i("h4",{class:"section-title"}," ",-1)),i("div",Vc,[(r(!0),d(j,null,R(m("marriage"),y=>(r(),d("div",{key:`marriage-${y.character.name}`,class:"character-relationship-item"},[i("div",{class:"character-header",onClick:_=>f("marriage",y.character.name)},[i("span",{class:O(["expand-icon",{expanded:T("marriage",y.character.name)}])},"  ",2),i("strong",Nc,b(y.character.name),1),i("span",Ec,"("+b(y.relationships.length)+")",1)],8,Ac),T("marriage",y.character.name)?(r(),d("div",jc,[(r(!0),d(j,null,R(y.relationships,_=>(r(),d("div",{key:`marriage-${y.character.name}-${_.name}`,class:"relationship-detail-item"},[i("span",{class:"rel-tag",style:X({backgroundColor:u(_.status,_.love).color})},b(u(_.status,_.love).text),5),i("span",Hc,b(_.name),1),i("span",Oc,""+b(_.love),1)]))),128))])):S("",!0)]))),128))])])):S("",!0),g.value.romance.length>0?(r(),d("div",Rc,[k[2]||(k[2]=i("h4",{class:"section-title"}," ",-1)),i("div",Fc,[(r(!0),d(j,null,R(m("romance"),y=>(r(),d("div",{key:`romance-${y.character.name}`,class:"character-relationship-item"},[i("div",{class:"character-header",onClick:_=>f("romance",y.character.name)},[i("span",{class:O(["expand-icon",{expanded:T("romance",y.character.name)}])},"  ",2),i("strong",Gc,b(y.character.name),1),i("span",Uc,"("+b(y.relationships.length)+")",1)],8,Wc),T("romance",y.character.name)?(r(),d("div",Jc,[(r(!0),d(j,null,R(y.relationships,_=>(r(),d("div",{key:`romance-${y.character.name}-${_.name}`,class:"relationship-detail-item"},[i("span",{class:"rel-tag",style:X({backgroundColor:u(_.status,_.love).color})},b(u(_.status,_.love).text),5),i("span",zc,b(_.name),1),i("span",qc,""+b(_.love),1)]))),128))])):S("",!0)]))),128))])])):S("",!0),g.value.special.length>0?(r(),d("div",Kc,[k[3]||(k[3]=i("h4",{class:"section-title"}," ",-1)),i("div",Yc,[(r(!0),d(j,null,R(m("special"),y=>(r(),d("div",{key:`special-${y.character.name}`,class:"character-relationship-item"},[i("div",{class:"character-header",onClick:_=>f("special",y.character.name)},[i("span",{class:O(["expand-icon",{expanded:T("special",y.character.name)}])},"  ",2),i("strong",Qc,b(y.character.name),1),i("span",Zc,"("+b(y.relationships.length)+")",1)],8,Xc),T("special",y.character.name)?(r(),d("div",eu,[(r(!0),d(j,null,R(y.relationships,_=>(r(),d("div",{key:`special-${y.character.name}-${_.name}`,class:"relationship-detail-item"},[i("span",{class:"rel-tag",style:X({backgroundColor:u(_.status,_.love).color})},b(u(_.status,_.love).text),5),i("span",tu,b(_.name),1),i("span",su,""+b(_.love),1)]))),128))])):S("",!0)]))),128))])])):S("",!0),g.value.family.length>0?(r(),d("div",nu,[k[4]||(k[4]=i("h4",{class:"section-title"}," ",-1)),i("div",au,[(r(!0),d(j,null,R(m("family"),y=>(r(),d("div",{key:`family-${y.character.name}`,class:"character-relationship-item"},[i("div",{class:"character-header",onClick:_=>f("family",y.character.name)},[i("span",{class:O(["expand-icon",{expanded:T("family",y.character.name)}])},"  ",2),i("strong",ou,b(y.character.name),1),i("span",lu,"("+b(y.relationships.length)+")",1)],8,iu),T("family",y.character.name)?(r(),d("div",ru,[(r(!0),d(j,null,R(y.relationships,_=>(r(),d("div",{key:`family-${y.character.name}-${_.name}`,class:"relationship-detail-item"},[i("span",{class:"rel-tag",style:X({backgroundColor:u(_.status,_.love).color})},b(u(_.status,_.love).text),5),i("span",cu,b(_.name),1),i("span",uu,""+b(_.love),1)]))),128))])):S("",!0)]))),128))])])):S("",!0),v.value.length>0?(r(),d("div",du,[k[5]||(k[5]=i("h4",{class:"section-title"}," ",-1)),i("div",hu,[(r(!0),d(j,null,R(v.value,y=>(r(),d("div",{key:y.character.name,class:"character-relationship-item"},[i("div",{class:"character-header",onClick:_=>f("friendship",y.character.name)},[i("span",{class:O(["expand-icon",{expanded:T("friendship",y.character.name)}])},"  ",2),i("strong",mu,b(y.character.name),1),i("span",vu,"("+b(y.relationships.length)+")",1)],8,fu),T("friendship",y.character.name)?(r(),d("div",pu,[(r(!0),d(j,null,R(y.relationships,_=>(r(),d("div",{key:`${y.character.name}-${_.name}`,class:"relationship-detail-item"},[i("span",{class:O(["rel-tag",`tag-${_.status}`]),style:X({backgroundColor:u(_.status,_.love).color})},b(u(_.status,_.love).text),7),i("span",gu,b(_.name),1),i("span",bu,""+b(_.love),1)]))),128))])):S("",!0)]))),128))])])):S("",!0),g.value.other.length>0?(r(),d("div",yu,[k[6]||(k[6]=i("h4",{class:"section-title"}," ",-1)),i("div",$u,[(r(!0),d(j,null,R(m("other"),y=>(r(),d("div",{key:`other-${y.character.name}`,class:"character-relationship-item"},[i("div",{class:"character-header",onClick:_=>f("other",y.character.name)},[i("span",{class:O(["expand-icon",{expanded:T("other",y.character.name)}])},"  ",2),i("strong",_u,b(y.character.name),1),i("span",Su,"("+b(y.relationships.length)+")",1)],8,ku),T("other",y.character.name)?(r(),d("div",wu,[(r(!0),d(j,null,R(y.relationships,_=>(r(),d("div",{key:`other-${y.character.name}-${_.name}`,class:"relationship-detail-item"},[i("span",{class:"rel-tag",style:X({backgroundColor:u(_.status,_.love).color})},b(u(_.status,_.love).text),5),i("span",xu,b(_.name),1),i("span",Mu,""+b(_.love),1)]))),128))])):S("",!0)]))),128))])])):S("",!0),l.value.length===0?(r(),d("div",Tu,[...k[7]||(k[7]=[i("p",null,"",-1)])])):S("",!0)])])])):S("",!0)}}),Pu=B(Cu,[["__scopeId","data-v-81f4e299"]]),Lu={class:"network-modal-content"},Iu={class:"network-header"},Du={class:"network-controls"},Bu=["title"],Vu=L({__name:"RelationshipNetwork",props:{visible:{type:Boolean}},emits:["close"],setup(a,{emit:e}){const t=a,s=e,n=()=>{s("close")},o=A(null),l=A(null),c=A(1),u=A(0),g=A(0),m=A(!1),v=A({x:0,y:0}),h=A(null),f=A(!1),T=A(!0),M=A(!1),k=A([]),y=A([]),_=()=>{const I=W.state.chars,w=Math.max(250,I.length*15);k.value=I.map((U,J)=>{const z=J/I.length*Math.PI*2;return{id:U.name,name:U.name,x:Math.cos(z)*w,y:Math.sin(z)*w,vx:0,vy:0,radius:30,color:V(U)}})},V=I=>{const w=I.personality.name;return w===""||w===""?"#e74c3c":w===""||w===""||w===""?"#27ae60":w===""?"#3498db":"#95a5a6"},H=I=>({marriage:"#e84393",romance:"#ff7675",friendship:"#3498db",family:"#9b59b6",special:"#ec4899",other:"#999"})[I]||"#999",q=()=>{y.value=[];const I=new Set;W.state.chars.forEach(w=>{var U;if(w.partner){const J=[w.name,w.partner].sort().join("-");I.has(J)||(I.add(J),y.value.push({from:w.name,to:w.partner,type:"marriage",love:((U=w.relationships[w.partner])==null?void 0:U.love)||0,status:"spouse"}))}w.children&&w.children.length>0&&w.children.forEach(J=>{y.value.push({from:w.name,to:J,type:"family",love:100,status:"parent"})}),w.fwbList&&w.fwbList.length>0&&w.fwbList.forEach(J=>{const z=[w.name,J].sort().join("-");if(!I.has(z)){I.add(z);const Y=w.relationships[J];y.value.push({from:w.name,to:J,type:"special",love:(Y==null?void 0:Y.love)||0,status:"fwb"})}}),Object.entries(w.relationships).forEach(([J,z])=>{if(J===w.partner||w.children&&w.children.includes(J)||z.status==="stranger"||z.status==="friend")return;const Y=[w.name,J].sort().join("-");if(!I.has(Y)){I.add(Y);const G=Q(z.status);y.value.push({from:w.name,to:J,type:G,love:z.love,status:z.status})}})})},Q=I=>I==="spouse"?"marriage":I==="lover"||I==="mistress"?"romance":I==="friend"||I==="bestfriend"?"friendship":I==="parent"||I==="child"?"family":I==="fwb"?"special":"other",pe=()=>{if(!T.value)return;const I=800,w=.01,U=.85,J=100,z=2;let Y=0;k.value.forEach(G=>{if(h.value===G.id){G.vx=0,G.vy=0;return}let te=0,ce=0;k.value.forEach(fe=>{if(G.id===fe.id||h.value===fe.id)return;const ue=G.x-fe.x,se=G.y-fe.y,Z=Math.sqrt(ue*ue+se*se)||1;if(Z<J){const le=I/(Z*Z);te+=ue/Z*le,ce+=se/Z*le}else{const le=I/(Z*Z+100);te+=ue/Z*le,ce+=se/Z*le}}),y.value.forEach(fe=>{if(fe.from===G.id){const ue=k.value.find(se=>se.id===fe.to);if(ue){const se=ue.x-G.x,Z=ue.y-G.y,le=Math.sqrt(se*se+Z*Z)||1,st=le-150;te+=se/le*w*st,ce+=Z/le*w*st}}}),G.vx=(G.vx+te*.05)*U,G.vy=(G.vy+ce*.05)*U;const He=Math.sqrt(G.vx*G.vx+G.vy*G.vy);He>z&&(G.vx=G.vx/He*z,G.vy=G.vy/He*z),G.x+=G.vx,G.y+=G.vy,Y+=Math.abs(G.vx)+Math.abs(G.vy)}),Y<.1&&!M.value?f.value=!0:f.value=!1},oe=I=>({fwb:"",spouse:"",lover:"",mistress:"",bestfriend:"",friend:"",stranger:"",ex:"",parent:"",child:""})[I]||"",ge=()=>{if(!o.value)return;const I=o.value,w=I.getContext("2d");w&&(l.value&&(I.width=l.value.clientWidth,I.height=l.value.clientHeight),w.clearRect(0,0,I.width,I.height),w.save(),w.translate(I.width/2+u.value,I.height/2+g.value),w.scale(c.value,c.value),y.value.forEach(U=>{const J=k.value.find(ce=>ce.id===U.from),z=k.value.find(ce=>ce.id===U.to);if(!J||!z)return;const Y=(J.x+z.x)/2,G=(J.y+z.y)/2;Math.atan2(z.y-J.y,z.x-J.x),w.strokeStyle=H(U.type),w.lineWidth=Math.max(1,U.love/20),w.globalAlpha=.6,w.beginPath(),w.moveTo(J.x,J.y),w.lineTo(z.x,z.y),w.stroke();const te=oe(U.status);te&&(w.save(),w.globalAlpha=.9,w.fillStyle=H(U.type),w.font="bold 14px Arial",w.textAlign="center",w.textBaseline="middle",w.fillStyle="white",w.beginPath(),w.arc(Y,G,12,0,Math.PI*2),w.fill(),w.fillStyle=H(U.type),w.fillText(te,Y,G),w.restore())}),w.globalAlpha=1,k.value.forEach(U=>{w.fillStyle=U.color,w.beginPath(),w.arc(U.x,U.y,U.radius,0,Math.PI*2),w.fill(),w.fillStyle="white",w.beginPath(),w.arc(U.x,U.y,U.radius-3,0,Math.PI*2),w.fill(),w.fillStyle="#333",w.font="12px Arial",w.textAlign="center",w.textBaseline="middle",w.fillText(U.name,U.x,U.y)}),w.restore())};let be=null;const je=()=>{T.value&&pe(),ge(),be=requestAnimationFrame(je)},vt=()=>{T.value=!T.value,T.value||k.value.forEach(I=>{I.vx=0,I.vy=0})},pt=()=>{k.value.forEach(I=>{I.vx=0,I.vy=0}),f.value=!0,T.value=!1},gt=I=>{if(!o.value)return;const w=o.value.getBoundingClientRect(),U=(I.clientX-w.left-o.value.width/2-u.value)/c.value,J=(I.clientY-w.top-o.value.height/2-g.value)/c.value,z=k.value.find(Y=>{const G=U-Y.x,te=J-Y.y;return Math.sqrt(G*G+te*te)<Y.radius});if(z){h.value=z.id,m.value=!0,M.value=!0;const Y=k.value.find(G=>G.id===z.id);Y&&(Y.vx=0,Y.vy=0)}else m.value=!0,M.value=!1,v.value={x:I.clientX-u.value,y:I.clientY-g.value}},bt=I=>{if(m.value){if(h.value){const w=k.value.find(U=>U.id===h.value);if(w&&o.value){const U=o.value.getBoundingClientRect(),J=(I.clientX-U.left-o.value.width/2-u.value)/c.value,z=(I.clientY-U.top-o.value.height/2-g.value)/c.value;w.x=J,w.y=z,w.vx=0,w.vy=0}}else u.value=I.clientX-v.value.x,g.value=I.clientY-v.value.y;ge()}},tt=()=>{if(m.value=!1,h.value){const I=k.value.find(w=>w.id===h.value);I&&(I.vx=0,I.vy=0)}h.value=null,M.value=!1},yt=I=>{I.preventDefault();const w=I.deltaY>0?.9:1.1;c.value=Math.max(.3,Math.min(3,c.value*w)),ge()};return ee(()=>t.visible,I=>{I?Le(()=>{_(),q(),f.value=!1,T.value=!0,M.value=!1,je()}):(be&&(cancelAnimationFrame(be),be=null),M.value=!1,h.value=null)}),ie(()=>{t.visible&&Le(()=>{_(),q(),f.value=!1,T.value=!0,M.value=!1,je()})}),xe(()=>{be&&cancelAnimationFrame(be)}),(I,w)=>a.visible?(r(),d("div",{key:0,class:"modal-overlay",onClick:ke(n,["self"])},[i("div",Lu,[i("div",Iu,[w[1]||(w[1]=i("h3",{class:"network-title"}," ",-1)),i("div",Du,[i("button",{onClick:vt,class:O(["btn-physics",{active:T.value}]),title:T.value?"":""},b(T.value?" ":" "),11,Bu),i("button",{onClick:pt,class:"btn-stabilize",title:""}," "),i("button",{onClick:w[0]||(w[0]=U=>{c.value=1,u.value=0,g.value=0,ge()}),class:"btn-reset-view",title:""}," "),i("button",{class:"modal-close",onClick:n},"")])]),w[2]||(w[2]=rt('<div class="network-legend" data-v-67498ef7><div class="legend-item" data-v-67498ef7><span class="legend-color" style="background:#e84393;" data-v-67498ef7></span><span data-v-67498ef7></span></div><div class="legend-item" data-v-67498ef7><span class="legend-color" style="background:#ff7675;" data-v-67498ef7></span><span data-v-67498ef7></span></div><div class="legend-item" data-v-67498ef7><span class="legend-color" style="background:#3498db;" data-v-67498ef7></span><span data-v-67498ef7></span></div><div class="legend-item" data-v-67498ef7><span class="legend-color" style="background:#9b59b6;" data-v-67498ef7></span><span data-v-67498ef7></span></div><div class="legend-item" data-v-67498ef7><span class="legend-color" style="background:#ec4899;" data-v-67498ef7></span><span data-v-67498ef7></span></div><div class="legend-item" data-v-67498ef7><span class="legend-color" style="background:#999;" data-v-67498ef7></span><span data-v-67498ef7></span></div><div class="legend-hint" data-v-67498ef7> </div></div>',1)),i("div",{ref_key:"containerRef",ref:l,class:"network-canvas-container"},[i("canvas",{ref_key:"canvasRef",ref:o,class:"network-canvas",onMousedown:gt,onMousemove:bt,onMouseup:tt,onMouseleave:tt,onWheel:yt},null,544)],512)])])):S("",!0)}}),Au=B(Vu,[["__scopeId","data-v-67498ef7"]]),Nu={class:"matrix-modal-content"},Eu={class:"matrix-content"},ju={class:"matrix-table-wrapper"},Hu={class:"love-matrix-table"},Ou=["title"],Ru={class:"row-header-cell"},Fu=["title"],Wu={key:0,class:"love-value"},Gu={key:1,class:"self-indicator"},Uu=L({__name:"RelationshipLoveMatrix",props:{visible:{type:Boolean}},emits:["close"],setup(a,{emit:e}){const t=e,s=()=>{t("close")},n=C(()=>{const m=W.state.chars,v=[];return m.forEach(h=>{m.forEach(f=>{if(h.name!==f.name){const T=h.relationships[f.name];T?v.push({from:h.name,to:f.name,love:T.love,status:T.status}):v.push({from:h.name,to:f.name,love:0,status:"stranger"})}})}),v}),o=(m,v)=>m==="spouse"?"#e84393":m==="lover"||m==="mistress"?"#ff7675":m==="bestfriend"?"#3498db":m==="friend"?"#74b9ff":m==="parent"||m==="child"?"#9b59b6":m==="ex"?"#636e72":v>50?"#55efc4":v>20?"#fdcb6e":"#b2bec3",l=m=>({spouse:" ",lover:" ",mistress:" ",bestfriend:" ",friend:" ",parent:" ",child:" ",ex:" ",stranger:" "})[m]||" ",c=C(()=>W.state.chars),u=(m,v)=>{const h=n.value.find(f=>f.from===m&&f.to===v);return h?h.love:0},g=(m,v)=>{const h=n.value.find(f=>f.from===m&&f.to===v);return h?h.status:"stranger"};return(m,v)=>a.visible?(r(),d("div",{key:0,class:"modal-overlay",onClick:ke(s,["self"])},[i("div",Nu,[i("div",{class:"matrix-header"},[v[0]||(v[0]=i("h3",{class:"matrix-title"}," ",-1)),i("button",{class:"modal-close",onClick:s},"")]),i("div",Eu,[i("div",ju,[i("table",Hu,[i("thead",null,[i("tr",null,[v[1]||(v[1]=i("th",{class:"corner-cell"},null,-1)),(r(!0),d(j,null,R(c.value,h=>(r(),d("th",{key:h.name,class:"header-cell",title:h.name},b(h.name),9,Ou))),128))])]),i("tbody",null,[(r(!0),d(j,null,R(c.value,h=>(r(),d("tr",{key:h.name},[i("td",Ru,b(h.name),1),(r(!0),d(j,null,R(c.value,f=>(r(),d("td",{key:`${h.name}-${f.name}`,class:O(["matrix-cell",{"self-cell":h.name===f.name}]),style:X({backgroundColor:h.name===f.name?"transparent":o(g(h.name,f.name),u(h.name,f.name))+"20",borderColor:o(g(h.name,f.name),u(h.name,f.name))}),title:`${h.name}  ${f.name}: ${l(g(h.name,f.name))} (${u(h.name,f.name)})`},[h.name!==f.name?(r(),d("span",Wu," "+b(u(h.name,f.name)),1)):(r(),d("span",Gu,""))],14,Fu))),128))]))),128))])])]),v[2]||(v[2]=rt('<div class="matrix-legend" data-v-7940fd04><h4 data-v-7940fd04></h4><div class="legend-items" data-v-7940fd04><div class="legend-item" data-v-7940fd04><span class="legend-color" style="background:#e84393;" data-v-7940fd04></span><span data-v-7940fd04></span></div><div class="legend-item" data-v-7940fd04><span class="legend-color" style="background:#ff7675;" data-v-7940fd04></span><span data-v-7940fd04>/</span></div><div class="legend-item" data-v-7940fd04><span class="legend-color" style="background:#3498db;" data-v-7940fd04></span><span data-v-7940fd04></span></div><div class="legend-item" data-v-7940fd04><span class="legend-color" style="background:#74b9ff;" data-v-7940fd04></span><span data-v-7940fd04></span></div><div class="legend-item" data-v-7940fd04><span class="legend-color" style="background:#9b59b6;" data-v-7940fd04></span><span data-v-7940fd04></span></div><div class="legend-item" data-v-7940fd04><span class="legend-color" style="background:#55efc4;" data-v-7940fd04></span><span data-v-7940fd04> (&gt;50)</span></div><div class="legend-item" data-v-7940fd04><span class="legend-color" style="background:#fdcb6e;" data-v-7940fd04></span><span data-v-7940fd04> (20-50)</span></div><div class="legend-item" data-v-7940fd04><span class="legend-color" style="background:#b2bec3;" data-v-7940fd04></span><span data-v-7940fd04> (&lt;20)</span></div></div></div>',1))])])])):S("",!0)}}),Ju=B(Uu,[["__scopeId","data-v-7940fd04"]]),zu={class:"game-content"},qu={class:"section residents-section"},Ku={class:"section-title"},Yu={class:"residents-grid"},Xu={class:"section buildings-section"},Qu={class:"buildings-list"},Zu=L({__name:"GameLayout",setup(a){const{state:e}=W,t=A(!1),s=A(null),n=A(!1),o=Q=>{s.value=Q,n.value=!0},l=()=>{n.value=!1,s.value=null},c=A(null),u=A(!1),g=Q=>{c.value=Q,u.value=!0},m=()=>{u.value=!1,c.value=null},v=A(!1),h=A(!1),f=A(!1),T=()=>{v.value=!0},M=()=>{v.value=!1},k=()=>{h.value=!1},y=()=>{h.value=!0},_=()=>{f.value=!1},V=()=>{f.value=!0},H=()=>{t.value?document.documentElement.classList.add("dark-mode"):document.documentElement.classList.remove("dark-mode")};ee(t,Q=>{localStorage.setItem("game-theme",Q?"dark":"light"),H()}),ie(()=>{const Q=localStorage.getItem("game-theme");if(Q==="dark")t.value=!0;else if(Q===null){const pe=window.matchMedia("(prefers-color-scheme: dark)").matches;t.value=pe}H(),e.isPlaying||W.start()}),xe(()=>{W.autoSave(),W.stop(),W.cleanup()});const q=()=>{t.value=!t.value};return Ie("isDarkMode",t),Ie("toggleDarkMode",q),(Q,pe)=>(r(),d("div",{class:O(["game-wrapper",{"dark-mode":t.value}])},[D(Tl,{onToggleDark:q,onShowRelationshipTree:T}),i("div",zu,[i("div",qu,[i("h3",Ku," ("+b(p(e).chars.length)+")",1),i("div",Yu,[(r(!0),d(j,null,R(p(e).chars,oe=>(r(),N(Ro,{key:oe.name,char:oe,onClick:ge=>o(oe)},null,8,["char","onClick"]))),128))])]),i("div",Xu,[pe[0]||(pe[0]=i("h3",{class:"section-title"},"",-1)),i("div",Qu,[(r(!0),d(j,null,R(p(e).buildings,oe=>(r(),N(il,{key:oe.id,build:oe,onClick:ge=>g(oe)},null,8,["build","onClick"]))),128))])]),D(dl,{logs:p(e).logs,class:"section log-section"},null,8,["logs"])]),D(Dr,{character:s.value,visible:n.value,onClose:l},null,8,["character","visible"]),D(Lc,{building:c.value,visible:u.value,onClose:m},null,8,["building","visible"]),D(Pu,{visible:v.value,onClose:M,onOpenNetwork:y,onOpenLoveMatrix:V},null,8,["visible"]),D(Au,{visible:h.value,onClose:k},null,8,["visible"]),D(Ju,{visible:f.value,onClose:_},null,8,["visible"])],2))}}),ed=B(Zu,[["__scopeId","data-v-be4e15fc"]]),ad={extends:bo,enhanceApp({app:a}){a.component("GameLayout",ed)}};export{ed as G,ad as R,W as g};
