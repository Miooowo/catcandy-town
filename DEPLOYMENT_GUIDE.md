# çŒ«æœé•‡ç‰©è¯­ - éƒ¨ç½²æŒ‡å—

## æ¦‚è¿°

çŒ«æœé•‡ç‰©è¯­åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š
1. **å‰ç«¯ï¼ˆé™æ€ç½‘ç«™ï¼‰**ï¼šéƒ¨ç½²åœ¨ Netlify
2. **åç«¯æœåŠ¡å™¨ï¼ˆå¤šäººè”æœºï¼‰**ï¼šéœ€è¦å•ç‹¬éƒ¨ç½²ï¼ˆRailwayã€Render æˆ– VPSï¼‰

## å‰ç«¯éƒ¨ç½²ï¼ˆNetlifyï¼‰

ä½ çš„æ¸¸æˆå·²ç»éƒ¨ç½²åœ¨ Netlifyï¼šhttps://catcandy-town.netlify.app/

### è‡ªåŠ¨éƒ¨ç½²

å¦‚æœå·²è¿æ¥ GitHubï¼ŒNetlify ä¼šè‡ªåŠ¨æ£€æµ‹ `netlify.toml` é…ç½®å¹¶è‡ªåŠ¨éƒ¨ç½²ã€‚

### æ‰‹åŠ¨éƒ¨ç½²

1. æ„å»ºé¡¹ç›®ï¼š
   ```bash
   npm run docs:build
   ```

2. åœ¨ Netlify æ§åˆ¶å°ï¼š
   - æ‹–æ‹½ `docs/.vitepress/dist` æ–‡ä»¶å¤¹åˆ° Netlify
   - æˆ–ä½¿ç”¨ Netlify CLIï¼š
     ```bash
     npm install -g netlify-cli
     netlify deploy --prod --dir=docs/.vitepress/dist
     ```

## æœåŠ¡å™¨éƒ¨ç½²ï¼ˆå¤šäººè”æœºï¼‰

Netlify **ä¸æ”¯æŒ**è¿è¡Œ Node.js æœåŠ¡å™¨ï¼Œæ‰€ä»¥éœ€è¦å•ç‹¬éƒ¨ç½²æœåŠ¡å™¨ã€‚

### æ–¹æ¡ˆ 1ï¼šRailwayï¼ˆæ¨èï¼Œå…è´¹é¢åº¦ï¼‰

1. è®¿é—® [Railway](https://railway.app/)
2. ä½¿ç”¨ GitHub ç™»å½•
3. åˆ›å»ºæ–°é¡¹ç›® â†’ ä» GitHub ä»“åº“å¯¼å…¥
4. é…ç½®ï¼š
   - **æ ¹ç›®å½•**ï¼š`server/`
   - **å¯åŠ¨å‘½ä»¤**ï¼š`npm start`
   - **ç¯å¢ƒå˜é‡**ï¼š`PORT`ï¼ˆRailway ä¼šè‡ªåŠ¨æä¾›ï¼‰
5. éƒ¨ç½²å®Œæˆåï¼ŒRailway ä¼šæä¾›ä¸€ä¸ª URLï¼ˆå¦‚ï¼š`https://your-app.railway.app`ï¼‰
6. åœ¨æ¸¸æˆçš„å¤šäººæ¨¡å¼ä¸­è¾“å…¥è¿™ä¸ª URL

### æ–¹æ¡ˆ 2ï¼šRenderï¼ˆå…è´¹ï¼Œä½†æœ‰ä¼‘çœ ï¼‰

1. è®¿é—® [Render](https://render.com/)
2. ä½¿ç”¨ GitHub ç™»å½•
3. åˆ›å»ºæ–°çš„ **Web Service**
4. é…ç½®ï¼š
   - **ä»“åº“**ï¼šé€‰æ‹©ä½ çš„ GitHub ä»“åº“
   - **æ ¹ç›®å½•**ï¼š`server/`
   - **æ„å»ºå‘½ä»¤**ï¼š`npm install`
   - **å¯åŠ¨å‘½ä»¤**ï¼š`npm start`
   - **ç¯å¢ƒå˜é‡**ï¼š`PORT`ï¼ˆRender ä¼šè‡ªåŠ¨æä¾›ï¼‰
5. éƒ¨ç½²å®Œæˆåï¼ŒRender ä¼šæä¾›ä¸€ä¸ª URLï¼ˆå¦‚ï¼š`https://your-app.onrender.com`ï¼‰
6. åœ¨æ¸¸æˆçš„å¤šäººæ¨¡å¼ä¸­è¾“å…¥è¿™ä¸ª URL

**æ³¨æ„**ï¼šRender å…è´¹ç‰ˆåœ¨æ— æ´»åŠ¨æ—¶ä¼šä¼‘çœ ï¼Œé¦–æ¬¡è®¿é—®éœ€è¦ç­‰å¾…å‡ ç§’å”¤é†’ã€‚

### æ–¹æ¡ˆ 3ï¼šVPSï¼ˆè‡ªå»ºæœåŠ¡å™¨ï¼‰

å¦‚æœä½ æœ‰è‡ªå·±çš„ VPSï¼Œå¯ä»¥è¿™æ ·éƒ¨ç½²ï¼š

```bash
# 1. å®‰è£… Node.js
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# 2. å…‹éš†é¡¹ç›®
git clone <your-repo>
cd catcandy-town/server

# 3. å®‰è£…ä¾èµ–
npm install

# 4. ä½¿ç”¨ PM2 è¿è¡Œï¼ˆæ¨èï¼‰
npm install -g pm2
pm2 start server.js --name catcandy-town-server
pm2 save
pm2 startup  # è®¾ç½®å¼€æœºè‡ªå¯
```

ç„¶åé…ç½® Nginx åå‘ä»£ç†ï¼ˆå¯é€‰ï¼‰ï¼š

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
```

## ä½¿ç”¨å¤šäººè”æœºåŠŸèƒ½

1. éƒ¨ç½²æœåŠ¡å™¨åï¼Œè·å¾—æœåŠ¡å™¨ URLï¼ˆå¦‚ï¼š`https://your-server.railway.app`ï¼‰
2. åœ¨æ¸¸æˆä¸­ç‚¹å‡» **ğŸŒ å¤šäººè”æœº** æŒ‰é’®
3. è¾“å…¥æœåŠ¡å™¨åœ°å€
4. ç‚¹å‡» **è¿æ¥æœåŠ¡å™¨**
5. åˆ›å»ºæˆ–åŠ å…¥åŸé•‡
6. æœåŠ¡å™¨åœ°å€ä¼šè‡ªåŠ¨ä¿å­˜ï¼Œä¸‹æ¬¡æ‰“å¼€æ—¶è‡ªåŠ¨å¡«å……

## æ³¨æ„äº‹é¡¹

### CORS é…ç½®

æœåŠ¡å™¨å·²ç»é…ç½®äº† CORSï¼Œå…è®¸æ‰€æœ‰æ¥æºè®¿é—®ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä½ å¯èƒ½æƒ³è¦é™åˆ¶ï¼š

```javascript
// server/server.js
const io = new Server(server, {
  cors: {
    origin: ["https://catcandy-town.netlify.app"], // åªå…è®¸ä½ çš„ Netlify åŸŸå
    methods: ["GET", "POST"]
  }
});
```

### ç¯å¢ƒå˜é‡

å¦‚æœéœ€è¦é…ç½®ä¸åŒçš„ç¯å¢ƒï¼Œå¯ä»¥åœ¨æœåŠ¡å™¨éƒ¨ç½²å¹³å°è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

- `PORT`ï¼šæœåŠ¡å™¨ç«¯å£ï¼ˆé€šå¸¸ç”±å¹³å°è‡ªåŠ¨æä¾›ï¼‰
- `NODE_ENV`ï¼š`production` æˆ– `development`

### æœåŠ¡å™¨æŒä¹…åŒ–

å½“å‰æœåŠ¡å™¨ä½¿ç”¨å†…å­˜å­˜å‚¨åŸé•‡æ•°æ®ï¼ŒæœåŠ¡å™¨é‡å¯åæ•°æ®ä¼šä¸¢å¤±ã€‚å¦‚æœéœ€è¦æŒä¹…åŒ–ï¼Œå¯ä»¥ï¼š

1. ä½¿ç”¨ Redis å­˜å‚¨åŸé•‡æ•°æ®
2. ä½¿ç”¨æ•°æ®åº“ï¼ˆMongoDBã€PostgreSQL ç­‰ï¼‰
3. å®šæœŸå°†æ•°æ®ä¿å­˜åˆ°æ–‡ä»¶ç³»ç»Ÿ

## æ•…éšœæ’æŸ¥

### æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨

1. æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œ
2. æ£€æŸ¥æœåŠ¡å™¨ URL æ˜¯å¦æ­£ç¡®ï¼ˆåŒ…å« `https://` æˆ– `http://`ï¼‰
3. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
4. æ£€æŸ¥æœåŠ¡å™¨çš„ CORS é…ç½®

### è¿æ¥åç«‹å³æ–­å¼€

1. æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—
2. æ£€æŸ¥ç½‘ç»œè¿æ¥
3. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

### è·¨åŸé•‡åŠŸèƒ½ä¸å·¥ä½œ

1. ç¡®ä¿è‡³å°‘æœ‰ä¸¤ä¸ªåŸé•‡åœ¨çº¿
2. æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—
3. æ£€æŸ¥æ¸¸æˆæ—¥å¿—ï¼ˆæ§åˆ¶å°ï¼‰

## æ›´æ–°æœåŠ¡å™¨

å¦‚æœä¿®æ”¹äº†æœåŠ¡å™¨ä»£ç ï¼š

1. æäº¤åˆ° GitHub
2. Railway/Render ä¼šè‡ªåŠ¨é‡æ–°éƒ¨ç½²
3. VPS éœ€è¦æ‰‹åŠ¨æ›´æ–°ï¼š
   ```bash
   cd catcandy-town/server
   git pull
   pm2 restart catcandy-town-server
   ```

## è”ç³»æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
- æœåŠ¡å™¨æ—¥å¿—
- æµè§ˆå™¨æ§åˆ¶å°
- ç½‘ç»œè¿æ¥
- æœåŠ¡å™¨çŠ¶æ€

